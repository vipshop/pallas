webpackJsonp([1,2],Array(43).concat([function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(7),o=i(a),s=n(502),l=i(s),r=n(503),c=i(r),u=n(506),d=i(u),p=n(510),f=i(p),m=n(508),g=i(m),h=n(509),v=i(h),b=n(504),_=i(b),x=n(505),I=i(x),y=n(507),w=i(y),k=n(560),C=i(k);o.default.component("index-data-source-item",C.default),o.default.component("Container",c.default),o.default.component("Navbar",d.default),o.default.component("Editor",l.default),o.default.component("Timeline",g.default),o.default.component("Timeline-item",v.default),o.default.component("Version-footer",f.default),o.default.component("json-content-dialog",_.default),o.default.component("json-diff",I.default),o.default.component("Panel",w.default)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(7),o=i(a),s=n(0),l=i(s);o.default.filter("formatDate",function(e){var t=void 0;if(null!==e){var n=new Date(e);t=(0,l.default)(n).format("YYYY-MM-DD HH:mm:ss")}else t="-";return t}),o.default.filter("formatOnlyDate",function(e){var t=new Date(e);return(0,l.default)(t).format("MM-DD")}),o.default.filter("formatOnlyTime",function(e){var t=new Date(e);return(0,l.default)(t).format("HH:mm:ss")})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=t.SET_LOGIN_USER="SET_LOGIN_USER";t.default={SET_LOGIN_USER:i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(72);t.default={errorMessage:function(e){i.MessageBox.alert(e,"错误信息",{type:"error",confirmButtonText:"确定"})},successMessage:function(e,t){i.MessageBox.alert(e,"成功信息",{type:"success",confirmButtonText:"确定"}).then(function(){t()}).catch(function(){})},confirmMessage:function(e,t){i.MessageBox.confirm(e,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t()}).catch(function(){})},loading:function(){return i.Loading.service({body:!0,text:"拼命加载中"})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=[{name:"login",path:"/login"},{name:"indexManage",path:"/index_manage"},{name:"indexDetail",path:"/index_detail"},{name:"versionManage",path:"/index_detail/version_manage"},{name:"templateManage",path:"/index_detail/template_manage"},{name:"dynamicManage",path:"/index_detail/dynamic_manage"},{name:"flowRecord",path:"/index_detail/flow_record"},{name:"cronDelete",path:"/index_detail/cron_delete"},{name:"routeManage",path:"/index_detail/route_manage"},{name:"serviceManage",path:"/index_detail/service_manage"},{name:"clusterManage",path:"/cluster_manage"},{name:"clusterRouteManage",path:"/cluster_route_manage"},{name:"clusterNodeRestart",path:"/cluster_node_restart"},{name:"clusterDetail",path:"/cluster_detail"},{name:"authorityManage",path:"/authority_manage"},{name:"authorityManageAdministrator",path:"/authority_manage_administrator"},{name:"pluginManage",path:"/plugin_manage"},{name:"pluginUpgrade",path:"/plugin_manage/plugin_upgrade"},{name:"agentManage",path:"/agent_manage"},{name:"tokenManage",path:"/token_manage"},{name:"permissionManage",path:"/permission_manage"},{name:"userManage",path:"/permission_manage/user_manage"}];t.default={GetPath:function(e){var t=i.filter(function(t){return t.name===e});if(void 0!==t)return t[0].path;throw new Error("can not find route path ")}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){n(661);var i=n(1)(n(297),n(597),null,null);e.exports=i.exports},,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(7),o=i(a),s=n(291),l=i(s);o.default.directive("diff",l.default.diff),o.default.directive("processingDiff",l.default.processingDiff),o.default.directive("semanticDiff",l.default.semanticDiff),o.default.directive("lineDiff",l.default.lineDiff)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(7),o=i(a),s=n(648),l=i(s),r=n(82),c=i(r),u=n(239),d=i(u),p=n(563),f=i(p),m=n(535),g=i(m),h=n(558),v=i(h),b=n(554),_=i(b),x=n(529),I=i(x),y=n(531),w=i(y),k=n(528),C=i(k),S=n(539),$=i(S),N=n(543),T=i(N),P=n(518),E=i(P),D=n(523),V=i(D),j=n(519),M=i(j),L=n(516),O=i(L),G=n(513),A=i(G),R=n(514),F=i(R),q=n(568),z=i(q),U=n(569),J=i(U),H=n(511),B=i(H),K=n(573),W=i(K),Q=n(564),Y=i(Q),X=n(566),Z=i(X);o.default.use(l.default),t.default=new l.default({routes:[{path:c.default.GetPath("indexManage"),name:"index_manage",component:f.default},{path:"/",redirect:"index_manage"},{path:c.default.GetPath("login"),name:"login",component:d.default},{path:c.default.GetPath("indexDetail"),component:g.default,children:[{path:"",redirect:"version_manage"},{name:"version_manage",path:c.default.GetPath("versionManage"),component:v.default},{name:"template_manage",path:c.default.GetPath("templateManage"),component:_.default},{name:"dynamic_manage",path:c.default.GetPath("dynamicManage"),component:I.default},{name:"route_manage",path:c.default.GetPath("routeManage"),component:$.default},{name:"service_manage",path:c.default.GetPath("serviceManage"),component:T.default},{name:"flow_record",path:c.default.GetPath("flowRecord"),component:w.default},{name:"cron_delete",path:c.default.GetPath("cronDelete"),component:C.default}]},{path:c.default.GetPath("clusterManage"),name:"cluster_manage",component:E.default},{path:c.default.GetPath("clusterRouteManage"),name:"cluster_route_manage",component:V.default},{path:c.default.GetPath("clusterNodeRestart"),name:"cluster_node_restart",component:M.default},{path:c.default.GetPath("clusterDetail"),name:"cluster_detail",component:O.default},{path:c.default.GetPath("authorityManage"),name:"authority_manage",component:A.default},{path:c.default.GetPath("authorityManageAdministrator"),name:"authority_manage_administrator",component:F.default},{path:c.default.GetPath("pluginManage"),name:"plugin_manage",component:z.default},{path:c.default.GetPath("pluginUpgrade"),name:"plugin_upgrade",component:J.default},{path:c.default.GetPath("agentManage"),name:"agent_manage",component:B.default},{path:c.default.GetPath("tokenManage"),name:"token_manage",component:W.default},{path:c.default.GetPath("permissionManage"),component:Y.default,children:[{path:"",redirect:"user_manage"},{name:"user_manage",path:c.default.GetPath("userManage"),component:Z.default}]}]})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(86),o=i(a),s=n(7),l=i(s),r=n(695),c=i(r),u=n(80);l.default.use(c.default),t.default=new c.default.Store({state:{loginUser:""},getters:{},mutations:(0,o.default)({},u.SET_LOGIN_USER,function(e,t){e.loginUser=t}),actions:(0,o.default)({},u.SET_LOGIN_USER,function(e,t){(0,e.commit)(u.SET_LOGIN_USER,t)})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(292),o=i(a),s=n(294),l=i(s),r=n(81),c=i(r),u=n(293),d=i(u),p=n(295),f=i(p),m=n(82),g=i(m),h={array:o.default,http:l.default,message:c.default,option:d.default,validate:f.default,routerMapper:g.default};h.install=function(e){e.prototype.$array=o.default,e.prototype.$http=l.default,e.prototype.$message=c.default,e.prototype.$option=d.default,e.prototype.$validate=f.default,e.prototype.$routermapper=g.default},t.default=h},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){var i=n(1)(n(296),n(599),null,null);e.exports=i.exports},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(){function e(e){switch(e){case c.DIFF_INSERT:return"ins";case c.DIFF_DELETE:return"del";case c.DIFF_EQUAL:return"match"}}function t(e){switch(e){case c.DIFF_EQUAL:return" ";case c.DIFF_INSERT:return"+";case c.DIFF_DELETE:return"-"}}function n(e){switch(e){case c.DIFF_EQUAL:return"span";case c.DIFF_INSERT:return"ins";case c.DIFF_DELETE:return"del"}}function i(e){switch(e){case c.DIFF_EQUAL:return"equal";case c.DIFF_INSERT:return"insert";case c.DIFF_DELETE:return"delete"}}function a(e){return 0===(0,r.default)(e).length}function o(e,t,n){n=n||{};var o={};if(e&&e.attrs&&(o=JSON.parse((0,s.default)(e.attrs[i(t)]||{}))),a(o)&&a(n))return"";for(var l in n)o[l]?o[l]=n[l]+" "+o[l]:o[l]=n[l];var r=[];for(var c in o)r.push(c+'="'+o[c]+'"');return" "+r.join(" ")}function l(i,a,s){var l="";switch(a){case m.LINEDIFF:l='<div class="'+e(i)+'"><span'+o(s,i,{class:"noselect"})+">"+t(i)+"</span>";break;case m.INSDEL:l="<"+n(i)+o(s,i)+">"}return l}function u(e,t){var i="";switch(t){case m.LINEDIFF:i="</div>";break;case m.INSDEL:i="</"+n(e)+">"}return i}function d(e,t,n){for(var i=e.split("\n"),a=0;a<i.length;a++)0!==i[a].length&&(i[a]=l(t,m.LINEDIFF,n)+i[a]+u(t,m.LINEDIFF));return i.join("")}function p(e,t,n){for(var i=/&/g,a=/</g,o=/>/g,s=0;s<e.length;s++){var r=e[s][1],c=r.replace(i,"&amp;").replace(a,"&lt;").replace(o,"&gt;");e[s][1]=c}for(var p=[],f=0;f<e.length;f++){var g=e[f][0],h=e[f][1];t===m.LINEDIFF?p[f]=d(h,g,n):p[f]=l(g,t,n)+h+u(g,t)}return p.join("")}function f(e,t){return"string"==typeof e&&"string"==typeof t}var m={INSDEL:0,LINEDIFF:1};return{createDiffHtml:function(e,t,n){if(f(e,t)){return p((new c.diff_match_patch).diff_main(e,t),m.INSDEL,n)}return""},createProcessingDiffHtml:function(e,t,n){if(f(e,t)){var i=new c.diff_match_patch,a=i.diff_main(e,t);return i.diff_cleanupEfficiency(a),p(a,m.INSDEL,n)}return""},createSemanticDiffHtml:function(e,t,n){if(f(e,t)){var i=new c.diff_match_patch,a=i.diff_main(e,t);return i.diff_cleanupSemantic(a),p(a,m.INSDEL,n)}return""},createLineDiffHtml:function(e,t,n){if(f(e,t)){var i=new c.diff_match_patch,a=i.diff_linesToChars_(e,t),o=i.diff_main(a.chars1,a.chars2,!1);return i.diff_charsToLines_(o,a.lineArray),p(o,m.LINEDIFF,n)}return""}}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),s=i(o),l=n(370),r=i(l),c=n(477),u=a();t.default={diff:function(e,t){var n=t.value;e.innerHTML=u.createDiffHtml(n.left,n.right,n.options)},processingDiff:function(e,t){var n=t.value;e.innerHTML=u.createProcessingDiffHtml(n.left,n.right,n.options)},semanticDiff:function(e,t){var n=t.value;e.innerHTML=u.createSemanticDiffHtml(n.left,n.right,n.options)},lineDiff:function(e,t){console.log(t);var n=t.value;e.innerHTML=u.createLineDiffHtml(n.left,n.right,n.options)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={removeByValue:function(e,t){e.forEach(function(n,i){n===t&&e.splice(i,1)})},isContainValue:function(e,t){var n=!1;return e.length>0&&(n=e.some(function(e){return e===t})),n},strToArray:function(e){if(e.indexOf(",")>0){return e.split(",")}return[e]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={pluginTypes:[{label:"PALLAS",value:0}],versionVdpTypes:[]}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(11),o=i(a),s=n(272),l=i(s),r=n(81),c=i(r);l.default.defaults.baseURL="/pallas";var u=!1;t.default={get:function(e,t){return this.request(e,t,"GET")},post:function(e,t){return this.request(e,t,"POST")},put:function(e,t){return this.request(e,t,"PUT")},delete:function(e,t){return this.request(e,t,"DELETE")},buildErrorHandler:function(e,t){u||(c.default.errorMessage(e),u=!1),t&&t()},request:function(e,t,n){return new o.default(function(i,a){var o={url:e,method:n,cache:!1};switch(n){case"GET":case"DELETE":o.params=t;break;default:o.data=t}l.default.request(o).then(function(e){200===e.status&&(""!==e.data?200===e.data.status?(u=!1,i(e.data.data)):401===e.data.status?top.location.href=e.data.message:(c.default.errorMessage(e.data.message||"请求失败！"),u=!0,a()):(u=!1,i(e.data.data)))}).catch(function(e){var t=e.response.data?e.response.data.message||"请求失败":"请求失败";c.default.errorMessage(t),u=!0,a()})})}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(45),o=i(a),s=n(367),l=i(s),r=function(e){return!!/^(\d+)\.(\d+)\.(\d+)\.(\d+)$/.test(e)&&RegExp.$1<=255&&RegExp.$1>=0&&RegExp.$2<=255&&RegExp.$2>=0&&RegExp.$3<=255&&RegExp.$3>=0&&RegExp.$4<=255&&RegExp.$4>=0},c=function(e){return!!(/^(\d)+$/g.test(e)&&(0,l.default)(e,10)<=65535&&(0,l.default)(e,10)>=0)},u=function(e,t){var n=!0,i=/[^a-zA-Z0-9-_.]/g;if(t){t.some(function(t){return!!(i.test(e)||e.indexOf(t)>=0)})&&(n=!1)}else i.test(e)&&(n=!1);return n},d=function(e){var t=0;if(e)if(e.indexOf(":")<=0)t=1;else{var n=e.split(":");r(n[0])||(t=2),c(n[1])||(t=3)}return t},p=function(e){return(0,o.default)(e).some(function(e){return e.charCodeAt(0)>=65&&e.charCodeAt(0)<=90})};t.default={validateIp:function(e,t,n){""===t?n(new Error("请输入ip地址")):(r(t)||n(new Error("请输入正确的ip")),n())},validatePort:function(e,t,n){""===t?n(new Error("请输入端口号")):(c(t)||n(new Error("请输入正确的端口号")),n())},validateIpPort:function(e,t,n){if(t){if(t.indexOf(":")<=0)n(new Error("请输入正确的ip端口号，以:连接"));else{var i=t.split(":");r(i[0])||n(new Error("请输入正确的ip")),c(i[1])||n(new Error("请输入正确的端口号"))}n()}else n(new Error("请输入ip及端口号"))},validateMultipleIpPort:function(e,t,n){if(t){if(t.indexOf(",")<=0)0!==d(t)&&n(new Error("请输入正确的ip端口号，以:连接")),n();else{t.split(",").some(function(e){return 0!==d(e)})&&n(new Error("请输入正确的ip端口号，以:连接"))}n()}else n(new Error("请输入ip及端口号"))},validateCharacterAndNumber:function(e,t,n){""===t?n(new Error("该内容不能为空")):(u(t)||n(new Error("不允许中文和特殊字符")),n())},validateCharacterAndNumberIsExcludePointAndBar:function(e,t,n){if(""===t)n(new Error("该内容不能为空"));else{u(t,[".","-"])||n(new Error("不允许输入中文和特殊字符")),p(t)&&n(new Error("不允许输入英文大写")),n()}},validateArray:function(e,t,n){Array.isArray(t)&&(0===t.length&&n(new Error("内容为空，请选择")),n())},validateSelect:function(e,t,n){t||n(new Error("内容为空，请选择")),n()},validateTimeExpire:function(e,t,n){t?(Date.parse(new Date)>Date.parse(t)&&n(new Error("日期时间已过期，请重新选择")),n()):n(new Error("请选择日期时间"))},validateTime:function(e,t,n){t?n():n(new Error("请选择日期时间"))}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(11),o=i(a),s=n(239),l=i(s),r=n(80);t.default={data:function(){return{loading:!1,initialized:!1,interval:0}},methods:{loginSuccess:function(){this.init()},heartbeat:function(){var e=this;this.interval=setInterval(function(){e.$http.get("/heartbeat.json").then(function(){})},6e5)},getLoginUser:function(){var e=this;return this.$http.get("/system/user.json").then(function(t){e.$store.dispatch(r.SET_LOGIN_USER,t)})},init:function(){var e=this;this.loading=!0,o.default.all([this.getLoginUser()]).then(function(){e.heartbeat()}).finally(function(){e.initialized=!0,e.loading=!1})}},computed:{initComponent:function(){return"/login"===this.$route.path?"Login":"Container"}},created:function(){"/login"!==this.$route.path&&this.init()},destroyed:function(){clearInterval(this.interval)},components:{Login:l.default}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{loading:!1,loginInfo:{username:"",password:""},loginErrorMsg:""}},methods:{login:function(){var e=this,t=new URLSearchParams;t.append("username",this.loginInfo.username),t.append("password",this.loginInfo.password),this.loading=!0,this.$http.post("/authorization/login",t).then(function(){e.$router.push({path:"/"}),e.$emit("login-success")}).finally(function(){e.loading=!1})}},created:function(){}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(374),o=i(a);n(376),n(375),t.default={props:["editorId","content"],data:function(){return{editor:Object,beforeContent:""}},watch:{content:function(e){this.beforeContent!==e&&this.editor.setValue(e,1)}},mounted:function(){var e=this;this.editor=o.default.edit(this.editorId),this.editor.setValue(this.content,1),this.editor.getSession().setMode("ace/mode/json"),this.editor.setTheme("ace/theme/monokai"),this.editor.on("change",function(){e.beforeContent=e.editor.getValue(),e.$emit("change-content",e.editor.getValue())})},destroyed:function(){this.editor.destroy(),this.editor.container.remove()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:["title","content"],data:function(){return{isVisible:!0}},methods:{closeDialog:function(){this.$emit("close-dialog")}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:["isOverwrite","jsonDiffInfo"],data:function(){return{isVisible:!0}},methods:{handleClose:function(){this.$emit("close-dialog")},handleOverwrite:function(){this.$emit("overwrite-operate")}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{serviceList:[{index:"/index",title:"索引管理",icon:"fa fa-search",path:this.$routermapper.GetPath("indexManage")},{index:"/cluster",title:"ES集群管理",icon:"fa fa-sitemap",path:this.$routermapper.GetPath("clusterManage")},{index:"/authority",title:"模板变更",icon:"fa fa-check-square-o",path:this.$routermapper.GetPath("authorityManage")},{index:"/agent",title:"代理管理",icon:"fa fa-arrows",path:this.$routermapper.GetPath("agentManage")},{index:"/token",title:"Token管理",icon:"fa fa-key",path:this.$routermapper.GetPath("tokenManage")},{index:"/plugin",title:"插件管理",icon:"fa fa-puzzle-piece",path:this.$routermapper.GetPath("pluginManage")},{index:"/permission",title:"权限管理",icon:"fa fa-user-plus",path:this.$routermapper.GetPath("permissionManage")}]}},computed:{activeIndex:function(){return this.$route.path.split("_")[0]},loginUser:function(){return this.$store.state.loginUser}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(86),o=i(a);t.default={props:["type"],data:function(){return{}},methods:{},computed:{panelType:function(){return(0,o.default)({},"panel-"+this.type+"-info",!0)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:["activeIndex"],data:function(){return{versionNum:""}},methods:{getVersionNumber:function(){var e=this;this.$http.get("/system/getVersion.json").then(function(t){e.versionNum=t})}},created:function(){this.getVersionNumber()},computed:{versionNumber:function(){return"Pallas-Console-"+this.versionNum+" ©2017"}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(83),o=i(a),s=n(11),l=i(s),r=n(4),c=i(r);t.default={data:function(){return{loading:!1,isPrivilege:!1,isAgentInfoVisible:!1,multipleSelection:[],viewInfoTitle:"节点信息",viewInfo:"",selectedCluster:this.$route.query.cluster||"",clusters:[],agentList:[],currentPage:Number(this.$route.query.currentPage)||1,pageSize:10,total:0,interval:0}},methods:{heartbeat:function(){var e=this;this.interval=setInterval(function(){e.getAgents()},5e3)},batchUpdateRoute:function(){var e=this;if(this.multipleSelection.length<=0)this.$message.errorMessage("请选择要批量更新的路由！！！");else{var t=[],n=[];this.multipleSelection.forEach(function(e){t.push(e.id),n.push(e.ipport)});var i=t.join(","),a=n.join(" ; ");this.$message.confirmMessage("确认更新路由 "+a+" 吗?",function(){e.loading=!0,e.$http.post("/ss/remote_update.json",{ssIds:i}).then(function(){e.$message.successMessage("批量更新路由成功",function(){e.refreshPage()})}).finally(function(){e.loading=!1})})}},handleSelectionChange:function(e){this.multipleSelection=e},setSelectable:function(e){return!!e.healthy},handleDelete:function(e){var t=this;this.$message.confirmMessage("确认删除路由"+e.ipport+"吗?",function(){t.loading=!0,t.$http.post("/ss/delete.json",{id:e.id}).then(function(){t.$message.successMessage("删除路由成功",function(){t.refreshPage()})}).finally(function(){t.loading=!1})})},handleDeleteExpired:function(){var e=this;this.$message.confirmMessage("确认删除3天前的无效代理节点吗?",function(){e.loading=!0,e.$http.post("/ss/delete.json",{days:3}).then(function(){e.$message.successMessage("删除路由成功",function(){e.refreshPage()})}).finally(function(){e.loading=!1})})},handleRemoveTraffic:function(e){var t=this,n=this.agentList.filter(function(t){return t.healthy&&t.takeTraffic&&t.cluster===e.cluster});if(1===n.length&&n[0].id===e.id)return void this.$message.errorMessage("不能停用同一个集群下的唯一在线并且启用的路由服务！");this.$message.confirmMessage("确认要停用"+e.ipport+"路由服务吗?",function(){t.loading=!0,t.$http.post("/ss/traffic.json",{id:e.id,takeTraffic:!1}).then(function(){t.$message.successMessage("停用成功",function(){t.refreshPage()})}).finally(function(){t.loading=!1})})},handleRecoverTraffic:function(e){var t=this;this.$message.confirmMessage("确认要重新启用"+e.ipport+"路由服务吗?",function(){t.loading=!0,t.$http.post("/ss/traffic.json",{id:e.id,takeTraffic:!0}).then(function(){t.$message.successMessage("启用成功",function(){t.refreshPage()})}).finally(function(){t.loading=!1})})},changePage:function(e){this.currentPage=e,this.toPage()},updateRoute:function(e){var t=this;this.$message.confirmMessage("确认更新路由"+e.ipport+"吗?",function(){t.loading=!0,t.$http.post("/ss/remote_update.json",{ssIds:e.id}).then(function(){t.$message.successMessage("更新路由成功",function(){t.refreshPage()})}).finally(function(){t.loading=!1})})},getInfo:function(e){this.viewInfo=(0,c.default)(JSON.parse(e.info),void 0,2),this.isAgentInfoVisible=!0},closeDialog:function(){this.isAgentInfoVisible=!1},refreshPage:function(){this.init()},toPage:function(){this.$router.push({path:this.$routermapper.GetPath("agentManage"),query:{currentPage:this.currentPage,cluster:this.selectedCluster}})},getClusters:function(){var e=this;return this.$http.post("/ss/clusters.json").then(function(t){e.clusters=t})},getAgents:function(){var e=this,t={currentPage:this.$route.query.currentPage||1,pageSize:this.pageSize,selectedCluster:this.selectedCluster};return this.$http.get("/ss/find.json",t).then(function(t){e.agentList=t.list,e.total=t.total,e.isPrivilege=!0,e.agentList.forEach(function(t){if(null!==t)try{JSON.parse(t.info)}catch(n){e.$set(t,"info","{}")}})})},init:function(){var e=this;this.loading=!0,l.default.all([this.getAgents(),this.getClusters()]).then(function(){e.heartbeat()}).finally(function(){e.loading=!1})}},created:function(){this.init()},watch:{$route:"getAgents"},filters:{currentQps:function(e){var t=JSON.parse(e.info)?JSON.parse(e.info).gaugesStatistics:void 0,n=/(?=((?!\b)\d{3})+$)/g,i="-1",a=0;return void 0!==t&&e.healthy?((0,o.default)(t.qps).forEach(function(e){e[0]>i&&(i=e[0],a=e[1])}),a.toString().replace(n,",")):"N/A"},currentConns:function(e){var t=JSON.parse(e.info)?JSON.parse(e.info).gaugesStatistics:void 0,n=/(?=((?!\b)\d{3})+$)/g,i="-1",a=0;return void 0!==t&&e.healthy?((0,o.default)(t.conns).forEach(function(e){e[0]>i&&(i=e[0],a=e[1])}),a.toString().replace(n,",")):"N/A"},currentReceiveClientThrougph:function(e){var t=JSON.parse(e.info)?JSON.parse(e.info).gaugesStatistics:void 0,n="-1",i=0;return void 0!==t&&e.healthy?((0,o.default)(t.reqThroughput).forEach(function(e){e[0]>n&&(n=e[0],i=e[1])}),i/=1e3,i.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,").concat(" KB")):"N/A"},currentReceiveEsThrougph:function(e){var t=JSON.parse(e.info)?JSON.parse(e.info).gaugesStatistics:void 0,n="-1",i=0;return void 0!==t&&e.healthy?((0,o.default)(t.respThroughput).forEach(function(e){e[0]>n&&(n=e[0],i=e[1])}),i/=1e3,i.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,").concat(" KB")):"N/A"},translateState:function(e){return{true:"在线",false:"离线"}[e]}},destroyed:function(){clearInterval(this.interval)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:["approveStates","approveInfo"],data:function(){return{loading:!1,isVisible:!0,rules:{state:[{required:!0,message:"请选择",trigger:"blur"}],note:[{required:!0,message:"请输入审批描述",trigger:"blur"}]}}},methods:{submitSyncInfo:function(){var e=this;this.$refs.approveInfo.validate(function(t){t&&(e.loading=!0,e.$http.post("/approve/approve.json",e.approveInfo).then(function(){e.$message.successMessage("审批完成",function(){e.$emit("approve-complete")})}).finally(function(){e.loading=!1}))})},closeDialog:function(){this.$emit("close-approve-dialog")}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(11),o=i(a);t.default={data:function(){return{loading:!1,isViewDialogVisible:!1,isAllPrivilege:!1,jsonDiffInfo:{},total:0,pageSize:10,currentPage:Number(this.$route.query.currentPage)||1,applyList:[],clusters:[],selectedCluster:this.$route.query.cluster||"",states:[{value:"0",label:"待审核"},{value:"1",label:"已上线"},{value:"2",label:"审核不通过"},{value:"3",label:"未提交"}],selectedState:this.$route.query.state||"",conditionForSearch:this.$route.query.condition||""}},methods:{handleApproveManage:function(){this.$router.push({path:this.$routermapper.GetPath("authorityManageAdministrator")})},handleView:function(e){var t=this;this.loading=!0,this.$http.get("/index_template/id.json?templateId="+e.relateId).then(function(e){t.jsonDiffInfo.left=e.lastContent,t.jsonDiffInfo.right=e.content,t.isViewDialogVisible=!0}).finally(function(){t.loading=!1})},closeViewContentDialog:function(){this.isViewDialogVisible=!1},changePage:function(e){this.currentPage=e,this.toPage()},refreshPage:function(){this.init()},toPage:function(){this.$router.push({path:this.$routermapper.GetPath("authorityManage"),query:{currentPage:this.currentPage,cluster:this.selectedCluster,state:this.selectedState,condition:this.conditionForSearch}})},handleCancel:function(e){var t=this;this.$message.confirmMessage("确定取消审批模板"+e.templateName+"吗?",function(){t.loading=!0,t.$http.post("/approve/apply/cancel.json",{id:e.id}).then(function(){t.$message.successMessage("取消审批成功",function(){t.refreshPage()})}).finally(function(){t.loading=!1})})},getApplyList:function(){var e=this,t={currentPage:Number(this.$route.query.currentPage)||1,pageSize:this.pageSize,state:this.$route.query.state||"",conditions:this.$route.query.condition||"",clusterId:this.$route.query.cluster||""};return this.$http.get("/approve/apply/page.json",t).then(function(t){e.total=t.total,e.isAllPrivilege=t.allPrivilege,e.applyList=t.list})},getClusters:function(){var e=this;return this.$http.get("/cluster/all.json").then(function(t){var n=[],i=[];t.forEach(function(e){e.logicalCluster?n.push(e):i.push(e)}),e.clusters.push({label:"物理集群",options:i}),e.clusters.push({label:"逻辑集群",options:n})})},init:function(){var e=this;this.loading=!0,o.default.all([this.getApplyList(),this.getClusters()]).then().finally(function(){e.loading=!1})}},created:function(){this.init()},watch:{$route:"init"},filters:{translateStat:function(e){return{0:"待审核",1:"已上线",2:"审核不通过",3:"未提交"}[e]}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(11),o=i(a),s=n(4),l=i(s),r=n(512),c=i(r);t.default={data:function(){return{loading:!1,isViewDialogVisible:!1,jsonDiffInfo:{},isApproveDialogVisible:!1,approveStates:[{key:"通过",value:"1"},{key:"不通过",value:"2"}],approveInfo:{},total:0,pageSize:10,currentPage:Number(this.$route.query.currentPage)||1,approveList:[],states:[{value:"0",label:"待审核"},{value:"1",label:"已上线"},{value:"2",label:"审核不通过"},{value:"3",label:"未提交"}],selectedState:this.$route.query.state||"",conditionForSearch:this.$route.query.condition||"",multipleSelection:[]}},methods:{handleBatchApprove:function(){if(this.multipleSelection.length<=0)this.$message.errorMessage("请选择要审批的模板！！！");else{var e=[];this.multipleSelection.forEach(function(t){e.push(t.id)});var t=e.join(","),n={ids:t,state:this.approveStates[0].value,note:""};this.approveInfo=JSON.parse((0,l.default)(n)),this.isApproveDialogVisible=!0}},handleSelectionChange:function(e){this.multipleSelection=e},handleView:function(e){var t=this;this.loading=!0,this.$http.get("/index_template/id.json?templateId="+e.relateId).then(function(e){t.jsonDiffInfo.left=e.lastContent,t.jsonDiffInfo.right=e.content,t.isViewDialogVisible=!0}).finally(function(){t.loading=!1})},closeViewContentDialog:function(){this.isViewDialogVisible=!1},handleApprove:function(e){var t={ids:e.id,state:this.approveStates[0].value,note:""};this.approveInfo=JSON.parse((0,l.default)(t)),this.isApproveDialogVisible=!0},approveComplete:function(){this.isApproveDialogVisible=!1,this.refreshPage()},closeApproveDialog:function(){this.isApproveDialogVisible=!1},changePage:function(e){this.currentPage=e,this.toPage()},refreshPage:function(){this.init()},toPage:function(){this.$router.push({path:this.$routermapper.GetPath("authorityManageAdministrator"),query:{currentPage:this.currentPage,state:this.selectedState,condition:this.conditionForSearch}})},getApproveList:function(){var e=this,t={currentPage:Number(this.$route.query.currentPage)||1,pageSize:this.pageSize,state:this.$route.query.state||"",conditions:this.$route.query.condition||""};return this.$http.get("/approve/approve/page.json",t).then(function(t){e.total=t.total,e.approveList=t.list})},init:function(){var e=this;this.loading=!0,o.default.all([this.getApproveList()]).then().finally(function(){e.loading=!1})}},created:function(){this.init()},components:{"approve-dialog":c.default},watch:{$route:"init"},filters:{translateStat:function(e){return{0:"待审核",1:"已上线",2:"审核不通过",3:"未提交"}[e]}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:["clusterInfo"],computed:{clusterUrl:function(){var e="";return this.clusterInfo.httpAddress&&(e=this.clusterInfo.httpAddress),"/cerebro/#/overview?cluster="+this.clusterInfo.clusterId+"&host="+e}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(515),o=i(a);t.default={data:function(){return{loading:!1,clusterInfo:{},clusterId:this.$route.query.clusterId}},methods:{getClusterInfo:function(){var e=this;this.loading=!0,this.$http.get("/cluster/id.json?clusterId="+this.$route.query.clusterId).then(function(t){e.clusterInfo=t}).finally(function(){e.loading=!1})}},components:{"dashboard-component":o.default},created:function(){this.getClusterInfo()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:["clusterOperation","clusterInfo","clusterInfoTitle","allPhysicals","allPallasSearchs"],data:function(){return{loading:!1,isClusterInfoVisible:!0,rules:{clusterId:[{validator:this.$validate.validateCharacterAndNumber,trigger:"blur"}],httpAddress:[{required:!0,message:"HTTP地址不能为空",trigger:"change"}],clientAddress:[{required:!0,message:"ES client连接地址不能为空",trigger:"change"}],description:[{required:!0,message:"描述不能为空",trigger:"change"}],realClustersArr:[{validator:this.$validate.validateArray,trigger:"blur"}],accessiblePs:[{validator:this.$validate.validateArray,trigger:"blur"}]}}},methods:{submitClusterInfo:function(){var e=this;this.$refs.clusterInfo.validate(function(t){t?(e.$set(e.clusterInfo,"realClusters",e.clusterInfo.realClustersArr.join(",")),e.$set(e.clusterInfo,"accessiblePs",e.clusterInfo.accessiblePs.join(",")),"add"===e.clusterOperation?(e.loading=!0,e.$http.post("/cluster/add.json",e.clusterInfo).then(function(){e.$message.successMessage("新增集群成功",function(){e.$emit("operate-close-dialog")})}).finally(function(){e.loading=!1})):(e.loading=!0,e.$http.post("/cluster/update.json",e.clusterInfo).then(function(){e.$message.successMessage("修改集群成功",function(){e.$emit("operate-close-dialog")})}).finally(function(){e.loading=!1}))):console.log("error submit!!")})},closeDialog:function(){this.$emit("close-dialog")}},computed:{isEditable:function(){return"edit"===this.clusterOperation}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(11),o=i(a),s=n(4),l=i(s),r=n(517),c=i(r);t.default={data:function(){return{loading:!1,isAllPrivilege:!1,isClusterInfoVisible:!1,clusterInfoTitle:"",clusterOperation:"",currentPage:Number(this.$route.query.currentPage)||1,pageSize:10,clusterIdForSearch:this.$route.query.clusterId||"",clusterList:{},clusterInfo:{},clusterAddInfo:{clusterId:"",httpAddress:"",clientAddress:"",description:"",realClustersArr:[],logicalCluster:!1,accessiblePs:[]},allPhysicals:[],allPallasSearchs:[]}},methods:{handleRouteSetting:function(e){this.$router.push({path:"cluster_route_manage",query:{clusterId:e.clusterId}})},getPhysicalsClusterArr:function(e){var t=this,n=e.split(","),i=[];return n.forEach(function(e){t.allPhysicals.forEach(function(t){e===t.id&&i.push(t)})}),i},handleAdd:function(){this.isClusterInfoVisible=!0,this.clusterInfoTitle="新增集群",this.clusterOperation="add",this.clusterInfo=JSON.parse((0,l.default)(this.clusterAddInfo))},handleEdit:function(e){var t=this;this.loading=!0,this.$http.get("/cluster/id.json?clusterId="+e.clusterId).then(function(e){var n=e,i=n.realClusters.split(",");t.$set(n,"realClustersArr",i);var a=n.accessiblePs.split(",");t.$set(n,"accessiblePs",a),t.clusterInfo=JSON.parse((0,l.default)(n)),t.clusterInfoTitle="编辑集群",t.clusterOperation="edit",t.isClusterInfoVisible=!0}).finally(function(){t.loading=!1})},handleManage:function(e,t){this.$router.push({path:"cluster_detail",query:{clusterId:t.clusterId}})},handleRestart:function(e){this.$router.push({path:"cluster_node_restart",query:{clusterId:e.clusterId}})},handleDelete:function(e){var t=this;this.$message.confirmMessage("确定删除集群"+e.clusterId+"吗?",function(){t.loading=!0,t.$http.post("/cluster/delete/id.json",{clusterId:e.clusterId}).then(function(){t.$message.successMessage("删除成功",function(){t.refreshPage()})}).finally(function(){t.loading=!1})})},changePage:function(e){this.currentPage=e,this.toPage()},refreshPage:function(){this.init()},toPage:function(){this.$router.push({path:this.$routermapper.GetPath("clusterManage"),query:{currentPage:this.currentPage,clusterId:this.clusterIdForSearch}})},closeDialog:function(){this.isClusterInfoVisible=!1},operateCloseDialog:function(){this.isClusterInfoVisible=!1,this.refreshPage()},getClusterList:function(){var e=this,t={clusterId:this.$route.query.clusterId||"",currentPage:Number(this.$route.query.currentPage)||1,pageSize:this.pageSize};return this.$http.get("/cluster/page.json",t).then(function(t){e.clusterList=t,e.isAllPrivilege=t.allPrivilege})},getPhysicals:function(){var e=this;return this.$http.get("/cluster/all/physicals.json").then(function(t){e.allPhysicals=t.list.map(function(e){var t={};return t.id=e.id.toString(),t.clusterId=e.clusterId,t})})},getAllPallasSearchs:function(){var e=this;return this.$http.get("/ss/clusters.json").then(function(t){e.allPallasSearchs=t})},init:function(){var e=this;this.loading=!0,o.default.all([this.getClusterList(),this.getPhysicals()]).then().finally(function(){e.loading=!1}),o.default.all([this.getClusterList(),this.getAllPallasSearchs()]).then().finally(function(){e.loading=!1})}},components:{"cluster-info-dialog":c.default},watch:{$route:"init"},created:function(){this.init()},filters:{clusterType:function(e){return{true:"逻辑集群",false:"物理集群"}[e]}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(83),o=i(a),s=n(0),l=i(s);t.default={data:function(){return{loading:!1,clusterId:this.$route.query.clusterId,nodeRestartList:[],onlyMasterMap:{true:"是",false:"否"},noteStateMap:{1:"即将重启",2:"正在重启",3:"已启动",4:"正常"},noteStateTag:{1:"info",2:"warning",3:"success",4:"success",5:"danger",6:"warning"},clusterStateTag:{green:"success",red:"danger",yellow:"warning"},clusterHealth:"",clusterSettings:[],isEnableRestart:"",interval:0}},methods:{resetClusterSettings:function(){var e=this;this.$message.confirmMessage("确定恢复集群默认设置吗?",function(){e.loading=!0,e.$http.get("/cluster/settings/default/reset.json?clusterName="+e.clusterId).then(function(){e.$message.successMessage("恢复集群默认设置操作成功",function(){e.getCluterSetting()})}).finally(function(){e.loading=!1})})},handleRestart:function(e){var t=this,n={clusterName:this.clusterId,nodeIp:e.nodeIp};this.$message.confirmMessage("确定要重启节点"+e.nodeName+"吗? 注意，提交重启后，请密切关注集群及节点状态！",function(){t.loading=!0,t.$http.post("/cluster/node/restart.json",n).then(function(){t.$message.successMessage("提交重启请求成功",function(){t.init()})}).finally(function(){t.loading=!1})})},getClusterState:function(){var e=this;this.$http.get("/cluster/state.json?clusterName="+this.clusterId).then(function(t){e.clusterHealth=t.status,e.isEnableRestart=t.cause,e.clusterSettings=t.settings,e.nodeRestartList=t.nodes;var n=(0,l.default)().format("x");e.nodeRestartList.forEach(function(t){(n-t.lastStartupTime)/1e3/60/60<1?e.$set(t,"isNew",!0):e.$set(t,"isNew",!1)})})},init:function(){this.getClusterState()},refreshClusterRestart:function(){var e=this;this.interval=setInterval(function(){e.getClusterState()},3e3)}},destroyed:function(){clearInterval(this.interval)},computed:{clusterSettingsArray:function(){var e=[];return(0,o.default)(this.clusterSettings).forEach(function(t){var n={key:t[0],value:t[1]};e.push(n)}),e}},created:function(){this.init(),this.refreshClusterRestart()}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(522),o=i(a);t.default={props:["conditions","conditionInfo","conditionInfoTitle","conditionOperation","routingTargetGroups"],data:function(){return{isVisible:!0,rules:{name:[{required:!0,message:"规则名称不能为空",trigger:"blur"}],sourceType:[{required:!0,message:"数据源类型不能为空",trigger:"blur"}],sourceParameter:[{required:!0,message:"条件判断参数名不能为空",trigger:"blur"}],condExpr:[{required:!0,message:"条件判断运算不能为空",trigger:"blur"}],sourceValue:[{required:!0,message:"条件判断值不能为空",trigger:"blur"}],conditionRelation:[{required:!0,message:"请选择规则关系",trigger:"change"}]},conditionRelations:["OR","AND"],defaultProps:{key:"id",label:"name"}}},methods:{handleChange:function(e,t,n){"right"===t?this.changeDirection(n,"right"):this.changeDirection(n,"left")},changeDirection:function(e,t){var n=this;e.forEach(function(e){n.routingTargetGroups.forEach(function(i){e===i.id&&n.$set(i,"position",t)})})},renderFunc:function(e,t){var n=this;return"left"===t.position?e("div",[e("span",{style:{float:"left"}},t.name)]):e("div",[e("span",{style:{float:"left"}},t.name),e("input",{domProps:{value:t.weight||"0"},class:{"el-input__inner":!0},style:{float:"right",width:"50px",height:"20px",margin:"6px"},on:{input:function(e){n.$set(t,"weight",e.target.value),n.$emit("input",e.target.value)}}})])},submitInfo:function(){var e=this;this.$refs.conditionInfo.validate(function(t){if(t){var n=0;if(0!==e.conditionInfo.conditions.length&&e.$refs.conditions.$refs.conditionItem.forEach(function(e){e.$refs.conditionItemForm.validate(function(e){e&&(n+=1)})}),n===e.conditionInfo.conditions.length){e.conditionInfo.targetGroups=e.getTargetGroupsList();var i=e.setConditionInfo();e.targetGroupWeightValidate(i.targetGroups)&&("add"===e.conditionOperation?e.$emit("add-condition",i):e.$emit("edit-condition",i))}}})},targetGroupWeightValidate:function(e){var t=!1;if(0!==e.length){var n=/^([0-9]\d{0,1}|100)$/;e.some(function(e){return!n.test(e.weight)})?(t=!1,this.$message.errorMessage("请正确输入节点集权重, 0-100整数!")):t=!0}else t=!1,this.$message.errorMessage("请选择节点集!");return t},setConditionInfo:function(){var e={};return e.name=this.conditionInfo.name,e.targetGroups=this.conditionInfo.targetGroups,e.enable=this.conditionInfo.enable,e.conditionRelation=this.conditionInfo.conditionRelation,e.priority=this.conditionInfo.priority,e.conditions=this.conditionInfo.conditions,e},getTargetGroupsList:function(){return this.$refs.targetGroupTransfer.targetData.map(function(e){var t={};return t.id=e.id,t.weight=e.weight,t})},closeDialog:function(){this.$emit("close-dialog")}},computed:{isEditable:function(){return"edit"===this.conditionOperation},alternativeConditions:function(){return"edit"===this.conditionOperation?(this.$array.removeByValue(this.conditions,this.conditionInfo.name),this.conditions):this.conditions}},components:{Conditions:o.default}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:["conditionItem"],data:function(){return{rules:{exprOp:[{required:!0,message:"请选择判断运算",trigger:"change"}],paramName:[{required:!0,message:"请输入判断参数名",trigger:"change"}],paramValue:[{required:!0,message:"请输入判断值",trigger:"blur"}]},exprOps:["=","ip_mask"],paramNames:["X-PALLAS-SEARCH-CLIENT-IP","X-PALLAS-SEARCH-TEMPLATE-ID"]}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),o=i(a),s=n(521),l=i(s);t.default={props:["conditions"],data:function(){return{conditionRelateInfo:{paramType:"header",exprOp:"",paramName:"",paramValue:""}}},methods:{addConditionRelate:function(){var e=JSON.parse((0,o.default)(this.conditionRelateInfo));this.conditions.push(e)},deleteConditionRelate:function(e){this.$array.removeByValue(this.conditions,e)}},components:{"condition-item":l.default}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(84),o=i(a),s=n(4),l=i(s),r=n(524),c=i(r),u=n(520),d=i(u);t.default={data:function(){return{loading:!1,privilege:!1,clusterId:this.$route.query.clusterId,isConditionInfoVisible:!1,conditionInfo:{},conditionInfoTitle:"",conditionOperation:"",selectedCluster:"",indexNameForSearch:"",conditions:[],rulesList:[],routingTargetGroupsList:{},initTargetGroups:[],routingTargetGroups:[]}},methods:{sortTargetGroups:function(e){e.sort(function(e,t){return e.weight<t.weight?1:e.weight>t.weight?-1:0})},handleAdd:function(){this.isConditionInfoVisible=!0,this.conditionInfoTitle="创建规则",this.conditionOperation="add",this.routingTargetGroups=JSON.parse((0,l.default)(this.initTargetGroups));var e={name:"",targetGroups:[],targetGroupsId:[],enable:!1,conditions:[],conditionRelation:"AND",priority:""};this.conditionInfo=JSON.parse((0,l.default)(e))},addCondition:function(e){var t=JSON.parse((0,l.default)(this.rulesList));""===e.priority?t.push(e):t.some(function(n,i){return n.name===e.priority&&(t.splice(i,0,e),!0)}),this.updateConditionRequest(t)},closeConditionDialog:function(){this.isConditionInfoVisible=!1},handleEdit:function(e){var t=this;this.isConditionInfoVisible=!0,this.conditionInfoTitle="编辑规则",this.conditionOperation="edit",this.routingTargetGroups=JSON.parse((0,l.default)(this.initTargetGroups));var n=[];e.targetGroups.forEach(function(e){n.push(e.id),t.routingTargetGroups.forEach(function(n){e.id===n.id&&(t.$set(n,"weight",e.weight),t.$set(n,"position","right"))})});var i={name:e.name,targetGroups:e.targetGroups,targetGroupsId:n,enable:e.enable,conditionRelation:e.conditionRelation,priority:"",conditions:e.conditions};this.conditionInfo=JSON.parse((0,l.default)(i))},editCondition:function(e){var t=JSON.parse((0,l.default)(this.rulesList)),n=void 0;t.some(function(t,i){return t.name===e.name&&(n=i,!0)}),""===e.priority?t.splice(n,1,e):(t.splice(n,1),t.some(function(n,i){return n.name===e.priority&&(t.splice(i,0,e),!0)})),this.updateConditionRequest(t)},updateConditionRequest:function(e){var t=this,n={clusterId:this.clusterId,rules:e};this.loading=!0,this.$http.post("/cluster/routing/rule/update.json",n).then(function(){t.$message.successMessage("操作成功",function(){t.isConditionInfoVisible=!1,t.getRoutingList()})}).finally(function(){t.loading=!1})},handleDelete:function(e,t){var n=this;this.$message.confirmMessage("确定删除规则"+e.name+"吗?",function(){var e=JSON.parse((0,l.default)(n.rulesList));e.splice(t,1),n.updateConditionRequest(e)})},getRoutingList:function(){var e=this,t={clusterId:this.clusterId};this.loading=!0,this.$http.get("/cluster/routing/rule/list.json",t).then(function(t){e.rulesList=t.data.rules,e.rulesList.forEach(function(t){e.sortTargetGroups(t.targetGroups)});var n=[];t.data.rules.forEach(function(e){n.push(e.name)}),e.conditions=n,e.routingTargetGroupsList=t.data.routingTargetGroups,e.initTargetGroups=(0,o.default)(t.data.routingTargetGroups).map(function(e){var t={};return t.id=e.id,t.name=e.name,t.weight=1,t.position="left",t}),e.privilege=t.privilege}).finally(function(){e.loading=!1})}},created:function(){this.getRoutingList()},filters:{translateEnable:function(e){return{true:"是",false:"否"}[e]}},components:{"target-group":c.default,"condition-info-dialog":d.default}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),o=i(a),s=n(526),l=i(s),r=n(525),c=i(r);t.default={props:["privilege","rulesList","clusterId","routingTargetGroupsList"],data:function(){return{loading:!1,istargetGroupInfoVisible:!1,targetGroupInfo:{},targetGroupInfoTitle:"",targetGroupTree:[],targetGroupTreeNoChildren:[],selectedShowTreeInfo:"name"}},methods:{changeShowTreeInfo:function(e){this.selectedShowTreeInfo=e},handleAdd:function(){this.istargetGroupInfoVisible=!0,this.targetGroupInfoTitle="创建节点集";var e={clusterId:this.clusterId,name:"",clusterLevel:0,nodes:[],clusters:[]};this.targetGroupInfo=JSON.parse((0,o.default)(e))},saveOperation:function(e){var t=this;this.$set(e,"clusterId",this.clusterId),this.loading=!0,this.$http.post("/cluster/routing/target_group/update.json",e).then(function(){t.$emit("get-routing-list")}).finally(function(){t.loading=!1})},deleteOperation:function(e){var t=this,n=!1;this.rulesList.forEach(function(t){t.targetGroups.some(function(t){return t.id===e&&(n=!0),n})}),n?this.$message.errorMessage("此节点集正在使用中，不能删除！"):(this.loading=!0,this.$http.post("/index/routing/target_group/delete.json",{groupId:e}).then(function(){t.$emit("get-routing-list")}).finally(function(){t.loading=!1}))},operationSuccess:function(){this.istargetGroupInfoVisible=!1,this.$emit("get-routing-list")},closeTargetGroupDialog:function(){this.istargetGroupInfoVisible=!1},getTargetGroupTree:function(){var e=this,t={clusterId:this.clusterId};this.loading=!0,this.$http.get("/cluster/routing/target_group/list.json",t).then(function(t){e.targetGroupTree=t.tree.map(function(t){var n={};return n.cluster=t.cluster,n.address=t.address,n.name=t.name,n.disabled=!0,t.children.length>0&&(n.children=e.setTargetGroupChildrenDisabled(t.children)),n}),e.targetGroupTreeNoChildren=t.tree.map(function(e){var t={};return t.cluster=e.cluster,t.address=e.address,t.name=e.name,t.disabled=!0,t})}).finally(function(){e.loading=!1})},setTargetGroupChildrenDisabled:function(e){return e.map(function(e){var t={};return t.cluster=e.cluster,t.address=e.address,t.name=e.name,t.state=e.state,t.weight=e.weight,t.disabled=!0,t})}},components:{"target-group-info-dialog":c.default,"target-group-item":l.default},created:function(){this.getTargetGroupTree()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:["rulesList","targetGroupInfo","targetGroupInfoTitle"],data:function(){return{loading:!1,isVisible:!0,rules:{name:[{required:!0,message:"节点集名称不能为空",trigger:"blur"}]}}},methods:{submitInfo:function(){var e=this;this.$refs.targetGroupInfo.validate(function(t){t&&e.targetGroupRequest(e.targetGroupInfo)})},targetGroupRequest:function(e){var t=this;this.loading=!0,this.$http.post("/cluster/routing/target_group/update.json",e).then(function(){t.$message.successMessage("操作成功",function(){t.$emit("operation-success")})}).finally(function(){t.loading=!1})},closeDialog:function(){this.$emit("close-dialog")}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),o=i(a);t.default={props:["privilege","targetGroupItemInfo","targetGroupTree","targetGroupTreeNoChildren","selectedShowTreeInfo"],data:function(){return{name:this.targetGroupItemInfo.name,isDefaultExpand:!0,defaultProps:{children:"children",label:"name",disabled:"disabled"},attrs:[{label:"普通级别",value:0},{label:"集群级别",value:1},{label:"分片动态绑定",value:2}],editable:!1}},methods:{checkChange:function(e,t){if(0!==this.targetGroupItemInfo.clusterLevel&&t){var n=[];n.push(e.name),this.$refs.mytree.setCheckedKeys(n)}},handleSave:function(){this.targetGroupItemInfo.name=this.name;var e=JSON.parse((0,o.default)(this.targetGroupItemInfo));if(0===this.targetGroupItemInfo.clusterLevel){if(this.getTargetGroupNodes(e.nodes),e.nodes.length>0){var t=e.nodes.some(function(t){return t.cluster!==e.nodes[0].cluster});t?this.$message.errorMessage("只能选择某个集群下的节点，请重新选择！"):this.saveInfo(e)}}else this.getTargetGroupNodes(e.clusters),this.saveInfo(e)},saveInfo:function(e){var t=this;this.$message.confirmMessage("确定保存节点集"+this.name+"吗?",function(){t.editable=!1,t.$emit("save-operation",e)})},handleEdit:function(){this.editable=!0,this.setTreeStatus(this.targetGroupTreeNoChildren,!1),this.setTreeStatus(this.targetGroupTree,!1)},handleCancel:function(){this.name=this.targetGroupItemInfo.name,0===this.targetGroupItemInfo.clusterLevel?this.$refs.mytree.setCheckedKeys(this.targetGroupItemInfo.nodes):this.$refs.mytree.setCheckedKeys(this.targetGroupItemInfo.clusters),this.editable=!1,this.setTreeStatus(this.targetGroupTreeNoChildren,!0),this.setTreeStatus(this.targetGroupTree,!0)},setTreeStatus:function(e,t){var n=this;e.forEach(function(e){n.$set(e,"disabled",t),e.children&&e.children.forEach(function(e){n.$set(e,"disabled",t)})})},getTargetGroupNodes:function(e){e.splice(0,e.length),this.$refs.mytree.getCheckedNodes().forEach(function(t){t.children||e.push(t)})},handleDelete:function(){var e=this;this.$message.confirmMessage("确定删除节点集"+this.targetGroupItemInfo.name+"吗?",function(){e.$emit("delete-operation",e.targetGroupItemInfo.id)})},getNodesName:function(e){var t=[];return this.targetGroupTree.forEach(function(n){n.name===e&&n.children&&n.children.forEach(function(e){t.push(e.name)})}),t},getShardNodes:function(e){var t=this,n=[];return this.targetGroupTree.forEach(function(i){i.children&&i.children.forEach(function(i){t.targetGroupItemInfo.nodes&&t.targetGroupItemInfo.nodes.forEach(function(t){i.cluster===e&&t===i.address&&n.push(i.name)})})}),n},renderContent:function(e,t){var n=t.data;return 1===this.targetGroupItemInfo.clusterLevel?e("span",[e("el-popover",{props:{placement:"right",trigger:"hover"}},[e("div",this.getNodesName(n.name).map(function(t){return e("div",t)})),e("span",{slot:"reference",style:{"font-size":"14px","margin-right":"5px"}},"name"===this.selectedShowTreeInfo?n.name:n.address)])]):0===this.targetGroupItemInfo.clusterLevel?e("span",[e("span",{style:{"font-size":"14px","margin-right":"5px"}},"name"===this.selectedShowTreeInfo?n.name:n.address),e("span",{class:{"el-tag":1===n.state,"el-tag--danger":1===n.state}},1===n.state?"离线":"")]):e("span",[e("el-popover",{props:{placement:"right",trigger:"hover",disabled:n.cluster!==this.targetGroupItemInfo.clusters[0]}},[e("div",this.getShardNodes(n.name).map(function(t){return e("div",t)})),e("span",{slot:"reference",style:{"font-size":"14px","margin-right":"5px"}},"name"===this.selectedShowTreeInfo?n.name:n.address)])])}},computed:{myTree:function(){return 1===this.targetGroupItemInfo.clusterLevel||2===this.targetGroupItemInfo.clusterLevel?this.targetGroupTreeNoChildren:this.targetGroupTree},treeCheckedKeys:function(){return 1===this.targetGroupItemInfo.clusterLevel||2===this.targetGroupItemInfo.clusterLevel?this.targetGroupItemInfo.clusters:this.targetGroupItemInfo.nodes}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:["indexId","crondeleteInfo","crondeleteOperation","crondeleteTitle"],data:function(){return{loading:!1,isCronDeleteVisible:!0,rules:{cron:[{required:!0,message:"请参照saturn的cron格式",trigger:"blur"}],versionId:[{validator:this.$validate.validateSelect,trigger:"blur"}],scrollSize:[{required:!0,message:"scrollSize不能为空"},{type:"number",message:"scrollSize值必须为数字值"}],dsl:[{required:!0,message:"请输入delete by query的查询dsl",trigger:"blur"}]},versionIdList:[],showImportObject:{show:!1}}},methods:{initVersionIdList:function(){var e=this,t={currentPage:1,pageSize:100,indexId:this.indexId};this.loading=!0,this.$http.get("/index/version/page.json",t).then(function(t){t.list.length>0&&t.list.forEach(function(t){var n={};n=t.isUsed===!0?{label:t.id+"(当前启用版本)",value:t.id}:{label:t.id,value:t.id},e.versionIdList.push(n)})}).finally(function(){e.loading=!1})},submitUpsert:function(){var e=this;this.$refs.crondeleteInfo.validate(function(t){if(t){var n="edit"===e.crondeleteOperation?"修改成功":"新增成功";e.loading=!0,e.$http.post("/crondelete/upsert.json",e.crondeleteInfo).then(function(){e.$message.successMessage(n,function(){e.$emit("operate-close-dialog")})}).finally(function(){e.loading=!1})}})},closeDialog:function(){this.$emit("close-dialog")}},computed:{},components:{},created:function(){this.initVersionIdList()}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),o=i(a),s=n(527),l=i(s);t.default={data:function(){return{loading:!1,indexId:this.$route.query.indexId,indexName:this.$route.query.indexName,isAllPrivilege:!1,showDsl:!1,isCronDeleteVisible:!1,crondeleteOperation:"",crondeleteTitle:"",viewInfoTitle:"",viewInfo:"",cronDeleteList:[],crondeleteInfo:{},crondeleteAddInfo:{versionId:null,cron:"",dsl:"",scrollSize:1e3,id:""}}},methods:{getCronDeleteList:function(){var e=this,t={indexId:this.indexId};this.loading=!0,this.$http.get("/crondelete/find_by_index.json?indexId="+t.indexId).then(function(t){e.isAllPrivilege=t.allPrivilege,e.cronDeleteList=t.list}).finally(function(){e.loading=!1})},getDsl:function(e){this.viewInfo=(0,o.default)(JSON.parse(e.dsl),void 0,2),this.showDsl=!0,this.viewInfoTitle="delete_by_query dsl"},executeSearchDsl:function(e){var t=this,n={id:e.id};this.loading=!0,this.$http.get("/crondelete/query_dsl.json?id="+n.id).then(function(e){t.viewInfo=(0,o.default)(JSON.parse(e),void 0,2),t.showDsl=!0,t.viewInfoTitle="dsl查询结果"}).finally(function(){t.loading=!1})},closeDialog:function(){this.showDsl=!1,this.isCronDeleteVisible=!1},operateCloseDialog:function(){this.isCronDeleteVisible=!1,this.refreshPage()},refreshPage:function(){this.getCronDeleteList()},handleAdd:function(){this.isCronDeleteVisible=!0,this.crondeleteTitle="新增",this.crondeleteOperation="add",this.crondeleteInfo=JSON.parse((0,o.default)(this.crondeleteAddInfo))},handleEdit:function(e){this.isCronDeleteVisible=!0,this.crondeleteTitle="修改",this.crondeleteOperation="edit",this.crondeleteInfo=e},handleRunAtOnce:function(e){var t=this;this.$message.confirmMessage("确定立刻执行作业"+this.indexName+"_"+this.indexId+"_crondelete_"+e.id+"吗? ",function(){t.loading=!0,t.$http.post("/crondelete/run.json",{id:e.id}).then(function(){t.$message.successMessage("已通知saturn执行，请前往saturn查看作业："+t.indexName+"_"+t.indexId+"_crondelete_"+e.id+" 的执行结果",function(){t.getCronDeleteList()})}).finally(function(){t.loading=!1})})},handleDelete:function(e){var t=this;this.$message.confirmMessage("确定删除"+e.id+"吗?",function(){t.loading=!0,t.$http.post("/crondelete/delete.json",{id:e.id}).then(function(){t.$message.successMessage("删除成功",function(){t.getCronDeleteList()})}).finally(function(){t.loading=!1})})},handleDisableAndDeleteJob:function(e){var t=this;this.$message.confirmMessage("确定禁用"+e.id+"吗?",function(){t.loading=!0,t.$http.post("/crondelete/disable_and_delete_job.json",{id:e.id}).then(function(){t.$message.successMessage("禁用成功",function(){t.getCronDeleteList()})}).finally(function(){t.loading=!1})})},handleCreateAndEnableJob:function(e){var t=this;this.$message.confirmMessage("确定启用"+e.id+"吗?",function(){t.loading=!0,t.$http.post("/crondelete/create_and_enable_job.json",{id:e.id}).then(function(){t.$message.successMessage("启用成功",function(){t.getCronDeleteList()})}).finally(function(){t.loading=!1})})}},filters:{translateIsUsed:function(e){return{true:"是",false:"否"}[e]}},components:{"crondelete-dialog":l.default},created:function(){this.getCronDeleteList()}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(11),o=i(a),s=n(4),l=i(s),r=n(530),c=i(r);t.default={data:function(){return{loading:!1,indexId:this.$route.query.indexId,pageSize:10,currentPage:1,operationData:{},operationList:[],selectedType:"",filterVersion:"",timeRange:"",typeList:[{value:"索引事件"},{value:"版本事件"},{value:"同步事件"},{value:"模板事件"}],dynamicOperation:"",dynamicInfoTitle:"",isDynamicInfoVisible:!1,dynamicInfo:{},dynamicDeleteInfo:{indexId:this.$route.query.indexId,indexName:this.$route.query.indexName,filterVersion:"",selectedType:"",eventName:"",timeRange:90},versionIdList:[]}},methods:{initVersionIdList:function(){var e=this,t={currentPage:1,pageSize:100,indexId:this.indexId};this.loading=!0,this.$http.get("/index/version/page.json",t).then(function(t){t.list.length>0&&t.list.forEach(function(t){var n={};n=t.isUsed===!0?{label:t.id+"(当前启用版本)",value:t.id}:{label:t.id,value:t.id},e.versionIdList.push(n)})}).finally(function(){e.loading=!1})},getOperationList:function(){var e=this;"[null,null]"===(0,l.default)(this.timeRange)&&(this.timeRange="");var t={currentPage:this.currentPage,pageSize:this.pageSize,indexId:this.indexId,selectedType:this.selectedType,filterVersion:this.filterVersion,timeRange:this.timeRange};return this.$http.post("/index/dynamic/page.json",t).then(function(t){e.operationData=t,e.operationList=t.list.map(function(e){var t={};return t.id=e.id,t.eventType=e.eventType,t.eventName=e.eventName,t.eventDetail=e.eventDetail,t.endTime=e.endTime,t.operationTime=e.operationTime,t.operator=e.operator,t.versionId=e.versionId,e.eventDetail.length>500?(t.isFold=!0,t.isShowIcon=!0):(t.isFold=!1,t.isShowIcon=!1),t})})},handleDelete:function(){this.isDynamicInfoVisible=!0,this.dynamicOperation="delete",this.dynamicInfoTitle="删除数据(3月前)",this.dynamicInfo=JSON.parse((0,l.default)(this.dynamicDeleteInfo))},closeDialog:function(){this.isDynamicInfoVisible=!1},operateCloseDialog:function(){this.isDynamicInfoVisible=!1,this.init()},changePage:function(e){this.currentPage=e,this.init()},init:function(){var e=this;this.loading=!0,o.default.all([this.getOperationList()]).then().finally(function(){e.loading=!1})}},components:{"dynamic-info-dialog":c.default},created:function(){this.init(),this.initVersionIdList()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:["dynamicOperation","dynamicInfo","dynamicInfoTitle","typeList","versionIdList"],data:function(){return{indexEventList:[{value:"创建索引"},{value:"更新索引"}],versionEventList:[{value:"创建版本"},{value:"更新版本"},{value:"启用版本"},{value:"删除版本"}],versionSyncEventList:[{value:"开始同步"},{value:"结束同步"},{value:"全量"},{value:"增量"},{value:"对账"}],templateEventList:[{value:"新建模板"},{value:"编辑模板"},{value:"导入模板"},{value:"删除模板"}],loading:!1,isDynamicInfoVisible:!0,rules:{}}},methods:{deleteDynamicInfo:function(){var e=this;this.$refs.dynamicInfo.validate(function(t){t?"delete"===e.dynamicOperation&&(e.loading=!0,e.$http.post("/index/dynamic/delete.json",e.dynamicInfo).then(function(){e.$message.successMessage("删除成功",function(){e.$emit("operate-close-dialog")})}).finally(function(){e.loading=!1})):console.log("error submit!!")})},closeDialog:function(){this.$emit("close-dialog")}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),o=i(a),s=n(534),l=i(s),r=n(533),c=i(r);t.default={components:{"flow-record-export":l.default,"flow-record-config":c.default},data:function(){return{activeNames:["1","2"],flowRecordExportParams:{}}},methods:{getFlowExport:function(e){this.flowRecordExportParams=JSON.parse((0,o.default)(e))}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:["configOperation","configInfo","configInfoTitle","allPhysicals","templates"],data:function(){return{loading:!1,isconfigInfoVisible:!0,rules:{templateId:[{validator:this.$validate.validateSelect,trigger:"change"}],startTime:[{validator:this.$validate.validateTime,trigger:"change"}],endTime:[{validator:this.$validate.validateTimeExpire,trigger:"change"}],sampleRate:[{required:!0,message:"抽样系数不能为空",trigger:"blur"}],limit:[{required:!0,message:"采集数量不能为空",trigger:"blur"}]}}},methods:{submitconfigInfo:function(){var e=this;this.$refs.configInfo.validate(function(t){t&&("add"===e.configOperation?(e.loading=!0,e.$http.post("/record/flow_record_config/add.json",e.configInfo).then(function(){e.$message.successMessage("新增规则成功",function(){e.$emit("operate-close-dialog")})}).finally(function(){e.loading=!1})):(e.loading=!0,e.$http.post("/record/flow_record_config/edit.json",e.configInfo).then(function(){e.$message.successMessage("修改规则成功",function(){e.$emit("operate-close-dialog")})}).finally(function(){e.loading=!1})))})},closeDialog:function(){this.$emit("close-dialog")}},computed:{isEditable:function(){return"edit"===this.configOperation}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),o=i(a),s=n(532),l=i(s);t.default={data:function(){return{indexId:this.$route.query.indexId,loading:!1,activeName:"first",flowRecordConfigList:[],indexName:this.$route.query.indexName,isMetaDataNull:!1,pageSize:10,configOperation:"",configInfoTitle:"",total:0,currentPage:1,configInfo:{},templates:[],isConfigInfoVisible:!1,isAllPrivilege:!1}},methods:{cellClick:function(e){var t={configId:e.id,indexId:e.indexId};this.$emit("get-flow-export",t)},init:function(){this.getFlowRecordConfigList(1),this.getTemplateByIndex()},changePage:function(e){this.getFlowRecordConfigList(e)},getTemplateByIndex:function(){var e=this,t={indexId:this.$route.query.indexId};this.$http.get("/record/index_template/list.json?indexId="+t.indexId).then(function(t){e.templates=t})},handleAdd:function(){this.isConfigInfoVisible=!0,this.configInfoTitle="新增规则",this.configOperation="add";var e={templateId:"",startTime:"",endTime:"",indexId:this.$route.query.indexId};this.configInfo=JSON.parse((0,o.default)(e))},handleDelete:function(e){var t=this;this.$message.confirmMessage("确定删除规则"+e.id+"吗，删除会同时停止此规则相关正在采集的作业?",function(){t.loading=!0,t.$http.post("/record/flow_record_config/delete.json",{indexId:t.indexId,configId:e.id}).then(function(){t.$message.successMessage("删除规则成功",function(){t.getFlowRecordConfigList(1)})}).finally(function(){t.loading=!1})})},handleEdit:function(e){var t=this;this.loading=!0,this.$http.get("/record/flow_record_config/id.json?configId="+e.id).then(function(n){var i=n;t.isConfigInfoVisible=!0,t.configInfoTitle="编辑规则",t.configOperation="edit";var a={id:e.id,templateId:i.templateId,startTime:i.startTime,endTime:i.endTime,indexId:t.$route.query.indexId,sampleRate:(0,o.default)(i.sampleRate),limit:(0,o.default)(i.limit),note:i.note||""};t.configInfo=JSON.parse((0,o.default)(a))}).finally(function(){t.loading=!1})},enableConfig:function(e){var t=this;this.$message.confirmMessage("确定启用规则"+e.id+"吗?",function(){t.loading=!0,t.$http.post("/record/flow_record_config/enable.json",{indexId:t.indexId,configId:e.id}).then(function(){t.$message.successMessage("启用规则成功",function(){t.getFlowRecordConfigList(1)})}).finally(function(){t.loading=!1})})},disableConfig:function(e){var t=this;this.$message.confirmMessage("确定禁用规则"+e.id+"吗，禁用会同时停止此规则相关正在采集的作业?",function(){t.loading=!0,t.$http.post("/record/flow_record_config/disable.json",{indexId:t.indexId,configId:e.id}).then(function(){t.$message.successMessage("禁用规则成功",function(){t.getFlowRecordConfigList(1)})}).finally(function(){t.loading=!1})})},getFlowRecordConfigList:function(e){var t=this,n={currentPage:e,pageSize:this.pageSize,indexId:this.$route.query.indexId||""};this.loading=!0,this.$http.get("/record/flow_record_config/page.json",n).then(function(e){t.flowRecordConfigList=e.list,t.total=e.total,t.isAllPrivilege=e.allPrivilege}).finally(function(){t.loading=!1})},closeDialog:function(){this.isConfigInfoVisible=!1},operateCloseDialog:function(){this.isConfigInfoVisible=!1,this.getFlowRecordConfigList(1)}},filters:{translateIsEnable:function(e){return{true:"已启用",false:"待启用"}[e]}},components:{"config-info-dialog":l.default},created:function(){this.init()},watch:{$route:"getFlowRecordConfigList"}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(25),o=i(a);t.default={props:["flowRecordExportParams"],data:function(){return{loading:!1,flowRecordList:[],indexId:this.$route.query.indexId,indexName:this.$route.query.indexName,flowRecordStateMap:{0:"就绪",1:"正在采集",2:"已完成",3:"已终止",4:"已结束"},isAllPrivilege:!1,pageSize:10,total:0,currentPage:0}},methods:{changePage:function(e){this.currentPage=e,this.getFlowRecordList(e)},getFlowRecordList:function(e){var t=this,n=(0,o.default)({},this.flowRecordExportParams,{currentPage:e,pageSize:this.pageSize});this.loading=!0,this.$http.get("/record/flow_record/page_by_config.json",n).then(function(e){t.flowRecordList=e.list,t.isAllPrivilege=e.allPrivilege,t.total=e.total}).finally(function(){t.loading=!1})},stopRecord:function(e){var t=this;this.$message.confirmMessage("确定停止采集"+e.id+"吗，停止会同时禁用相关规则?",function(){t.loading=!0,t.$http.post("/record/flow_record/stop.json",{indexId:t.indexId,recordId:e.id}).then(function(){t.$message.successMessage("停止采集成功",function(){t.getFlowRecordList(1)})}).finally(function(){t.loading=!1})})},handleDelete:function(e){var t=this;this.$message.confirmMessage("确定要删除采集数据"+e.id+"吗，删除将清除相关记录数据?",function(){t.loading=!0,t.$http.post("/record/flow_record/delete.json",{indexId:t.indexId,recordId:e.id}).then(function(){t.$message.successMessage("删除采集数据成功",function(){t.getFlowRecordList(1)})}).finally(function(){t.loading=!1})})},refreshList:function(){var e=this;this.interval=setInterval(function(){e.getFlowRecordList(1)},3e3)},exportFlow:function(e){window.location.href="/pallas/record/flow_record/export.json?recordId="+e.id}},filters:{translateIsEnable:function(e){return{true:"是",false:"否"}[e]}},components:{},watch:{flowRecordExportParams:{handler:function(){this.getFlowRecordList(1)},deep:!0}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{indexId:this.$route.query.indexId,indexName:this.$route.query.indexName,activeTab:"version_manage"}},methods:{onTabClick:function(){this.$router.push({name:this.activeTab,query:{indexId:this.$route.query.indexId,indexName:this.$route.query.indexName}})},getActiveTab:function(){var e=this.$route.name;e&&(this.activeTab=e)}},created:function(){this.activeTab=this.$route.name},watch:{$route:"getActiveTab"}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(538),o=i(a);t.default={props:["conditions","conditionInfo","conditionInfoTitle","conditionOperation","routingTargetGroups"],data:function(){return{isVisible:!0,rules:{name:[{required:!0,message:"规则名称不能为空",trigger:"blur"}],sourceType:[{required:!0,message:"数据源类型不能为空",trigger:"blur"}],sourceParameter:[{required:!0,message:"条件判断参数名不能为空",trigger:"blur"}],condExpr:[{required:!0,message:"条件判断运算不能为空",trigger:"blur"}],sourceValue:[{required:!0,message:"条件判断值不能为空",trigger:"blur"}],conditionRelation:[{required:!0,message:"请选择规则关系",trigger:"change"}],preference:[{validator:this.validatePreference,trigger:"blur"}]},preferenceList:["_primary","_primary_first","_replica","_replica_first","_only_local","_local","_prefer_nodes:abc,xyz","_shards:98,99"],conditionRelations:["OR","AND"],defaultProps:{key:"id",label:"name"}}},methods:{validatePreference:function(e,t,n){"_prefer_nodes:abc,xyz"===t?n(new Error("abc,xyz 请编辑文本填写真实节点内容")):"_shards:98,99"===t&&n(new Error("请编辑文本填写真实的分片")),n()},handleChange:function(e,t,n){"right"===t?this.changeDirection(n,"right"):this.changeDirection(n,"left")},changeDirection:function(e,t){var n=this;e.forEach(function(e){n.routingTargetGroups.forEach(function(i){e===i.id&&n.$set(i,"position",t)})})},renderFunc:function(e,t){var n=this;return"left"===t.position?e("div",[e("span",{style:{float:"left"}},t.name)]):e("div",[e("span",{style:{float:"left"}},t.name),e("input",{domProps:{value:t.weight||"0"},class:{"el-input__inner":!0},style:{float:"right",width:"50px",height:"20px",margin:"6px"},on:{input:function(e){n.$set(t,"weight",e.target.value),n.$emit("input",e.target.value)}}})])},submitInfo:function(){var e=this;this.$refs.conditionInfo.validate(function(t){if(t){var n=0;if(0!==e.conditionInfo.conditions.length&&e.$refs.conditions.$refs.conditionItem.forEach(function(e){e.$refs.conditionItemForm.validate(function(e){e&&(n+=1)})}),n===e.conditionInfo.conditions.length){e.conditionInfo.targetGroups=e.getTargetGroupsList();var i=e.setConditionInfo();e.targetGroupWeightValidate(i.targetGroups)&&("add"===e.conditionOperation?e.$emit("add-condition",i):e.$emit("edit-condition",i))}}})},targetGroupWeightValidate:function(e){var t=!1;if(0!==e.length){var n=/^([0-9]\d{0,1}|100)$/;e.some(function(e){return!n.test(e.weight)})?(t=!1,this.$message.errorMessage("请正确输入节点集权重, 0-100整数!")):t=!0}else t=!1,this.$message.errorMessage("请选择节点集!");return t},setConditionInfo:function(){var e={};return e.name=this.conditionInfo.name,e.targetGroups=this.conditionInfo.targetGroups,e.enable=this.conditionInfo.enable,e.conditionRelation=this.conditionInfo.conditionRelation,e.priority=this.conditionInfo.priority,e.conditions=this.conditionInfo.conditions,e.preference=this.conditionInfo.preference,e},getTargetGroupsList:function(){return this.$refs.targetGroupTransfer.targetData.map(function(e){var t={};return t.id=e.id,t.weight=e.weight,t})},closeDialog:function(){this.$emit("close-dialog")}},computed:{isEditable:function(){return"edit"===this.conditionOperation},alternativeConditions:function(){return"edit"===this.conditionOperation?(this.$array.removeByValue(this.conditions,this.conditionInfo.name),this.conditions):this.conditions}},components:{Conditions:o.default}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:["conditionItem"],data:function(){return{rules:{exprOp:[{required:!0,message:"请选择判断运算",trigger:"change"}],paramName:[{required:!0,message:"请输入判断参数名",trigger:"change"}],paramValue:[{required:!0,message:"请输入判断值",trigger:"blur"}]},exprOps:["=","ip_mask"],paramNames:["X-PALLAS-SEARCH-CLIENT-IP","X-PALLAS-SEARCH-TEMPLATE-ID"]}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),o=i(a),s=n(537),l=i(s);t.default={props:["conditions"],data:function(){return{conditionRelateInfo:{paramType:"header",exprOp:"",paramName:"",paramValue:""}}},methods:{addConditionRelate:function(){var e=JSON.parse((0,o.default)(this.conditionRelateInfo));this.conditions.push(e)},deleteConditionRelate:function(e){this.$array.removeByValue(this.conditions,e)}},components:{"condition-item":l.default}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(84),o=i(a),s=n(4),l=i(s),r=n(540),c=i(r),u=n(536),d=i(u);t.default={data:function(){return{loading:!1,privilege:!1,indexId:this.$route.query.indexId,indexName:this.$route.query.indexName,isConditionInfoVisible:!1,conditionInfo:{},conditionInfoTitle:"",conditionOperation:"",selectedCluster:"",indexNameForSearch:"",conditions:[],rulesList:[],routingTargetGroupsList:{},initTargetGroups:[],routingTargetGroups:[]}},methods:{sortTargetGroups:function(e){e.sort(function(e,t){return e.weight<t.weight?1:e.weight>t.weight?-1:0})},handleAdd:function(){this.isConditionInfoVisible=!0,this.conditionInfoTitle="创建规则",this.conditionOperation="add",this.routingTargetGroups=JSON.parse((0,l.default)(this.initTargetGroups));var e={name:"",targetGroups:[],targetGroupsId:[],preference:"",enable:!1,conditions:[],conditionRelation:"AND",priority:""};this.conditionInfo=JSON.parse((0,l.default)(e))},addCondition:function(e){var t=JSON.parse((0,l.default)(this.rulesList));""===e.priority?t.push(e):t.some(function(n,i){return n.name===e.priority&&(t.splice(i,0,e),!0)}),this.updateConditionRequest(t)},closeConditionDialog:function(){this.isConditionInfoVisible=!1},handleEdit:function(e){var t=this;this.isConditionInfoVisible=!0,this.conditionInfoTitle="编辑规则",this.conditionOperation="edit",this.routingTargetGroups=JSON.parse((0,l.default)(this.initTargetGroups));var n=[];e.targetGroups.forEach(function(e){n.push(e.id),t.routingTargetGroups.forEach(function(n){e.id===n.id&&(t.$set(n,"weight",e.weight),t.$set(n,"position","right"))})});var i={name:e.name,targetGroups:e.targetGroups,targetGroupsId:n,preference:e.preference||"",enable:e.enable,conditionRelation:e.conditionRelation,priority:"",conditions:e.conditions};this.conditionInfo=JSON.parse((0,l.default)(i))},editCondition:function(e){var t=JSON.parse((0,l.default)(this.rulesList)),n=void 0;t.some(function(t,i){return t.name===e.name&&(n=i,!0)}),""===e.priority?t.splice(n,1,e):(t.splice(n,1),t.some(function(n,i){return n.name===e.priority&&(t.splice(i,0,e),!0)})),this.updateConditionRequest(t)},updateConditionRequest:function(e){var t=this,n={indexId:this.indexId,indexName:this.indexName,rules:e};this.loading=!0,this.$http.post("/index/routing/rule/update.json",n).then(function(){t.$message.successMessage("操作成功",function(){t.isConditionInfoVisible=!1,t.getRoutingList()})}).finally(function(){t.loading=!1})},handleDelete:function(e,t){var n=this;this.$message.confirmMessage("确定删除规则"+e.name+"吗?",function(){var e=JSON.parse((0,l.default)(n.rulesList));e.splice(t,1),n.updateConditionRequest(e)})},getRoutingList:function(){var e=this,t={indexId:this.indexId,indexName:this.indexName};this.loading=!0,this.$http.post("/index/routing/list.json",t).then(function(t){e.rulesList=t.data.rules,e.rulesList.forEach(function(t){e.sortTargetGroups(t.targetGroups)});var n=[];t.data.rules.forEach(function(e){n.push(e.name)}),e.conditions=n,e.routingTargetGroupsList=t.data.routingTargetGroups,e.initTargetGroups=(0,o.default)(t.data.routingTargetGroups).map(function(e){var t={};return t.id=e.id,t.name=e.name,t.weight=1,t.position="left",t}),e.privilege=t.privilege}).finally(function(){e.loading=!1})}},created:function(){this.getRoutingList()},filters:{translateEnable:function(e){return{true:"是",false:"否"}[e]}},components:{"target-group":c.default,"condition-info-dialog":d.default}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),o=i(a),s=n(542),l=i(s),r=n(541),c=i(r);t.default={props:["privilege","rulesList","indexId","indexName","routingTargetGroupsList"],data:function(){return{loading:!1,istargetGroupInfoVisible:!1,targetGroupInfo:{},targetGroupInfoTitle:"",targetGroupTree:[],targetGroupTreeNoChildren:[],selectedShowTreeInfo:"name"}},methods:{changeShowTreeInfo:function(e){this.selectedShowTreeInfo=e},handleAdd:function(){this.istargetGroupInfoVisible=!0,this.targetGroupInfoTitle="创建节点集";var e={indexId:this.indexId,indexName:this.indexName,name:"",clusterLevel:0,nodes:[],clusters:[]};this.targetGroupInfo=JSON.parse((0,o.default)(e))},saveOperation:function(e){var t=this;this.$set(e,"indexName",this.indexName),this.$set(e,"indexId",this.indexId),this.loading=!0,this.$http.post("/index/routing/target_group/update.json",e).then(function(){t.$emit("get-routing-list")}).finally(function(){t.loading=!1})},deleteOperation:function(e){var t=this,n=!1;this.rulesList.forEach(function(t){t.targetGroups.some(function(t){return t.id===e&&(n=!0),n})}),n?this.$message.errorMessage("此节点集正在使用中，不能删除！"):(this.loading=!0,this.$http.post("/index/routing/target_group/delete.json",{groupId:e}).then(function(){t.$emit("get-routing-list")}).finally(function(){t.loading=!1}))},operationSuccess:function(){this.istargetGroupInfoVisible=!1,this.$emit("get-routing-list")},closeTargetGroupDialog:function(){this.istargetGroupInfoVisible=!1},getTargetGroupTree:function(){var e=this,t={indexId:this.indexId,indexName:this.indexName};this.loading=!0,this.$http.post("/index/routing/target_group/list.json",t).then(function(t){e.targetGroupTree=t.map(function(t){var n={};return n.cluster=t.cluster,n.address=t.address,n.name=t.name,n.disabled=!0,t.children.length>0&&(n.children=e.setTargetGroupChildrenDisabled(t.children)),n}),e.targetGroupTreeNoChildren=t.map(function(e){var t={};return t.cluster=e.cluster,t.address=e.address,t.name=e.name,t.disabled=!0,t})}).finally(function(){e.loading=!1})},setTargetGroupChildrenDisabled:function(e){return e.map(function(e){var t={};return t.cluster=e.cluster,t.address=e.address,t.name=e.name,t.state=e.state,t.weight=e.weight,t.disabled=!0,t})}},components:{"target-group-info-dialog":c.default,"target-group-item":l.default},created:function(){this.getTargetGroupTree()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:["rulesList","targetGroupInfo","targetGroupInfoTitle"],data:function(){return{loading:!1,isVisible:!0,rules:{name:[{required:!0,message:"节点集名称不能为空",trigger:"blur"}]},attrs:[{label:"普通级别",value:0},{label:"集群级别",value:1},{label:"集群级别(主分片优先)",value:3},{label:"集群级别(复制分片优先)",value:4},{label:"分片动态绑定",value:2}]}},methods:{submitInfo:function(){var e=this;this.$refs.targetGroupInfo.validate(function(t){t&&e.targetGroupRequest(e.targetGroupInfo)})},targetGroupRequest:function(e){var t=this;this.loading=!0,this.$http.post("/index/routing/target_group/update.json",e).then(function(){t.$message.successMessage("操作成功",function(){t.$emit("operation-success")})}).finally(function(){t.loading=!1})},closeDialog:function(){this.$emit("close-dialog")}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),o=i(a);t.default={props:["privilege","targetGroupItemInfo","targetGroupTree","targetGroupTreeNoChildren","selectedShowTreeInfo"],data:function(){return{name:this.targetGroupItemInfo.name,isDefaultExpand:!0,defaultProps:{children:"children",label:"name",disabled:"disabled"},attrs:[{label:"普通级别",value:0},{label:"集群级别",value:1},{label:"集群级别(主分片优先)",value:3},{label:"集群级别(复制分片优先)",value:4},{label:"分片动态绑定",value:2}],editable:!1}},methods:{checkChange:function(e,t){if(0!==this.targetGroupItemInfo.clusterLevel&&t){var n=[];n.push(e.name),this.$refs.mytree.setCheckedKeys(n)}},handleSave:function(){this.targetGroupItemInfo.name=this.name;var e=JSON.parse((0,o.default)(this.targetGroupItemInfo));if(0===this.targetGroupItemInfo.clusterLevel){if(this.getTargetGroupNodes(e.nodes),e.nodes.length>0){var t=e.nodes.some(function(t){return t.cluster!==e.nodes[0].cluster});t?this.$message.errorMessage("只能选择某个集群下的节点，请重新选择！"):this.saveInfo(e)}}else this.getTargetGroupNodes(e.clusters),this.saveInfo(e)},saveInfo:function(e){var t=this;this.$message.confirmMessage("确定保存节点集"+this.name+"吗?",function(){t.editable=!1,t.$emit("save-operation",e)})},handleEdit:function(){this.editable=!0,this.setTreeStatus(this.targetGroupTreeNoChildren,!1),this.setTreeStatus(this.targetGroupTree,!1)},handleCancel:function(){this.name=this.targetGroupItemInfo.name,0===this.targetGroupItemInfo.clusterLevel?this.$refs.mytree.setCheckedKeys(this.targetGroupItemInfo.nodes):this.$refs.mytree.setCheckedKeys(this.targetGroupItemInfo.clusters),this.editable=!1,this.setTreeStatus(this.targetGroupTreeNoChildren,!0),this.setTreeStatus(this.targetGroupTree,!0)},setTreeStatus:function(e,t){var n=this;e.forEach(function(e){n.$set(e,"disabled",t),e.children&&e.children.forEach(function(e){n.$set(e,"disabled",t)})})},getTargetGroupNodes:function(e){e.splice(0,e.length),this.$refs.mytree.getCheckedNodes().forEach(function(t){t.children||e.push(t)})},handleDelete:function(){var e=this;this.$message.confirmMessage("确定删除节点集"+this.targetGroupItemInfo.name+"吗?",function(){e.$emit("delete-operation",e.targetGroupItemInfo.id)})},getNodesName:function(e){var t=[];return this.targetGroupTree.forEach(function(n){n.name===e&&n.children&&n.children.forEach(function(e){t.push(e.name)})}),t},getShardNodes:function(e){var t=this,n=[];return this.targetGroupTree.forEach(function(i){i.children&&i.children.forEach(function(i){t.targetGroupItemInfo.nodes&&t.targetGroupItemInfo.nodes.forEach(function(t){i.cluster===e&&t===i.address&&n.push(i.name)})})}),n},renderContent:function(e,t){var n=t.data;return 1===this.targetGroupItemInfo.clusterLevel||3===this.targetGroupItemInfo.clusterLevel||4===this.targetGroupItemInfo.clusterLevel?e("span",[e("el-popover",{props:{placement:"right",trigger:"hover"}},[e("div",this.getNodesName(n.name).map(function(t){return e("div",t)})),e("span",{slot:"reference",style:{"font-size":"14px","margin-right":"5px"}},"name"===this.selectedShowTreeInfo?n.name:n.address)])]):0===this.targetGroupItemInfo.clusterLevel?e("span",[e("span",{style:{"font-size":"14px","margin-right":"5px"}},"name"===this.selectedShowTreeInfo?n.name:n.address),e("span",{class:{"el-tag":1===n.state,"el-tag--danger":1===n.state}},1===n.state?"离线":"")]):e("span",[e("el-popover",{props:{placement:"right",trigger:"hover",disabled:n.cluster!==this.targetGroupItemInfo.clusters[0]}},[e("div",this.getShardNodes(n.name).map(function(t){return e("div",t)})),e("span",{slot:"reference",style:{"font-size":"14px","margin-right":"5px"}},"name"===this.selectedShowTreeInfo?n.name:n.address)])])}},computed:{myTree:function(){return 0!==this.targetGroupItemInfo.clusterLevel?this.targetGroupTreeNoChildren:this.targetGroupTree},treeCheckedKeys:function(){return 0!==this.targetGroupItemInfo.clusterLevel?this.targetGroupItemInfo.clusters:this.targetGroupItemInfo.nodes}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),o=i(a);t.default={data:function(){return{loading:!1,indexId:this.$route.query.indexId,indexInfo:{}}},methods:{getIndexInfo:function(){var e=this;this.loading=!0,this.$http.get("/index/id.json?indexId="+this.indexId).then(function(t){e.indexInfo=JSON.parse((0,o.default)(t)),null==e.indexInfo.slowerThan&&e.$set(e.indexInfo,"slowerThan","200")}).finally(function(){e.loading=!1})},handleUpdate:function(){var e=this,t={indexId:this.indexId,timeout:this.indexInfo.timeout,retry:this.indexInfo.retry,slowerThan:this.indexInfo.slowerThan};this.loading=!0,this.$http.post("/index/update/timeout_retry.json",t).then(function(){e.$message.successMessage("更新成功")}).finally(function(){e.loading=!1})}},created:function(){this.getIndexInfo()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:["templateAddInfo"],data:function(){return{loading:!1,isTemplateAddVisible:!0,rules:{templateName:[{required:!0,message:"请输入模板名称",trigger:"blur"}],type:[{required:!0,message:"请输入类型",trigger:"blur"}]}}},methods:{submitInfo:function(){var e=this;this.$refs.templateAddInfo.validate(function(t){t&&(e.loading=!0,e.$http.post("/index_template/add.json",e.templateAddInfo).then(function(){e.$message.successMessage("新增模板成功",function(){e.$emit("submit-close-dialog",e.templateAddInfo.templateName)})}).finally(function(){e.loading=!1}))})},closeDialog:function(){this.$emit("close-dialog"),this.$refs.templateAddInfo.resetFields()}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),o=i(a);t.default={props:["indexId","templateInfo"],data:function(){return{loading:!1,indexInfo:{}}},methods:{getIndexInfo:function(){var e=this;this.loading=!0,this.$http.get("/index/id.json?indexId="+this.indexId).then(function(t){e.indexInfo=JSON.parse((0,o.default)(t))}).finally(function(){e.loading=!1})},handleUpdate:function(){var e=this,t={indexId:this.indexId,templateName:this.templateInfo.templateName,timeout:this.templateInfo.timeout,retry:this.templateInfo.retry};this.loading=!0,this.$http.post("/index_template/update.json",t).then(function(){e.$message.successMessage("更新成功")}).finally(function(){e.loading=!1})}},created:function(){this.getIndexInfo()}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),o=i(a);n(43);var s=n(548),l=i(s),r=n(545),c=i(r),u=n(547),d=i(u);t.default={props:["indexId","indexName","clusters","isAllPrivilege","templateInfo","macroList"],data:function(){return{loading:!1,clusterId:this.clusters[0].id,activeTab:"edit",selectedMacro:"",resultContent:"",explainContent:"",apiContent:{},paramsInfo:[],historyVersionList:[],isShowHistoryVersion:!1,isVersionContentVisible:!1,versionDiffInfo:{},sql:"",isEditSaveVisible:!1,paneHeight:{height:document.body.clientHeight-298}}},mounted:function(){this.paneHeight={height:document.body.clientHeight-298};var e=this;window.onresize=function(){e.paneHeight={height:document.body.clientHeight-298}}},methods:{tabClick:function(){var e=this;if("api"===this.activeTab){var t={indexId:this.indexId,templateName:this.templateInfo.templateName};this.loading=!0,this.$http.post("/index_template/genapi.json",t).then(function(t){e.apiContent=t}).finally(function(){e.loading=!1})}else if("test"===this.activeTab){var n={indexId:this.indexId,templateName:this.templateInfo.templateName};this.loading=!0,this.$http.post("/index_template/performance_script/param.json",n).then(function(t){e.paramsInfo=t.map(function(e){var t={};return t.paramName=e.paramName,t.include=!1,t.valueType="1",t.value="",t})}).finally(function(){e.loading=!1})}},insertMacro:function(){this.selectedMacro&&this.$refs.aceEditor1.editor.insert(this.insertContent)},changeEditContent:function(e){this.templateInfo.content!==e&&(this.templateInfo.content=e)},changeDebugContent:function(e){this.templateInfo.params!==e&&(this.templateInfo.params=e)},handleExecute:function(){var e=this,t={indexId:this.indexId,sql:this.sql};this.loading=!0,this.$http.post("/index_template/execute.json",t).then(function(t){try{e.explainContent=(0,o.default)(t,void 0,2)}catch(n){e.explainContent="解析错误: "+t.result}}).finally(function(){e.loading=!1})},handleExplain:function(){var e=this,t={sql:this.sql,clusterId:this.clusterId};this.loading=!0,this.$http.post("/index_template/explain.json",t).then(function(t){try{e.explainContent=(0,o.default)(JSON.parse(t),void 0,2)}catch(n){e.explainContent="解析错误: "+t.result}}).finally(function(){e.loading=!1})},handleDelete:function(){var e=this;this.$message.confirmMessage("确定删除模板"+this.templateInfo.templateName+"吗?",function(){var t={indexId:e.indexId,indexName:e.indexName,templateId:e.templateInfo.id,templateName:e.templateInfo.templateName};e.loading=!0,e.$http.post("/index_template/delete.json",t).then(function(){e.$message.successMessage("删除成功",function(){e.$emit("close-delete")})}).finally(function(){e.loading=!1})})},handleSave:function(){var e=this,t={indexId:this.indexId,templateName:this.templateInfo.templateName,content:this.templateInfo.content,params:this.templateInfo.params};this.loading=!0,this.$http.post("/index_template/update.json",t).then(function(){e.$message.successMessage("保存成功",function(){e.$emit("close-edit")})}).finally(function(){e.loading=!1})},handleApprove:function(){this.isEditSaveVisible=!0},closeEditSaveDialog:function(){this.isEditSaveVisible=!1},editSaveSuccess:function(){this.isEditSaveVisible=!1,this.$emit("close-edit"),this.getHistoryList()},handleRender:function(){var e=this,t={indexId:this.indexId,templateName:this.templateInfo.templateName,params:this.templateInfo.params,clusterId:this.clusterId};this.loading=!0,this.$http.post("/index_template/render.json",t).then(function(t){try{e.resultContent=(0,o.default)(JSON.parse(t),void 0,2)}catch(n){e.resultContent="解析错误: "+t}}).finally(function(){e.loading=!1})},handleDebug:function(){var e=this,t={indexId:this.indexId,templateName:this.templateInfo.templateName,params:this.templateInfo.params,clusterId:this.clusterId};this.loading=!0,this.$http.post("/index_template/debug.json",t).then(function(t){e.resultContent=(0,o.default)(JSON.parse(t),void 0,2)}).finally(function(){e.loading=!1})},handleHistoryVersion:function(){this.isShowHistoryVersion=!this.isShowHistoryVersion,this.isShowHistoryVersion&&this.getHistoryList()},handleVersionDialog:function(e){this.isVersionContentVisible=!0,this.versionDiffInfo.left=e.content,this.versionDiffInfo.right=this.templateInfo.content},closeVersionContentDialog:function(){this.isVersionContentVisible=!1},overwriteVersion:function(){this.templateInfo.content=this.versionDiffInfo.left,this.isVersionContentVisible=!1},getHistoryList:function(){var e=this;this.loading=!0,this.$http.get("/index_template/hislist.json?templateId="+this.templateInfo.id).then(function(t){e.historyVersionList=t}).finally(function(){e.loading=!1})}},components:{"template-test":l.default,"template-save-edit-dialog":d.default,"service-governance":c.default},computed:{insertContent:function(){return"##__"+this.selectedMacro+"__##"},eidtorId:function(){return this.templateInfo.templateName+"_edit"},debugId:function(){return this.templateInfo.templateName+"_debug"},isMacroVisible:function(){return 0===this.templateInfo.type},historyVersionBtn:function(){return this.isShowHistoryVersion?"隐藏历史版本":"历史版本"},isEditOperate:function(){return"edit"===this.activeTab},templateType:function(){return 0===this.templateInfo.type?"宏":"模板"},sqlParseBtnStyle:function(){return{"margin-top":this.paneHeight.height/2-20+"px"}}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:["indexId","templateInfo"],data:function(){return{loading:!1,isEditSaveVisible:!0,editSaveInfo:{historyDesc:""},rules:{historyDesc:[{required:!0,message:"请输入描述",trigger:"blur"}]}}},methods:{handleSubmit:function(){var e=this;this.$refs.editSaveInfo.validate(function(t){if(t){var n={indexId:e.indexId,templateName:e.templateInfo.templateName,content:e.templateInfo.content,params:e.templateInfo.params,historyDesc:e.editSaveInfo.historyDesc};e.loading=!0,e.$http.post("/index_template/approve.json",n).then(function(){e.$message.successMessage("提交成功，请在模板变更中查看模板审批状态",function(){e.$emit("edit-save-success")})}).finally(function(){e.loading=!1})}})},handleClose:function(){this.$emit("close-edit-save-dialog")}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(549),o=i(a),s=n(551),l=i(s),r=n(550),c=i(r);t.default={props:["indexId","templateName","paramsInfo"],data:function(){return{addDataSource:[{paramNameDef:"",indexId:this.indexId,templateName:this.templateName}],dataSource:[]}},methods:{templateTestUploadSuccess:function(e){this.dataSource.push(e)}},components:{"template-test-data-source":o.default,"template-test-upload":l.default,"template-test-params":c.default}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:["indexId","templateName","dataSource"],data:function(){return{loading:!1}},methods:{handleSave:function(e){var t=this;if(e.editParamNameDef)if(e.editParamNameDef.indexOf(",")<=0){var n={indexId:this.indexId,templateName:this.templateName,fileName:e.fileName,paramNameDef:e.editParamNameDef};this.loading=!0,this.$http.post("/index_template/performance_script/update.json",n).then(function(){t.$message.successMessage("保存成功",function(){t.$set(e,"paramNameDef",e.editParamNameDef),t.$set(e,"editParamNameDef","")})}).finally(function(){t.loading=!1})}else this.$message.errorMessage("请用;符号分隔参数");else this.$message.errorMessage("参数不能为空!")},handleDelete:function(e){var t=this;this.$message.confirmMessage("确定删除文件"+e.fileName+"吗?",function(){var n={indexId:t.indexId,templateName:t.templateName,fileName:e.fileName};t.loading=!0,t.$http.post("/index_template/performance_script/delete.json",n).then(function(){t.$message.successMessage("删除成功",function(){t.$array.removeByValue(t.dataSource,e)})}).finally(function(){t.loading=!1})})}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),o=i(a);t.default={props:["indexId","templateName","paramsInfo","dataSource"],data:function(){return{}},methods:{valueTypeChange:function(e){this.$set(e,"value","")},handleGen:function(){var e=this,t=[];this.paramsInfo.forEach(function(e){e.include&&t.push(e)});var n=t.some(function(t){return!t.value&&(e.$message.errorMessage("数据源参数映射不能为空!"),!0)});if(t.length){if(!n){var i={indexId:this.indexId,templateName:this.templateName,params:t},a=encodeURIComponent((0,o.default)(i));window.location.href="/pallas/index_template/performance_script/gen.json?params="+a}}else this.$message.errorMessage("请至少选择一个参数！")}},computed:{paramValues:function(){var e=this,t=[];return this.dataSource.forEach(function(e){if(e.paramNameDef.indexOf(";")<=0)t.push(e.paramNameDef);else{e.paramNameDef.split(";").forEach(function(e){t.push(e)})}}),this.paramsInfo.forEach(function(n){if("2"===n.valueType){t.some(function(e){return e===n.value})||e.$set(n,"value","")}}),t}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),o=i(a);t.default={props:["addDataSource","dataSource"],data:function(){return{}},methods:{handleUpload:function(){this.$refs.upload.clearFiles(),this.$refs.upload.$refs["upload-inner"].$refs.input.value=""},handleError:function(e){this.$message.errorMessage("上传失败: "+e)},handleRemove:function(){this.$refs.upload.$refs["upload-inner"].$refs.input.value=""},handleAdd:function(e){var t=this;if(e.paramNameDef&&this.$refs.upload.uploadFiles.length)if(e.paramNameDef.indexOf(",")<=0)if(e.paramNameDef.indexOf(";")<=0)this.$array.isContainValue(this.paramValues,e.paramNameDef)?this.$message.errorMessage("不允许相同参数名"):this.$refs.upload.submit();else{var n=e.paramNameDef.split(";"),i=n.some(function(e){return!!t.$array.isContainValue(t.paramValues,e)&&(t.$message.errorMessage("不允许相同参数名"),!0)});i||this.$refs.upload.submit()}else this.$message.errorMessage("请用;符号分隔参数");else this.$message.errorMessage("参数和文件不能为空")},handleSuccess:function(e,t){var n=this;200===e.status?this.$message.confirmMessage("上传成功！",function(){var e={};e.paramNameDef=JSON.parse((0,o.default)(n.addDataSource[0].paramNameDef)),e.fileName=JSON.parse((0,o.default)(t.name)),n.$emit("template-test-upload-success",e),n.$refs.upload.clearFiles(),n.$refs.upload.$refs["upload-inner"].$refs.input.value="",n.addDataSource[0].paramNameDef=""}):this.$message.errorMessage(e.description)}},computed:{paramValues:function(){var e=[];return this.dataSource.forEach(function(t){if(t.paramNameDef.indexOf(";")<=0)e.push(t.paramNameDef);else{t.paramNameDef.split(";").forEach(function(t){e.push(t)})}}),e}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),o=i(a);t.default={props:["indexId","templateList"],data:function(){return{isTemplateExportVisible:!0,templateSelected:[],exportTemplateList:[]}},methods:{closeDialog:function(){this.$emit("close-export-dialog")},sumbitExportTemplate:function(){if(this.templateSelected.length>0){var e=this.templateSelected.join(",");window.location.href="/pallas/index_template/export.json?indexId="+this.indexId+"&templateIds="+e}else this.$message.errorMessage("请选择要导出的模板！")}},created:function(){var e=JSON.parse((0,o.default)(this.templateList));this.exportTemplateList=e.map(function(e){var t={};return t.key=e.id,t.label=e.templateName,t})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:["indexId","templateImportTitle","templateImportUrl"],data:function(){return{loading:!1,isTemplateImportVisible:!0,importWay:"localUpload",rules:{updateDesc:[{required:!0,message:"请输入变更描述",trigger:"blur"}]},templateSelected:[],importTemplateList:[],fileList:[],importInfo:{updateDesc:""},indexSelected:"",indexAllList:[]}},methods:{indexChange:function(){this.templateSelected=[],this.getTemplateList()},getTemplateList:function(){var e=this;this.loading=!0,this.$http.get("/index_template/list.json?indexId="+this.indexSelected).then(function(t){e.importTemplateList=t.list}).finally(function(){e.loading=!1})},handleUpload:function(){this.$refs.upload.clearFiles(),this.$refs.upload.$refs["upload-inner"].$refs.input.value=""},handleRemove:function(){this.$refs.upload.$refs["upload-inner"].$refs.input.value=""},handleError:function(e){this.$message.errorMessage("上传失败: "+e)},handleSuccess:function(e){var t=this;200===e.status?this.$message.successMessage("导入模板成功！",function(){t.$emit("close-submit-dialog")}):this.$message.errorMessage(e.description)},submitImportTemplate:function(){var e=this;"localUpload"===this.importWay?this.$refs.importInfo.validate(function(t){t&&e.$refs.upload.submit()}):(console.log(this.templateSelected),0===this.templateSelected.length?this.$message.errorMessage("已选模板为空！请选择模板！"):this.indexTemplateImport())},indexTemplateImport:function(){var e=this,t=this.importTemplateList.filter(function(t){return e.templateSelected.indexOf(t.id)>-1}),n=t.map(function(e){return{id:e.id,templateName:e.templateName}}),i={indexId:this.indexId,templateInfos:n};this.loading=!0,this.$http.post("/index_template/index/import.json",i).then(function(t){0===t.length?e.$message.successMessage("导入模板成功",function(){e.$emit("close-submit-dialog")}):e.$message.errorMessage("模板 "+t.join(",")+" 导入失败")}).finally(function(){e.loading=!1})},closeDialog:function(){this.$emit("close-dialog"),"localUpload"===this.importWay&&(this.$refs.upload.clearFiles(),this.$refs.upload.$refs["upload-inner"].$refs.input.value="")},getAllIndexList:function(){var e=this;return this.$http.get("/index/all.json").then(function(t){e.indexAllList=t.filter(function(t){return t.id!==Number(e.indexId)})})}},created:function(){this.getAllIndexList()}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(11),o=i(a),s=n(35),l=i(s),r=n(4),c=i(r);n(43);var u=n(544),d=i(u),p=n(553),f=i(p),m=n(546),g=i(m),h=n(552),v=i(h);t.default={data:function(){return{loading:!1,indexId:this.$route.query.indexId,indexName:this.$route.query.indexName,isAllPrivilege:!1,templateInfo:{},templateList:[],isEditable:!1,isTemplateAddVisible:!1,isTemplateImportVisible:!1,templateImportTitle:"",templateImportUrl:"",isExprotTemplateVisible:!1,tempList:[],macroList:[],treeData:[{id:"temp",label:"模板",children:[]},{id:"macro",label:"宏",children:[]}],templateAddInfo:{indexId:"",templateName:"",type:"1",description:""},defaultProps:{children:"children",label:"label"},clusters:[]}},methods:{exportTemplate:function(){this.isExprotTemplateVisible=!0},closeExportDialog:function(){this.isExprotTemplateVisible=!1},importTemplate:function(){this.isTemplateImportVisible=!0,this.templateImportTitle="导入模板",this.templateImportUrl="/pallas/index_template/import.json?indexId="+this.indexId},addTemplate:function(){this.isTemplateAddVisible=!0,this.templateAddInfo.indexId=this.indexId},handleNodeClick:function(e){e.children||(this.isEditable=!0,this.templateInfo=e,this.templateInfo.content=e.content||"",this.templateInfo.params=e.params||"")},closeDelete:function(){this.init(),this.isEditable=!1},closeEdit:function(){this.init()},closeDialog:function(){this.isTemplateAddVisible=!1},closeImportDialog:function(){this.isTemplateImportVisible=!1},closeSubmitImportDialog:function(){this.isTemplateImportVisible=!1,this.init()},handleCallback:function(e){var t=this;this.templateList=e.list,this.isAllPrivilege=e.allPrivilege;var n=JSON.parse((0,c.default)(e.list)),i=[],a=[];n.forEach(function(e){if(e.newer&&1===e.type){var n=t.$createElement("span",null,[t.$createElement("b",{style:{color:"red"}},"新 "),t.$createElement("span",null,e.templateName)]);t.$set(e,"label",n)}else t.$set(e,"label",e.templateName);1===e.type?i.push(e):a.push(e)}),this.treeData[0].children=i,this.treeData[1].children=a,this.tempList=i,this.macroList=a},getTemplateList:function(){var e=this;return this.$http.get("/index_template/list.json?indexId="+this.indexId).then(function(t){e.handleCallback(t)})},submitCloseDialog:function(e){var t=this;this.isTemplateAddVisible=!1,this.loading=!0,this.$http.get("/index_template/list.json?indexId="+this.indexId).then(function(n){t.handleCallback(n),t.isEditable=!0,(0,l.default)(t.templateList).forEach(function(i,a){t.templateList[a].templateName===e&&(t.templateInfo=t.templateList[a],t.templateInfo.content=n.content||"",t.templateInfo.params=n.params||"",t.templateInfo.resultContent="")})}).finally(function(){t.loading=!1})},getClusters:function(){var e=this;return this.$http.post("/index/version/metadata.json",{indexId:this.indexId}).then(function(t){e.clusters=t.clusters})},init:function(){var e=this;this.loading=!0,o.default.all([this.getTemplateList(),this.getClusters()]).then().finally(function(){e.loading=!1})}},components:{"template-add-dialog":d.default,"template-import-dialog":f.default,"template-edit":g.default,"template-export-dialog":v.default},created:function(){this.init()}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),o=i(a),s=n(35),l=i(s);t.default={props:["isSchemaChildVisible","schemaChildInfo","versionOperation","schemaParentFieldName"],data:function(){return{childInfo:[],initDynamic:!1,fieldTypes:[{value:"text",label:"text"},{value:"keyword",label:"keyword"},{value:"date",label:"date"},{value:"boolean",label:"boolean"},{value:"object",label:"object"},{value:"nested",label:"nested"},{value:"long",label:"long"},{value:"integer",label:"integer"},{value:"short",label:"short"},{value:"byte",label:"byte"},{value:"double",label:"double"},{value:"float",label:"float"}]}},methods:{handleAdd:function(){var e={fieldName:"",fieldType:"",multi:"",search:!1,docValue:!1};this.childInfo.push(e)},cancelBtn:function(){this.$emit("close-schema-dialog")},handleDelete:function(e){var t=this;this.$message.confirmMessage("确定删除字段"+e.fieldName+"吗?",function(){t.$array.removeByValue(t.childInfo,e)})},confirmBtn:function(){var e=this;this.checkChildInput(this.childInfo)&&(this.schemaChildInfo.children.splice(0,this.schemaChildInfo.children.length),this.childInfo.forEach(function(t){e.schemaChildInfo.children.push(t)}),0===this.schemaChildInfo.children.length?this.schemaChildInfo.dynamic=!1:this.schemaChildInfo.dynamic=this.initDynamic,this.$emit("add-schema-child",this.schemaChildInfo.children))},checkChildInput:function(e){var t=this,n=!0;return(0,l.default)(e).forEach(function(i,a){""===e[a].fieldName?(t.$message.errorMessage("字段名不能为空"),n=!1):n=!0}),n},openDialog:function(){this.childInfo=JSON.parse((0,o.default)(this.schemaChildInfo.children)),this.initDynamic=this.schemaChildInfo.dynamic}},computed:{isEditable:function(){return"view"===this.versionOperation},childTitle:function(){return this.schemaChildInfo.fieldName+"子字段"}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:["schemaImportTitle","schemaImportUrl"],data:function(){return{isSchemaImportVisible:!0,fileList:[]}},methods:{cancelBtn:function(){this.$emit("close-dialog")},handleUpload:function(){this.$refs.upload.clearFiles(),this.$refs.upload.$refs["upload-inner"].$refs.input.value=""},handleRemove:function(){this.$refs.upload.$refs["upload-inner"].$refs.input.value=""},handleError:function(e){this.$message.errorMessage("上传失败: "+e)},handleSuccess:function(e){var t=e.schema.map(function(e){var t={};return t.dbFieldType=e.dbFieldType,t.fieldName=e.fieldName,t.fieldType=e.fieldType,t.multi=e.multi,t.search=e.search,t.docValue=e.docValue,t.children=e.children||[],t});this.$emit("schema-import-success",t)},submitImportSchema:function(){this.$refs.upload.submit()},handleClose:function(){this.$emit("close-schema-import-dialog")}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(25),o=i(a),s=n(4),l=i(s),r=n(85),c=i(r),u=n(45),d=i(u),p=n(555),f=i(p),m=n(556),g=i(m);t.default={components:{"schema-child-dialog":f.default,"schema-import-dialog":g.default},props:["versionOperation","versionInfo","versionInfoTitle","isMetaDataNull","clusters","isLogical"],data:function(){return{loading:!1,isVersionInfoVisible:!0,isSchemaImportVisible:!1,schemaImportTitle:"",schemaImportUrl:"",isSchemaChildVisible:!1,schemaChildInfo:{},schemaParentFieldName:"",rules:{shardNum:[{required:!0,message:"分片数量不能为空"},{type:"number",message:"分片数量必须为数字值"}],replicationNum:[{required:!0,message:"复制数量不能为空"},{type:"number",message:"复制数量必须为数字值"}],routingKey:[{required:!0,message:"请选择Routing Key",trigger:"change"}],idField:[{required:!0,message:"请选择Id列名",trigger:"change"}],updateTimeField:[{required:!0,message:"请选择Update Time",trigger:"change"}],indexSlowThreshold:[{required:!0,message:"Index Slow Log不能为空"},{type:"number",message:"Index Slow Log必须为数字值"}],fetchSlowThreshold:[{required:!0,message:"Fetch Slow Log不能为空"},{type:"number",message:"Fetch Slow Log必须为数字值"}],querySlowThreshold:[{required:!0,message:"Query Slow Log不能为空"},{type:"number",message:"Query Slow Log必须为数字值"}],refreshInterval:[{required:!0,message:"refresh_interval不能为空"},{type:"number",message:"refresh_interval必须为数字值"}]},fieldTypes:[{value:"text",label:"text(标准分词)"},{value:"text_ngram",label:"text(逐字分词)"},{value:"keyword",label:"keyword"},{value:"keyword_normalized",label:"keyword(全大写处理)"},{value:"keyword_as_number",label:"keyword as number"},{value:"date",label:"date"},{value:"boolean",label:"boolean"},{value:"object",label:"object"},{value:"nested",label:"nested"},{value:"long",label:"long"},{value:"integer",label:"integer"},{value:"short",label:"short"},{value:"byte",label:"byte"},{value:"double",label:"double"},{value:"float",label:"float"}]}},methods:{clusterChange:function(){this.versionInfo.nodes=[]},fieldTypeChange:function(e){"text"===e.fieldType?this.$set(e,"docValue",!1):"nested"===e.fieldType&&(this.$set(e,"search",!1),this.$set(e,"docValue",!1),this.$set(e,"multi",!0))},importSchema:function(){this.isSchemaImportVisible=!0,this.schemaImportTitle="导入schema",this.schemaImportUrl="/pallas/index/version/schema_import.json?indexId="+this.versionInfo.indexId},closeSchemaImportDialog:function(){this.isSchemaImportVisible=!1},schemaImportSuccess:function(e){var t=this;e.forEach(function(e){t.versionInfo.schema.forEach(function(n,i){e.fieldName===n.fieldName&&t.versionInfo.schema.splice(i,1)})}),e.forEach(function(e){t.versionInfo.schema.push(e)}),this.isSchemaImportVisible=!1},exportSchema:function(){window.location.href="/pallas/index/version/schema_export.json?versionId="+this.versionInfo.versionId},getLogicClusterAllocationNodes:function(){var e=this,t=[];this.clusterArray.forEach(function(n){var i={cluster:n,nodes:e.versionInfo.nodes.filter(function(e){return n===e.parent}).map(function(e){return e.name})};t.push(i)});var n="";return t.forEach(function(e){n+=e.cluster+":"+e.nodes.join()+";"}),n},submitVersionInfo:function(){var e=this;this.$refs.versionInfo.validate(function(t){t&&e.isSchemaSelectSearch()&&!e.isSchemaSelectError()&&(e.isLogical?e.$set(e.versionInfo,"allocationNodes",e.getLogicClusterAllocationNodes()):e.$set(e.versionInfo,"allocationNodes",e.versionInfo.nodes.join(",")),"add"===e.versionOperation||"copy"===e.versionOperation?(e.loading=!0,e.$http.post("/index/version/add.json",e.versionInfo).then(function(){e.$message.successMessage("保存版本成功",function(){e.$emit("template-operate-success")})}).finally(function(){e.loading=!1})):"edit"===e.versionOperation&&(e.loading=!0,e.$http.post("/index/version/update.json",e.versionInfo).then(function(){e.$message.successMessage("编辑版本成功",function(){e.$emit("template-operate-success")})}).finally(function(){e.loading=!1})))})},isSchemaSelectError:function(){var e=this;return this.versionInfo.schema.some(function(t){return""===t.fieldName?(e.$message.errorMessage("字段名不允许为空！"),!0):t.fieldName===e.versionInfo.idField&&"long"!==t.fieldType?(e.$message.errorMessage("Id列名 "+t.fieldName+" 的ES类型必须为long！"),!0):t.fieldName===e.versionInfo.updateTimeField&&"date"!==t.fieldType&&(e.$message.errorMessage("Update Time列名 "+t.fieldName+" 的ES类型必须为date！"),!0)})},isSchemaSelectSearch:function(){var e=this,t=!0,n=[],i=[];return this.versionInfo.schema.forEach(function(t){t.search&&t.docValue||(e.versionInfo.routingKey===t.fieldName&&n.push(e.versionInfo.routingKey),e.versionInfo.idField===t.fieldName&&n.push(e.versionInfo.idField),e.versionInfo.updateTimeField===t.fieldName&&n.push(e.versionInfo.updateTimeField)),"nested"!==t.fieldType||t.multi||i.push(t)}),n.length>0&&(this.$message.errorMessage((0,d.default)(new c.default(n)).join(", ")+"查询关键字、排序或聚合必须同时选中"),t=!1),i.length>0&&(this.$message.errorMessage(i.map(function(e){return e.fieldName}).join(", ")+"的ES类型为nested，请选为多值"),t=!1),t},closeDialog:function(){this.$emit("close-dialog"),this.$refs.versionInfo.resetFields()},closeSchemaDialog:function(){this.isSchemaChildVisible=!1},viewSchemaChildren:function(e){this.isSchemaChildVisible=!0,this.schemaChildInfo=e},addSchemaChild:function(e){console.log((0,l.default)(e)),this.isSchemaChildVisible=!1},deleteField:function(e){var t=this;this.$message.confirmMessage("确定删除字段"+e.fieldName+"吗?",function(){t.$array.removeByValue(t.versionInfo.schema,e)})},addField:function(e){var t={fieldName:"",dbFieldType:"N/A",docValue:!1,fieldType:"keyword",multi:!1,children:[],search:!1,isNew:!0,dynamic:!1};this.versionInfo.schema.splice(e+1,0,t)}},computed:{clusterArray:function(){return this.clusters.map(function(e){return e.clusterId})},isEditable:function(){return"view"===this.versionOperation},routingKeyWidth:function(){return this.isMetaDataNull?12:8},clusterNodes:function(){var e=this,t=[];return this.clusters.forEach(function(n){n.id===e.versionInfo.clusterId&&(t=n.nodes)}),t},clusterGroups:function(){return this.clusters.map(function(e){var t=(0,o.default)({},e);return t.nodes=e.nodes.map(function(t){var n=(0,o.default)({},t);return n.parent=e.clusterId,n}),t})}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(25),o=i(a),s=n(35),l=i(s),r=n(4),c=i(r),u=n(557),d=i(u);t.default={components:{"version-info-dialog":d.default},data:function(){return{loading:!1,indexId:this.$route.query.indexId,indexName:this.$route.query.indexName,isMetaDataNull:!1,isAllPrivilege:!1,isVersionInfoVisible:!1,versionInfoTitle:"",versionOperation:"",isStartSyncVisible:!1,isViewConfigVisible:!1,isStartFullImportVisible:!1,configInfo:"",configTitle:"",pageSize:10,currentPage:1,versionData:{},versionList:[],versionInfo:{},versionGetInfo:{},versionAddInfo:{indexId:"",shardNum:1,replicationNum:1,vdpQueue:"",routingKey:"id",idField:"id",updateTimeField:"update_time",filterFields:!1,vdp:1,checkSum:!1,schema:[],clusterId:"",nodes:[],indexSlowThreshold:-1,fetchSlowThreshold:-1,querySlowThreshold:-1,refreshInterval:60},clusters:[],isLogical:!1}},methods:{getClusterName:function(e){var t="";return this.clusters.some(function(n){return n.id===Number(e)&&(t=n.clusterId,!0)}),t},viewConfigInfo:function(e,t){var n=this,i={indexId:this.indexId,indexName:this.indexName,versionId:e.id,cid:t};this.loading=!0,this.$http.get("/index/version/info.json",i).then(function(i){n.configInfo=i,n.configTitle=n.indexName+"_"+e.id+"配置信息（集群："+n.getClusterName(t)+"）",n.isViewConfigVisible=!0}).finally(function(){n.loading=!1})},closeViewConfigDialog:function(){this.isViewConfigVisible=!1},createIndex:function(e){var t=this;this.loading=!0,this.$http.post("/index/version/create_index.json",{indexId:this.indexId,versionId:e.id}).then(function(){t.$message.successMessage("生成索引成功",function(){t.getVersionList()})}).finally(function(){t.loading=!1})},enableVersion:function(e){var t=this;this.$message.confirmMessage("确定启用版本"+e.id+"吗?",function(){t.loading=!0,t.$http.post("/index/version/enable.json",{indexId:t.indexId,versionId:e.id}).then(function(){t.$message.successMessage("启用版本成功",function(){t.getVersionList()})}).finally(function(){t.loading=!1})})},handleAdd:function(){this.isVersionInfoVisible=!0,this.versionInfoTitle="新增版本",this.versionOperation="add",this.versionAddInfo.indexId=this.indexId,this.versionAddInfo.clusterId=this.clusters[0].id,this.versionInfo=JSON.parse((0,c.default)(this.versionAddInfo))},triggerDialog:function(e,t){var n=this;this.loading=!0,this.$http.get("/index/version/id.json?versionId="+e.id).then(function(i){n.versionGetInfo=i,(0,l.default)(n.versionGetInfo.schema).forEach(function(t,i){n.versionGetInfo.schema[i].children=n.versionGetInfo.schema[i].children||[],n.versionGetInfo.versionId=e.id}),n.$set(n.versionGetInfo,"versionId",n.versionGetInfo.id),n.isLogical?n.$set(n.versionGetInfo,"nodes",n.getLogicClusterNodesArray(n.versionGetInfo.allocationNodes)):n.$set(n.versionGetInfo,"nodes",n.getNodesArray(n.versionGetInfo.allocationNodes)),n.versionInfo=JSON.parse((0,c.default)(n.versionGetInfo)),n.versionInfoTitle="edit"===t?"编辑版本":"copy"===t?"复制版本(From "+e.id+")":"查看版本",n.versionOperation=t,n.isVersionInfoVisible=!0}).finally(function(){n.loading=!1})},copyVersion:function(e,t){var n=this;this.loading=!0,this.$http.post("/index/version/copy.json",{versionId:e.id,indexId:this.indexId}).then(function(i){n.versionGetInfo=i,(0,l.default)(n.versionGetInfo.schema).forEach(function(t,i){n.versionGetInfo.schema[i].children=n.versionGetInfo.schema[i].children||[],n.versionGetInfo.versionId=e.id}),n.$set(n.versionGetInfo,"versionId",n.versionGetInfo.id),n.isLogical?n.$set(n.versionGetInfo,"nodes",n.getLogicClusterNodesArray(n.versionGetInfo.allocationNodes)):n.$set(n.versionGetInfo,"nodes",n.getNodesArray(n.versionGetInfo.allocationNodes)),n.versionInfo=JSON.parse((0,c.default)(n.versionGetInfo)),n.versionInfoTitle="复制版本(From "+e.id+")",n.versionOperation=t,n.isVersionInfoVisible=!0}).finally(function(){n.loading=!1})},getNodesArray:function(e){var t=[];return""!==e&&(t=e.indexOf(",")>0?e.split(","):[e]),t},getLogicClusterNodesArray:function(e){var t=[];if(e.indexOf(";")>-1){var n=e.split(";");n&&n.forEach(function(e){if(e){var n=e.split(":")[0],i=e.split(":")[1];i&&i.split(",").forEach(function(e){var i={parent:n,name:e};t.push(i)})}})}return t},handleDelete:function(e){var t=this;this.$message.confirmMessage("确定删除版本"+e.id+"吗?",function(){t.loading=!0,t.$http.post("/index/version/delete/id.json",{indexId:t.indexId,versionId:e.id}).then(function(){t.$message.successMessage("删除成功",function(){t.getVersionList()})}).finally(function(){t.loading=!1})})},closeDialog:function(){this.isVersionInfoVisible=!1},templateOperateSuccess:function(){this.isVersionInfoVisible=!1,this.getVersionList()},getSchemaMetaData:function(){var e=this;this.loading=!0,this.$http.post("/index/version/metadata.json",{indexId:this.indexId}).then(function(t){e.clusters=t.clusters,e.isLogical=t.isLogical,null===t.list||0===t.list.length?(e.versionAddInfo.schema=[],e.isMetaDataNull=!0):(e.isMetaDataNull=!1,e.versionAddInfo.schema=t.list.map(function(e){var t={};switch(t.dbFieldType=e.dbFieldType,t.fieldName=e.dbFieldName,t.dbFieldType){case"TINYINT":case"SMALLINT":t.fieldType="short";break;case"INTEGER":t.fieldType="integer";break;case"BIGINT":t.fieldType="long";break;case"DATE":case"TIMESTAMP":t.fieldType="date";break;case"DOUBLE":case"DECIMAL":t.fieldType="double";break;default:t.fieldType="keyword"}switch(t.multi=!1,t.fieldName){case"id":case"update_time":t.search=!0,t.docValue=!0;break;default:t.search=!1,t.docValue=!1}return t.children=[],t}))}).finally(function(){e.loading=!1})},getVersionList:function(){var e=this,t={currentPage:this.currentPage,pageSize:this.pageSize,indexId:this.indexId};this.loading=!0,this.$http.get("/index/version/page.json",t).then(function(t){e.versionData=t,e.isAllPrivilege=t.allPrivilege,e.versionList=t.list.map(function(e){return(0,o.default)({},e)});var n=[];e.versionList.length>0&&(e.versionList.forEach(function(e){n.push(e.id)}),e.$http.post("/index/version/count.json",{indexName:e.indexName,indexId:e.indexId,versionIds:n}).then(function(t){e.versionList.forEach(function(n){var i=t.filter(function(e){return e.vid===n.id}),a=[];i[0].data.length>0&&e.$array.strToArray(n.realClusterIds).forEach(function(e){var t=i[0].data.filter(function(t){return t.cid===Number(e)}).map(function(e){return e.count})[0];a.push(t)}),e.$set(n,"count",a)})}))}).finally(function(){e.loading=!1})},changePage:function(e){this.currentPage=e,this.getVersionList()},stopSync:function(e){var t=this,n=this.$createElement("span",null,[this.$createElement("p",null,"确定删除该版本"+e.id+"的索引吗?"),this.$createElement("p",null,"注意此操作会同时停用该版本!")]),i=e.isUsed?n:"确定删除该版本"+e.id+"的索引吗?";this.$message.confirmMessage(i,function(){t.loading=!0,t.$http.post("/index/version/disable.json",{indexId:t.indexId,versionId:e.id}).then(function(){t.$message.successMessage("删除索引成功",function(){t.getVersionList()})}).finally(function(){t.loading=!1})})}},filters:{translateIsUsed:function(e){return{true:"是",false:"否"}[e]}},created:function(){this.getVersionList(),this.getSchemaMetaData()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{isDsImportVisible:!0,fileList:[]}},methods:{cancelBtn:function(){this.$emit("close-dialog")},handleUpload:function(){this.$refs.upload.clearFiles(),this.$refs.upload.$refs["upload-inner"].$refs.input.value=""},handleRemove:function(){this.$refs.upload.$refs["upload-inner"].$refs.input.value=""},handleError:function(e){this.$message.errorMessage("上传失败: "+e)},handleSuccess:function(e){this.$emit("ds-import-success",e)},submitImportDs:function(){this.$refs.upload.submit()},handleClose:function(){this.$emit("close-ds-import-dialog")}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:["dataSource","indexOperation"],data:function(){return{rules:{ip:[{required:!0,message:"请输入数据库地址",trigger:"blur"}],port:[{validator:this.$validate.validatePort,trigger:"blur"}],username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],dbname:[{required:!0,message:"请输入数据库名",trigger:"blur"},{validator:this.dbnameValidate,trigger:"blur"}],tableName:[{required:!0,message:"请输入数据库表",trigger:"blur"},{validator:this.dbnameValidate,trigger:"blur"}]}}},methods:{dbnameValidate:function(e,t,n){this.$emit("db-validate",this.dataSource,n.bind(this))}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),o=i(a);t.default={props:["dataSources","showImportObject","indexId","indexOperation"],data:function(){return{dataSourceInfo:{ip:"",port:"",username:"",password:"",dbname:"",tableName:"",isGeneratePwd:!0}}},methods:{dbValidate:function(e,t){this.dataSources.filter(function(t){return t.dbname===e.dbname&&t.tableName===e.tableName}).length>1?t(new Error("数据库名和表名需唯一，不能重复")):t()},importDs:function(){this.showImportObject.show=!0},exportDs:function(){window.location.href="/pallas/ds/export.json?indexId="+this.indexId},addDataSource:function(){var e=JSON.parse((0,o.default)(this.dataSourceInfo));this.dataSources.push(e)},deleteDataSource:function(e){this.$array.removeByValue(this.dataSources,e)}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(561),o=i(a),s=n(559),l=i(s);t.default={props:["indexOperation","indexInfo","indexInfoTitle","clusters"],data:function(){return{loading:!1,isIndexInfoVisible:!0,rules:{indexName:[{validator:this.$validate.validateCharacterAndNumberIsExcludePointAndBar,trigger:"blur"}],clusterId:[{required:!0,message:"请选择所属集群",trigger:"change"}]},showImportObject:{show:!1}}},methods:{submitIndexInfo:function(){var e=this;this.$refs.indexInfo.validate(function(t){if(t){var n=0;e.indexInfo.dataSourceList.length>0&&e.$refs.dataSources.$refs.dataSourceItem.forEach(function(e){e.$refs.dataSource.validate(function(e){e&&(n+=1)})}),n===e.indexInfo.dataSourceList.length&&("add"===e.indexOperation?(e.loading=!0,e.$http.post("/index/add.json",e.indexInfo).then(function(t){t?e.$message.confirmMessage(t,function(){e.indexInfo.confirm=!0,e.$http.post("/index/add.json",e.indexInfo).then(function(){e.$message.successMessage("新增索引成功",function(){e.$emit("operate-close-dialog")})})}):e.$message.successMessage("新增索引成功",function(){e.$emit("operate-close-dialog")})}).finally(function(){e.loading=!1})):(e.loading=!0,e.$http.post("/index/update.json",e.indexInfo).then(function(t){t&&t.indexOf("成功")<0?e.$message.confirmMessage(t,function(){e.indexInfo.confirm=!0,e.$http.post("/index/update.json",e.indexInfo).then(function(){e.$message.successMessage("更新索引成功",function(){e.$emit("operate-close-dialog")})})}):e.$message.successMessage("更新索引成功",function(){e.$emit("operate-close-dialog")})}).finally(function(){e.loading=!1})))}})},closeDialog:function(){this.$emit("close-dialog"),this.$refs.indexInfo.resetFields()},closeDsImportDialog:function(){this.showImportObject.show=!1},dsImportSuccess:function(e){var t=this;console.log("dsImportSuccess",e);var n=e.split(/[\r\n]/);this.indexInfo.dataSourceList=[],n.forEach(function(e){var n=e.split(/\s+/);if(6===n.length){var i={ip:n[0],port:n[1],username:n[2],password:n[3],dbname:n[4],tableName:n[5],isGeneratePwd:!1};t.indexInfo.dataSourceList.push(i)}}),this.showImportObject.show=!1}},computed:{isEditable:function(){return"edit"===this.indexOperation}},components:{"index-data-sources":o.default,"datasource-import-dialog":l.default}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(11),o=i(a),s=n(4),l=i(s);n(79);var r=n(562),c=i(r);t.default={data:function(){return{loading:!1,isAllPrivilege:!1,isIndexInfoVisible:!1,indexInfoTitle:"",indexOperation:"",indexList:{},clusters:[],selectedCluster:this.$route.query.cluster||"",indexNameForSearch:this.$route.query.indexName||"",currentPage:Number(this.$route.query.currentPage)||1,pageSize:10,indexInfo:{},indexAddInfo:{indexName:"",clusterId:"",description:"",confirm:!1,dataSourceList:[{ip:"",port:"",username:"",password:"",dbname:"",tableName:"",isGeneratePwd:!0}]}}},methods:{handleDelete:function(e){var t=this;this.$message.confirmMessage("确定删除索引"+e.indexName+"(id="+e.id+")吗?",function(){t.loading=!0,t.$http.post("/index/delete/id.json",{indexId:e.id}).then(function(){t.$message.successMessage("删除成功",function(){t.refreshPage()})}).finally(function(){t.loading=!1})})},handleAdd:function(){this.isIndexInfoVisible=!0,this.indexInfoTitle="新增索引",this.indexOperation="add",this.indexInfo=JSON.parse((0,l.default)(this.indexAddInfo))},handleEdit:function(e){var t=this;this.loading=!0,this.$http.get("/index/id.json?indexId="+e.id).then(function(e){var n=e,i={indexId:n.id,clusterId:n.clusterName,description:n.description,dataSourceList:n.dataSourceList,indexName:n.indexName};t.indexInfo=JSON.parse((0,l.default)(i)),t.isIndexInfoVisible=!0,t.indexInfoTitle="编辑索引",t.indexOperation="edit"}).finally(function(){t.loading=!1})},handleManage:function(e,t){this.$router.push({path:"index_detail",query:{indexId:t.id,indexName:t.indexName}})},changePage:function(e){this.currentPage=e,this.toPage()},refreshPage:function(){this.init()},toPage:function(){this.$router.push({path:this.$routermapper.GetPath("indexManage"),query:{currentPage:this.currentPage,cluster:this.selectedCluster,indexName:this.indexNameForSearch}})},closeDialog:function(){this.isIndexInfoVisible=!1},operateCloseDialog:function(){this.isIndexInfoVisible=!1,this.refreshPage()},getIndexList:function(){var e=this,t={currentPage:this.$route.query.currentPage||1,pageSize:this.pageSize,indexName:this.$route.query.indexName||"",clusterId:this.$route.query.cluster||""};return this.$http.get("/index/page.json",t).then(function(t){e.indexList=t,e.isAllPrivilege=t.allPrivilege})},getClusters:function(){var e=this;return this.$http.get("/cluster/all.json").then(function(t){var n=[],i=[];t.forEach(function(e){e.logicalCluster?n.push(e):i.push(e)}),e.clusters.push({label:"物理集群",options:i}),e.clusters.push({label:"逻辑集群",options:n})})},init:function(){var e=this;this.loading=!0,o.default.all([this.getIndexList(),this.getClusters()]).then().finally(function(){e.loading=!1})}},components:{"index-info-dialog":c.default},created:function(){this.init()},watch:{$route:"init"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{activeTab:"user_manage"}},methods:{onTabClick:function(){this.$router.push({name:this.activeTab})},getActiveTab:function(){var e=this.$route.name;e&&(this.activeTab=e)}},created:function(){this.activeTab=this.$route.name},watch:{$route:"getActiveTab"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:["userInfo","userOperation","rolesList"],data:function(){return{isVisible:!0,loading:!1,rules:{username:[{required:!0,message:"请输入登录名",trigger:"blur"}],realName:[{required:!0,message:"请输入用户名",trigger:"blur"}]}}},methods:{handleSubmit:function(){var e=this;this.$refs.userInfo.validate(function(t){t&&e.userInfoRequest()})},userInfoRequest:function(){var e=this;this.loading=!0,this.$http.post("/authorization/user/update.json",this.userInfo).then(function(){e.$message.successMessage(e.userInfoTitle+"成功",function(){e.$emit("user-info-success")})}).finally(function(){e.loading=!1})},closeDialog:function(){this.$emit("close-dialog")}},computed:{isEditable:function(){return"add"===this.userOperation},userInfoTitle:function(){return this.isEditable?"新增用户":"编辑用户"}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(11),o=i(a),s=n(25),l=i(s),r=n(4),c=i(r),u=n(565),d=i(u);t.default={components:{"user-info-dialog":d.default},data:function(){return{loading:!1,userList:[],rolesList:[],pageSize:10,currentPage:1,total:3,allPrivilege:!0,formSearch:{keywords:""},isUserInfoVisible:!1,userInfo:{},userOperation:""}},computed:{loginUser:function(){return this.$store.state.loginUser}},methods:{getUserList:function(){var e=this,t={currentPage:1,pageSize:this.pageSize,keywords:this.formSearch.keywords};return this.$http.get("/authorization/user/page.json",t).then(function(t){e.userList=t.list,e.allPrivilege=t.allPrivilege,e.total=t.total})},handleAdd:function(){var e={username:"",realName:"",password:"",email:"",roleNames:[]};this.userOperation="add",this.userInfo=JSON.parse((0,c.default)(e)),this.isUserInfoVisible=!0},handleEdit:function(e){this.userOperation="edit",this.userInfo=(0,l.default)({},e,{roleNames:e.roles.map(function(e){return e.roleName})}),this.isUserInfoVisible=!0},userInfoSuccess:function(){this.init(),this.closeDialog()},closeDialog:function(){this.isUserInfoVisible=!1},handleDelete:function(e){var t=this;this.$message.confirmMessage("确定删除用户 "+e.username+" 吗?",function(){t.loading=!0,t.$http.get("authorization/user/delete/"+e.id+".json").then(function(){t.$message.successMessage("删除用户成功",function(){t.init()})}).finally(function(){t.loading=!1})})},changePage:function(e){this.currentPage=e,this.init()},getRolesList:function(){var e=this;return this.$http.get("/authorization/role/page.json").then(function(t){e.rolesList=t.list})},init:function(){var e=this;this.loading=!0,o.default.all([this.getUserList(),this.getRolesList()]).then(function(){}).finally(function(){e.loading=!1})}},created:function(){this.init()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:["pluginInfo","pluginInfoTitle","pluginInfoOperation"],data:function(){return{loading:!1,isVisible:!0,rules:{clusterId:[{required:!0,message:"请选择集群",trigger:"change"}],pluginName:[{required:!0,message:"请输入插件名称",trigger:"blur"}],pluginVersion:[{required:!0,message:"请输入插件版本",trigger:"blur"}],packagePath:[{required:!0,message:"请上传文件获取包路径",trigger:"blur"}],note:[{required:!0,message:"请输入变更描述",trigger:"blur"}]},clusters:[]}},methods:{handleSubmit:function(){var e=this;this.$refs.pluginInfo.validate(function(t){t&&(e.loading=!0,e.$http.post("/plugin/upgrade/add.json",e.pluginInfo).then(function(){e.$message.successMessage("操作成功",function(){e.$emit("operate-close-dialog")})}).finally(function(){e.loading=!1}))})},closeDialog:function(){this.$emit("close-dialog")},getClusters:function(){var e=this;this.loading=!0,this.$http.get("/cluster/all.json").then(function(t){t.forEach(function(t){t.logicalCluster||e.clusters.push(t)})}).finally(function(){e.loading=!1})},handleUpload:function(){this.$refs.upload.clearFiles(),this.$refs.upload.$refs["upload-inner"].$refs.input.value=""},handleRemove:function(){this.$refs.upload.$refs["upload-inner"].$refs.input.value=""},handleError:function(e){this.$message.errorMessage("上传失败: "+e)},handleSuccess:function(e){200===e.status?this.pluginInfo.packagePath=e.data:this.$message.errorMessage(e.data.message)}},computed:{isEditable:function(){return"upgrade"===this.pluginInfoOperation},uploadData:function(){return{clusterId:this.pluginInfo.clusterId,pluginName:this.pluginInfo.pluginName,pluginVersion:this.pluginInfo.pluginVersion}},enableUpload:function(){return""!==this.pluginInfo.clusterId&&""!==this.pluginInfo.pluginName&&""!==this.pluginInfo.pluginVersion}},created:function(){this.getClusters()}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(11),o=i(a),s=n(4),l=i(s),r=n(85),c=i(r),u=n(45),d=i(u);n(79);var p=n(567),f=i(p);t.default={data:function(){return{loading:!1,isPluginInfoDialogVisible:!1,pluginInfo:{},pluginInfoTitle:"",pluginInfoOperation:"",pluginNameForSearch:this.$route.query.pluginName||"",pluginRuntimeList:[],pageSize:10,total:0,currentPage:Number(this.$route.query.currentPage)||1,isAllPrivilege:!1,pluginTypeMap:{0:"PALLAS",1:"ES"}}},methods:{getNodesOfVersion:function(e,t){var n=[];return e.forEach(function(e){e.pluginVersion===t&&n.push(e.nodeIp)}),n},getPluginVersion:function(e){var t=[];return e.forEach(function(e){""!==e.pluginVersion&&t.push(e.pluginVersion)}),(0,d.default)(new c.default(t))},handleAdd:function(){this.isPluginInfoDialogVisible=!0,this.pluginInfoTitle="新建插件",this.pluginInfoOperation="add";var e={clusterId:"",pluginName:"",pluginVersion:"",pluginType:0,note:"",packagePath:""};this.pluginInfo=JSON.parse((0,l.default)(e))},handleRemove:function(e){var t=this,n={pluginUpgradeId:e.id,clusterId:e.clusterId,pluginName:e.pluginName,pluginVersion:e.nodeStates[0].pluginVersion||""};this.$message.confirmMessage("确定移除插件"+e.pluginName+"吗? 请注意，确定后会马上移除插件！",function(){t.loading=!0,t.$http.post("/plugin/remove.json",n).then(function(){t.$message.successMessage("提交移除请求成功并等待后台执行，请稍后刷新页面",function(){t.refreshPage()})}).finally(function(){t.loading=!1})})},handleUpgrade:function(e){this.isPluginInfoDialogVisible=!0,this.pluginInfoTitle=e.pluginName+"插件升级",this.pluginInfoOperation="upgrade";var t={clusterId:e.clusterId,pluginName:e.pluginName,pluginVersion:"",pluginType:0,note:"",packagePath:""};this.pluginInfo=JSON.parse((0,l.default)(t))},closeDialog:function(){this.isPluginInfoDialogVisible=!1},operateCloseDialog:function(){var e=this;this.isPluginInfoDialogVisible=!1,this.$message.successMessage("新增插件成功，等待审核，请稍后刷新页面",function(){e.refreshPage()})},getPluginRuntimeList:function(){var e=this,t={currentPage:Number(this.$route.query.currentPage)||1,pageSize:this.pageSize,pluginName:encodeURIComponent(this.$route.query.pluginName||"")};return this.$http.get("/plugin/runtime/list.json",t).then(function(t){e.pluginRuntimeList=t.list,e.isAllPrivilege=t.allPrivilege,e.total=t.total})},changePage:function(e){this.currentPage=e,this.toPage()},refreshPage:function(){this.init()},toPage:function(){this.$router.push({path:this.$routermapper.GetPath("pluginManage"),query:{currentPage:this.currentPage,pluginName:this.pluginNameForSearch}})},init:function(){var e=this;this.loading=!0,o.default.all([this.getPluginRuntimeList()]).then().finally(function(){e.loading=!1})}},created:function(){this.init()},watch:{$route:"init"},components:{"plugin-info-dialog":f.default}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(11),o=i(a);t.default={data:function(){return{loading:!1,pluginUpgradeList:[],pageSize:10,total:0,currentPage:Number(this.$route.query.currentPage)||1,isAllPrivilege:!1,pluginTypeMap:{0:"PALLAS",1:"ES"}}},computed:{pluginName:function(){return this.$route.query.pluginName}},methods:{getPluginUpgradeList:function(){var e=this,t={currentPage:Number(this.$route.query.currentPage)||1,pageSize:this.pageSize,pluginName:encodeURIComponent(this.pluginName||"")};return this.$http.get("/plugin/upgrade/list.json",t).then(function(t){e.pluginUpgradeList=t.list,e.isAllPrivilege=t.allPrivilege,e.total=t.total})},handlePlugin:function(e,t,n){var i=this,a={pluginUpgradeId:e.id,action:t};this.$message.confirmMessage("确定"+n+"插件"+e.pluginName+"吗?",function(){i.loading=!0,i.$http.post("/plugin/upgrade/action.json",a).then(function(){i.$message.successMessage("操作成功",function(){i.refreshPage()})}).finally(function(){i.loading=!1})})},handleRollback:function(e){var t=this,n={clusterId:e.clusterId,pluginName:e.pluginName,pluginVersion:e.pluginVersion,pluginType:e.pluginType,note:e.note,packagePath:e.packagePath};this.$message.confirmMessage("确定回滚插件"+e.pluginName+"吗?",function(){t.loading=!0,t.$http.post("/plugin/upgrade/add.json",n).then(function(){t.$message.successMessage("操作成功，已创建新工单",function(){t.refreshPage()})}).finally(function(){t.loading=!1})})},changePage:function(e){this.currentPage=e,this.toPage()},refreshPage:function(){this.init()},toPage:function(){this.$router.push({path:this.$routermapper.GetPath("pluginUpgrade"),query:{currentPage:this.currentPage,pluginName:this.pluginName}})},init:function(){var e=this;this.loading=!0,o.default.all([this.getPluginUpgradeList()]).then().finally(function(){e.loading=!1})}},created:function(){this.init()},watch:{$route:"init"},filters:{translateStat:function(e){return{0:"创建",1:"待审批",2:"审批不通过",3:"取消",4:"标记完成",5:"下载中",51:"下载完成",6:"升级中",61:"升级完成",7:"插件已移除"}[e]}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),o=i(a),s=n(35),l=i(s),r=n(571),c=i(r);t.default={props:["tokenInfo","tokenHeight"],data:function(){return{loading:!1,clusterList:[],clusterList2update:[],tokenClusterInfo:{}}},computed:{clusterTreeHeight:function(){return{height:this.tokenHeight.height+15}}},methods:{updateTokenCluster:function(){var e=this,t={id:this.tokenClusterInfo.id,name:this.tokenClusterInfo.name};""===this.tokenClusterInfo.clusterPrivilege?this.$set(t,"privileges",{}):this.$set(t,"privileges",{ClusterAll:[this.tokenClusterInfo.clusterPrivilege]}),0===this.tokenClusterInfo.myIndexPrivilegeArr.length?this.$set(t,"indexPrivileges",[]):(this.tokenClusterInfo.myIndexPrivilegeArr.forEach(function(t){""===t.indexPrivilege?e.$set(t,"privileges",{}):e.$set(t,"privileges",{IndexAll:[t.indexPrivilege]})}),this.$set(t,"indexPrivileges",this.tokenClusterInfo.myIndexPrivilegeArr)),this.clusterList.some(function(n,i){return n.id===t.id&&(e.clusterList[i]=t),!1}),this.clusterList2update[0]=t,this.updateTokenRequest()},updateTokenRequest:function(){var e=this,t={id:this.tokenInfo.id,authorizationItems:this.clusterList2update};this.loading=!0,this.$http.post("/token/token_privilege/update.json",t).then(function(){e.getTokenDetail()}).finally(function(){e.loading=!1})},handleNodeClick:function(e){var t=this,n={id:e.id,name:e.name};0===(0,l.default)(e.privileges).length?this.$set(n,"clusterPrivilege",""):this.$set(n,"clusterPrivilege",e.privileges.ClusterAll[0]),e.indexPrivileges.length>0&&e.indexPrivileges.forEach(function(e){0===(0,l.default)(e.privileges).length?t.$set(e,"indexPrivilege",""):t.$set(e,"indexPrivilege",e.privileges.IndexAll[0])}),this.$set(n,"myIndexPrivilegeArr",e.indexPrivileges),this.tokenClusterInfo=JSON.parse((0,o.default)(n))},getTokenDetail:function(){var e=this;this.tokenInfo.id&&(this.loading=!0,this.$http.get("/token/token_privileges.json?id="+this.tokenInfo.id).then(function(t){e.clusterList=t,e.sortTokenCluster()}).finally(function(){e.loading=!1}))},sortTokenCluster:function(){var e=this;this.clusterList.sort(function(t,n){var i=e.isIndexPrivilege(t)?1:0,a=e.isIndexPrivilege(n)?1:0;return(0,l.default)(t.privileges).length+i>(0,l.default)(n.privileges).length+a?-1:(0,l.default)(t.privileges).length+i<(0,l.default)(n.privileges).length+a?1:0})},isIndexPrivilege:function(e){return e.indexPrivileges.some(function(e){return 0!==(0,l.default)(e.privileges).length})},renderCluster:function(e,t){var n=t.data,i="";return(0!==(0,l.default)(n.privileges).length||this.isIndexPrivilege(n))&&(i="已授权"),e("span",[e("span",{style:{float:"left","margin-left":"10px","font-size":"14px"}},n.name),e("span",{style:{float:"right",color:"#32cd32","margin-right":"10px","font-size":"12px"}},i)])}},created:function(){this.getTokenDetail()},components:{"token-index":c.default}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:["tokenClusterInfo","clusterTreeHeight"],data:function(){return{}},methods:{handleUpdate:function(){var e=this;this.$message.confirmMessage("确定更新授权吗?",function(){e.$emit("update-token-cluster")})},handleReset:function(){var e=this;""!==this.tokenClusterInfo.clusterPrivilege&&(this.tokenClusterInfo.clusterPrivilege=""),this.tokenClusterInfo.myIndexPrivilegeArr.length>0&&this.tokenClusterInfo.myIndexPrivilegeArr.forEach(function(t,n){""!==t.indexPrivilege&&(e.tokenClusterInfo.myIndexPrivilegeArr[n].indexPrivilege="")})}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:["tokenInfo","tokenInfoTitle","tokenInfoOperate"],data:function(){return{loading:!1,isVisible:!0,rules:{title:[{required:!0,message:"请输入Token标题",trigger:"blur"}]}}},methods:{reGenerate:function(){var e=this;this.loading=!0,this.$http.post("/token/security/token.json").then(function(t){e.tokenInfo.clientToken=t}).finally(function(){e.loading=!1})},submitInfo:function(){var e=this;this.$refs.tokenInfo.validate(function(t){t&&e.tokenRequest("/token/insert.json")})},tokenRequest:function(e){var t=this;this.loading=!0,this.$http.post(e,this.tokenInfo).then(function(){var e={operation:t.tokenInfoOperate,clientToken:t.tokenInfo.clientToken,title:t.tokenInfo.title};t.$emit("token-info-success",e)}).finally(function(){t.loading=!1})},closeDialog:function(){this.$emit("close-dialog")}},computed:{isEditable:function(){return"add"===this.tokenInfoOperate}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(11),o=i(a),s=n(4),l=i(s),r=n(570),c=i(r),u=n(572),d=i(u);t.default={data:function(){return{loading:!1,isPrivilege:!1,isTokenInfoVisible:!1,isSelectToken:!1,tokenInfo:{},tokenInfoTitle:"",tokenInfoOperate:"",tokenForSearch:"",tokenSelectInfo:{},tokenList:[],statusMap:{true:"启用",false:"禁用"},initTokenList:[],tokenHeight:{height:document.body.clientHeight-225}}},computed:{tokenErrorHeight:function(){return{height:this.tokenHeight.height+92,"line-height":this.tokenHeight.height+92+"px"}}},mounted:function(){this.tokenHeight={height:document.body.clientHeight-225};var e=this;window.onresize=function(){e.tokenHeight={height:document.body.clientHeight-225}}},methods:{handleSearch:function(){var e=this,t=this.initTokenList;t=t.filter(function(t){if("string"==typeof t.clientToken){return t.clientToken.toLowerCase().indexOf(e.tokenForSearch.toLowerCase())>-1||t.title.toLowerCase().indexOf(e.tokenForSearch.toLowerCase())>-1||t.id.toString().indexOf(e.tokenForSearch.toLowerCase())>-1}return t.clientToken===e.tokenForSearch}),this.tokenList=t},handleAdd:function(){var e={title:"",clientToken:"",enabled:!0};this.tokenInfo=JSON.parse((0,l.default)(e)),this.tokenInfoTitle="新建Token",this.tokenInfoOperate="add",this.isTokenInfoVisible=!0},closeTokenInfoDialog:function(){this.isTokenInfoVisible=!1},tokenInfoSuccess:function(e){"edit"===e.operation&&(this.tokenSelectInfo.clientToken=e.clientToken,this.tokenSelectInfo.title=e.title),this.isTokenInfoVisible=!1,this.init()},handleEdit:function(e){var t={id:e.id,title:e.title,clientToken:e.clientToken,enabled:e.enabled};this.tokenInfo=JSON.parse((0,l.default)(t)),this.tokenInfoTitle="编辑Token",this.tokenInfoOperate="edit",this.isTokenInfoVisible=!0},handleTokenClick:function(e){this.isSelectToken=!0,this.tokenSelectInfo=JSON.parse((0,l.default)(e))},getDataList:function(){var e=this;return this.$http.get("/token/list.json").then(function(t){e.tokenList=t,e.initTokenList=t,e.isPrivilege=!0})},init:function(){var e=this;this.loading=!0,o.default.all([this.getDataList()]).then().finally(function(){e.loading=!1})}},created:function(){this.init()},components:{"token-detail":c.default,"token-info-dialog":d.default}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){t=e.exports=n(2)(void 0),t.push([e.i,".target-group-transfer .el-transfer-panel{min-width:43%}",""])},function(e,t,n){t=e.exports=n(2)(void 0),t.push([e.i,".panel[data-v-07add241]{background-color:#fff;border:1px solid transparent;border-radius:4px;-webkit-box-shadow:0 1px 1px rgba(0,0,0,.05);box-shadow:0 1px 1px rgba(0,0,0,.05)}.panel-default-info[data-v-07add241]{background-color:#3d3d3d;padding-top:10px;padding-bottom:5px;border:1px solid #262626;opacity:.8}.panel-danger-info[data-v-07add241]{background-color:#c00;padding-top:10px;padding-bottom:5px;text-decoration:none;opacity:.8}.panel-danger-info[data-v-07add241]:hover{background-color:red}.panel-warning-info[data-v-07add241]{background-color:#f80;padding-top:10px;padding-bottom:5px;text-decoration:none;opacity:.8}.panel-success-info[data-v-07add241]{background-color:#67c23a;padding-top:10px;padding-bottom:5px;text-decoration:none;opacity:.8}.panel-content-title[data-v-07add241]{text-align:center;color:#fff;font-size:15px;word-wrap:break-word;word-break:normal}.panel-content-body[data-v-07add241]{text-align:center;color:#fff;font-size:22px;padding-top:5px}",""])},function(e,t,n){t=e.exports=n(2)(void 0),t.push([e.i,".token-index{margin-top:3px}.token-index .el-radio-button--small .el-radio-button__inner{padding:3px 5px}.el-table th,.token-index .el-table td{height:36px}.token-index .el-table th>.cell{line-height:36px}.el-table th>div,.token-index .el-table .cell{padding-top:0;padding-bottom:0}",""])},function(e,t,n){t=e.exports=n(2)(void 0),t.push([e.i,".edit-save-span{color:#fff;font-size:15px;font-weight:bolder;padding:15px 40px}.edit-save-span i{color:red}.edit-save-span span{color:#32cd32}",""])},function(e,t,n){t=e.exports=n(2)(void 0),t.push([e.i,".export-template{margin:10px}.export-template .el-transfer-panel{width:250px}",""])},function(e,t,n){t=e.exports=n(2)(void 0),t.push([e.i,"",""])},function(e,t,n){t=e.exports=n(2)(void 0),t.push([e.i,".condition-add[data-v-254d07b9]{margin:10px 5px}.condition-add .warning i[data-v-254d07b9]{color:red}",""])},function(e,t,n){t=e.exports=n(2)(void 0),t.push([e.i,".plugin-version .el-button+.el-button{margin-left:0}",""])},function(e,t,n){t=e.exports=n(2)(void 0),t.push([e.i,".target-group-transfer .el-transfer-panel{min-width:43%}",""])},function(e,t,n){t=e.exports=n(2)(void 0),t.push([e.i,"",""])},function(e,t,n){t=e.exports=n(2)(void 0),t.push([e.i,".condition-add[data-v-2eb1c088]{margin:10px 5px}.condition-add .warning i[data-v-2eb1c088]{color:red}",""])},function(e,t,n){t=e.exports=n(2)(void 0),t.push([e.i,".clusters-select{width:100%}",""])},function(e,t,n){t=e.exports=n(2)(void 0),t.push([e.i,".login-box{margin:15% auto;width:400px;border:1px solid gray;border-radius:6px}.login-box .login-header{color:#eee;padding:10px;border-bottom:1px solid gray}.login-box .login-body{padding:20px 40px}.login-box .login-body .el-row{margin-bottom:20px}.login-box .login-body .el-row:last-child{margin-bottom:0}.login-box .login-body .msg-error{position:relative;background:#ffebeb;color:#e4393c;border:1px solid #faccc6;line-height:15px;font-size:13px;padding:3px 10px;margin-bottom:10px}.login-box .login-body .msg-error i{margin-right:5px}",""])},function(e,t,n){t=e.exports=n(2)(void 0),t.push([e.i,".template_content{display:table;width:100%}.template_tree{padding-right:30px;display:table-cell;width:245px}.template-warning{text-align:center;color:red;font-size:larger;font-weight:bolder;display:table-cell;vertical-align:middle}.template-warning i{padding-right:10px}.template-body{display:table-cell}",""])},function(e,t,n){t=e.exports=n(2)(void 0),t.push([e.i,".template-test-upload .el-table--enable-row-hover .el-table__body tr:hover>td{background-color:transparent}",""])},function(e,t,n){t=e.exports=n(2)(void 0),t.push([e.i,"",""])},function(e,t,n){t=e.exports=n(2)(void 0),t.push([e.i,".target-group-item{margin-right:5px}.condition-table+.condition-table{border-top:1px solid gray}.condition-table span{white-space:nowrap}.route-tag{margin-bottom:5px}.route-weight{color:#7fffd4;font-size:12px;margin-left:3px}",""])},function(e,t,n){t=e.exports=n(2)(void 0),t.push([e.i,".index-timeout-retry[data-v-4ac0cba8]{margin:10px 0 20px;font-size:15px}.index-timeout-retry span[data-v-4ac0cba8]{color:#32cd32}",""])},function(e,t,n){t=e.exports=n(2)(void 0),t.push([e.i,".template-content .template-title{color:#fff;line-height:30px}.template-content .template-title .template-name{color:#32cd32;font-weight:700}.template-content .template-title .template-approving{color:red;margin-left:10px;font-weight:400}.template-content .template-title .template-approving a{color:red}.template-content .template-title .template-approving a:hover{color:rgba(255,0,0,.7)}.result-content .el-textarea__inner{background-color:#272822}.api-content{padding:5px;height:600px;overflow:auto;background-color:#222;color:#fff}.edit-title{color:#fff}.no-border{border:none}.template-edit-content{height:650px;width:100%;overflow-y:auto;float:left}.template-edit-and-version-content{height:650px;width:62%;overflow-y:auto;float:left}.template-history-version-content{position:relative;max-height:650px;width:38%;overflow-y:auto;float:left}.template-history-version-content table{font-size:10px}.template-history-version-content .el-table .cell{line-height:normal}.template-history-version-content .el-table tr:hover{cursor:pointer}.render-cluster{margin-left:15px}.render-cluster>span{font-size:16px}",""])},function(e,t,n){t=e.exports=n(2)(void 0),t.push([e.i,".target-group-item{margin-right:5px}.condition-table+.condition-table{border-top:1px solid gray}.condition-table span{white-space:nowrap}.route-tag{margin-bottom:5px}.route-weight{color:#7fffd4;font-size:12px;margin-left:3px}",""])},function(e,t,n){t=e.exports=n(2)(void 0),t.push([e.i,".schema-content{margin-bottom:10px}.schema-info-dialog .el-dialog__footer{padding:10px 20px 15px}",""])},function(e,t,n){t=e.exports=n(2)(void 0),t.push([e.i,"",""])},function(e,t,n){t=e.exports=n(2)(void 0),t.push([e.i,"",""])},function(e,t,n){t=e.exports=n(2)(void 0),t.push([e.i,".clusters-select{width:100%}",""])},function(e,t,n){t=e.exports=n(2)(void 0),t.push([e.i,".cluster_restart_setting[data-v-66714b9d],.cluster_restart_tab[data-v-66714b9d]{margin-bottom:10px}.cluster_restart_setting .el-button--text[data-v-66714b9d]:focus,.cluster_restart_setting .el-button--text[data-v-66714b9d]:hover{color:#fff}.cluster_restart_setting .el-table .cell[data-v-66714b9d],.el-table th>div[data-v-66714b9d]{padding-top:0;padding-bottom:0}",""])},function(e,t,n){t=e.exports=n(2)(void 0),t.push([e.i,".template-import-upload{margin:0 20px 20px}",""])},function(e,t,n){t=e.exports=n(2)(void 0),t.push([e.i,".my-container[data-v-6ba933be]{height:100%}",""])},function(e,t,n){t=e.exports=n(2)(void 0),t.push([e.i,".token-name-span{color:#32cd32;font-weight:700;margin-right:10px}.token-cluster{margin-top:5px;overflow:auto}.token-index{margin-top:5px}.title-span{font-size:14px;margin-right:10px}.token-cluster-tree{margin-top:10px;position:relative;overflow:auto}",""])},function(e,t,n){t=e.exports=n(2)(void 0),t.push([e.i,".plugin-upload{margin-left:50px}.plugin-upload-tooltip.el-tooltip__popper.is-dark{background:#333}.plugin-upload-warning{margin-left:50px;color:red}",""])},function(e,t,n){t=e.exports=n(2)(void 0),t.push([e.i,".data-source-content{margin:-10px 0 10px}.data-source-add{padding:5px}",""])},function(e,t,n){t=e.exports=n(2)(void 0),t.push([e.i,".template-test{margin:0 20px}.template-test .template-test-content{margin:0 0 20px}.template-test .template-test-content .template-test-tips{margin-top:5px;color:red;font-size:13px}.template-test .template-test-content .template-test-head{margin-bottom:10px;background-color:#222;height:25px;border-radius:4px;padding-left:5px;font-size:15px}.template-test-popper{background-color:#222;border:none}.template-test-popper .popper-button{float:left;padding:5px}",""])},function(e,t,n){t=e.exports=n(2)(void 0),t.push([e.i,".target-group-item[data-v-7ef147c0]{margin-bottom:15px}.target-group-item[data-v-7ef147c0]:hover{box-shadow:0 1px 20px #d1dbe5}.target-group-item .target-group-header[data-v-7ef147c0]{padding:10px;border:1px solid gray;height:25px;background-color:#373a3c}.target-group-item .target-group-header .title[data-v-7ef147c0]{background-color:#13ce66;border-radius:4px;padding:5px 10px}.target-group-item .target-group-content .el-tree[data-v-7ef147c0]{border:1px solid gray}",""])},function(e,t,n){t=e.exports=n(2)(void 0),t.push([e.i,".ins,.match,.text-diff span,ins{color:#fff}.ins,ins{background:#0a3}.del,del{color:#fff;background:#980000}.noselect{user-select:none}",""])},function(e,t,n){t=e.exports=n(2)(void 0),t.push([e.i,".text-diff[data-v-98624a8e]{display:block;padding:9.5px;margin:0 0 10px;font-size:13px;line-height:1.42857143;color:#333;word-break:break-all;word-wrap:break-word;background-color:#373a3c;border:1px solid gray;border-radius:4px;overflow:auto}",""])},function(e,t,n){t=e.exports=n(2)(void 0),t.push([e.i,".footer{position:fixed;bottom:0;width:100%}.footer p{text-align:center;color:hsla(0,0%,75%,.5);margin-top:0;margin-bottom:0;font-size:13px}",""])},function(e,t,n){t=e.exports=n(2)(void 0),t.push([e.i,".label-title[data-v-9e196880]{height:30px;line-height:30px;margin-bottom:5px;margin-left:5px}.label-title .span-title[data-v-9e196880]{color:#eee;font-size:13px;margin-right:5px;font-weight:700}.label-content[data-v-9e196880]{margin:0 15px 20px}.version-info-dialog .el-dialog__body[data-v-9e196880]{padding:10px 5px 10px 0}.version-info-dialog .el-dialog__footer[data-v-9e196880]{padding:10px 20px 0 0}.version-info-dialog .el-form-item[data-v-9e196880],.version-info-dialog form[data-v-9e196880]{margin-bottom:0}.red[data-v-9e196880]{color:red}.version-info-dialog .el-button--text[data-v-9e196880]{color:#eee}.el-button--text[data-v-9e196880]:hover,.version-info-dialog .el-button--text[data-v-9e196880]:focus{color:gray}.version-info-dialog .el-checkbox[data-v-9e196880]{color:#eee}",""])},function(e,t,n){t=e.exports=n(2)(void 0),t.push([e.i,".target-group-item[data-v-aeee314e]{margin-bottom:15px}.target-group-item[data-v-aeee314e]:hover{box-shadow:0 1px 20px #d1dbe5}.target-group-item .target-group-header[data-v-aeee314e]{padding:10px;border:1px solid gray;height:25px}.target-group-item .target-group-header .title[data-v-aeee314e]{background-color:#13ce66;border-radius:4px;padding:5px 10px}.target-group-item .target-group-content .el-tree[data-v-aeee314e]{height:200px;overflow:auto;border:1px solid gray}",""])},function(e,t,n){t=e.exports=n(2)(void 0),t.push([e.i,".token-table .el-table--enable-row-transition .el-table__body td{text-align:left}.token-warning{text-align:center;color:red;font-size:larger;font-weight:bolder;vertical-align:middle}.token-warning i{padding-right:10px}",""])},function(e,t,n){t=e.exports=n(2)(void 0),t.push([e.i,".navbar{width:100%;display:table}.navbar-title{display:table-cell;background-color:#373a3c;color:#fff;height:60px;line-height:60px;font-weight:700;width:260px}.navbar-title span img{float:left;padding:10px 10px 0 25px}.navbar-content{display:table-cell;vertical-align:middle}.navbar-content ul{background-color:#373a3c;border-radius:0}.logout-a-link{text-decoration:initial}",""])},function(e,t,n){t=e.exports=n(2)(void 0),t.push([e.i,".my-table-expand{font-size:0;padding-left:100px}.my-table-expand label{width:90px;color:#99a9bf}.my-table-expand .el-form-item{margin-right:0;margin-bottom:0;width:33.3333333%;text-align:left}.data-source-text{margin-right:8px}",""])},function(e,t,n){t=e.exports=n(2)(void 0),t.push([e.i,'.tm-body{background:#373a3c none repeat scroll 0 0;border-radius:4px;margin-left:5px;margin-right:5px}.tm-body:after{bottom:0;content:"";display:block;height:65%;left:146px;position:absolute;width:3px;z-index:0}.tm-items{list-style:outside none none;margin:0;padding:0;position:relative;font-size:14px}.tm-items:before{background-color:#eee;bottom:0;content:" ";left:127px;position:absolute;top:0;width:3px}.tm-items>li{margin:30px 0;min-height:65px;padding:0 0 0 190px;position:relative;z-index:1}.tm-items>li .tm-icon{background-color:#373a3c;border-color:#08c;border-radius:126px;color:#ccc;font-size:22px;height:25px;left:66px;line-height:25px;margin-left:50px;margin-top:-17px;padding-top:5px;position:absolute;text-align:center;top:50%;width:25px;z-index:2}.tm-items>li .tm-datetime{left:0;margin-left:3px;text-align:right}.tm-items>li .tm-datetime,.tm-items>li .tm-item{height:48px;margin-top:-17px;padding-top:5px;position:absolute;top:50%;width:100px;z-index:3}.tm-items>li .tm-item{color:#ccc;font-weight:700;left:150px;text-align:left}.tm-items>li .tm-timeline-box{left:140px;line-height:29px;margin-left:-30px;margin-top:-20px;position:absolute;text-align:center;top:50%;width:120px;z-index:2}.tm-items>li .tm-timeline-box .tm-timeline{background-color:#428bca;padding-left:2px;text-align:left}.tm-items>li .tm-ratio{line-height:29px;text-align:left}.tm-items>li .tm-box{background:#222 none repeat scroll 0 0;border:1px solid #222;border-radius:6px;margin-left:80px;margin-right:5px;min-height:65px;padding:10px 20px;position:relative}.tm-items>li .tm-box:after{border:none;border-color:transparent #222 transparent transparent;border-image:none;border-style:solid;border-width:8px;content:" ";height:0;margin-top:-8px;pointer-events:none;position:absolute;right:100%;top:50%;width:0;z-index:2}.tm-items>li .tm-box .tm-meta{margin:20px 0 0}',""])},function(e,t,n){t=e.exports=n(2)(void 0),t.push([e.i,".target-group[data-v-ed9f792e]{margin-top:10px}.target-group-null[data-v-ed9f792e]{text-align:center;border:1px solid gray;padding:10px;font-size:14px;color:#5e7382}",""])},function(e,t,n){t=e.exports=n(2)(void 0),t.push([e.i,".content{margin:0 20px 20px}.dynamic-pagination{padding-right:5px}.operation-content a{cursor:pointer}.operation-content .operation-content-fold{height:21px;overflow:hidden}.operation-content .operation-content-unfold{height:auto}.empty-operation{position:relative;text-align:center;height:60px;border:1px solid gray;margin-top:20px;line-height:60px;color:#5e7382;font-size:14px}",""])},function(e,t,n){t=e.exports=n(2)(void 0),t.push([e.i,".target-group[data-v-eee0a37c]{margin-top:10px}.target-group-null[data-v-eee0a37c]{text-align:center;border:1px solid gray;padding:10px;font-size:14px;color:#5e7382;background-color:#373a3c}",""])},function(e,t,n){t=e.exports=n(2)(void 0),t.push([e.i,".page-tab .el-tabs{background-color:#373a3c}",""])},,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){function i(e){return n(a(e))}function a(e){var t=o[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var o={"./af":111,"./af.js":111,"./ar":118,"./ar-dz":112,"./ar-dz.js":112,"./ar-kw":113,"./ar-kw.js":113,"./ar-ly":114,"./ar-ly.js":114,"./ar-ma":115,"./ar-ma.js":115,"./ar-sa":116,"./ar-sa.js":116,"./ar-tn":117,"./ar-tn.js":117,"./ar.js":118,"./az":119,"./az.js":119,"./be":120,"./be.js":120,"./bg":121,"./bg.js":121,"./bm":122,"./bm.js":122,"./bn":123,"./bn.js":123,"./bo":124,"./bo.js":124,"./br":125,"./br.js":125,"./bs":126,"./bs.js":126,"./ca":127,"./ca.js":127,"./cs":128,"./cs.js":128,"./cv":129,"./cv.js":129,"./cy":130,"./cy.js":130,"./da":131,"./da.js":131,"./de":134,"./de-at":132,"./de-at.js":132,"./de-ch":133,"./de-ch.js":133,"./de.js":134,"./dv":135,"./dv.js":135,"./el":136,"./el.js":136,"./en-SG":137,"./en-SG.js":137,"./en-au":138,"./en-au.js":138,"./en-ca":139,"./en-ca.js":139,"./en-gb":140,"./en-gb.js":140,"./en-ie":141,"./en-ie.js":141,"./en-il":142,"./en-il.js":142,"./en-nz":143,"./en-nz.js":143,"./eo":144,"./eo.js":144,"./es":147,"./es-do":145,"./es-do.js":145,"./es-us":146,"./es-us.js":146,"./es.js":147,"./et":148,"./et.js":148,"./eu":149,"./eu.js":149,"./fa":150,"./fa.js":150,"./fi":151,"./fi.js":151,"./fo":152,"./fo.js":152,"./fr":155,"./fr-ca":153,"./fr-ca.js":153,"./fr-ch":154,"./fr-ch.js":154,"./fr.js":155,"./fy":156,"./fy.js":156,"./ga":157,"./ga.js":157,"./gd":158,"./gd.js":158,"./gl":159,"./gl.js":159,"./gom-latn":160,"./gom-latn.js":160,"./gu":161,"./gu.js":161,"./he":162,"./he.js":162,"./hi":163,"./hi.js":163,"./hr":164,"./hr.js":164,"./hu":165,"./hu.js":165,"./hy-am":166,"./hy-am.js":166,"./id":167,"./id.js":167,"./is":168,"./is.js":168,"./it":170,"./it-ch":169,"./it-ch.js":169,"./it.js":170,"./ja":171,"./ja.js":171,"./jv":172,"./jv.js":172,"./ka":173,"./ka.js":173,"./kk":174,"./kk.js":174,"./km":175,"./km.js":175,"./kn":176,"./kn.js":176,"./ko":177,"./ko.js":177,"./ku":178,"./ku.js":178,"./ky":179,"./ky.js":179,"./lb":180,"./lb.js":180,"./lo":181,"./lo.js":181,"./lt":182,"./lt.js":182,"./lv":183,"./lv.js":183,"./me":184,"./me.js":184,"./mi":185,"./mi.js":185,"./mk":186,"./mk.js":186,"./ml":187,"./ml.js":187,"./mn":188,"./mn.js":188,"./mr":189,"./mr.js":189,"./ms":191,"./ms-my":190,"./ms-my.js":190,"./ms.js":191,"./mt":192,"./mt.js":192,"./my":193,"./my.js":193,"./nb":194,"./nb.js":194,"./ne":195,"./ne.js":195,"./nl":197,"./nl-be":196,"./nl-be.js":196,"./nl.js":197,"./nn":198,"./nn.js":198,"./pa-in":199,"./pa-in.js":199,"./pl":200,"./pl.js":200,"./pt":202,"./pt-br":201,"./pt-br.js":201,"./pt.js":202,"./ro":203,"./ro.js":203,"./ru":204,"./ru.js":204,"./sd":205,"./sd.js":205,"./se":206,"./se.js":206,"./si":207,"./si.js":207,"./sk":208,"./sk.js":208,"./sl":209,"./sl.js":209,"./sq":210,"./sq.js":210,"./sr":212,"./sr-cyrl":211,"./sr-cyrl.js":211,"./sr.js":212,"./ss":213,"./ss.js":213,"./sv":214,"./sv.js":214,"./sw":215,"./sw.js":215,"./ta":216,"./ta.js":216,"./te":217,"./te.js":217,"./tet":218,"./tet.js":218,"./tg":219,"./tg.js":219,"./th":220,"./th.js":220,"./tl-ph":221,"./tl-ph.js":221,"./tlh":222,"./tlh.js":222,"./tr":223,"./tr.js":223,"./tzl":224,"./tzl.js":224,"./tzm":226,"./tzm-latn":225,"./tzm-latn.js":225,"./tzm.js":226,"./ug-cn":227,"./ug-cn.js":227,"./uk":228,"./uk.js":228,"./ur":229,"./ur.js":229,"./uz":231,"./uz-latn":230,"./uz-latn.js":230,"./uz.js":231,"./vi":232,"./vi.js":232,"./x-pseudo":233,"./x-pseudo.js":233,"./yo":234,"./yo.js":234,"./zh-cn":235,"./zh-cn.js":235,"./zh-hk":236,"./zh-hk.js":236,"./zh-tw":237,"./zh-tw.js":237};i.keys=function(){return Object.keys(o)},i.resolve=a,e.exports=i,i.id=498},,,function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAADcklEQVRYR+1XXVLaUBT+Tqi8lsICandAwgLUFYgrEGYapm/qCoorKL51ks6IK1BWIC7AhK5AXQBp+qrlns69EAohITeh03E68AjnnO+73/mF8Mo/9Mr5YUtw0wz93wpW/E+7BiaHELRLxHUG6lIxAkbMNILBjwKlQWh+fSyqZCEFK36rYqB8QoyuDjAzesJ4Pg/Nfqhjv2iTm2DN7xwzc49AlTxgDA5B6Aame5HHLxfB6n2nS4TPeQDitsw4DxqOlvKzctGDq/l2C0yXetYZVsTtsen2dWJpKVjxP+6X2LhNCsjgJzD1hSGGofltKOsTeFM3hCEbRir+NslvQuJA2meR1CJY9ToPBOyuBuPBhF5aacWvmkmUT5PKgoHHwHI+bEyw5neaYFxn1VLFs/cMmo4ZwRiFlnsX+VS9Tp+A4xUyhKOx6dysI5mpYFJwBr4HlqPIyFlY4sklQPvLQDycUKkdzcCaZ98AdBizGYwtt1mYoExRics/4gEmZHyQwCqFXPaT0w/INAp6NmUJVHy7XmLyV2M9v1s3HxMVVOliaoLQjIPLpggsV9Vj9d7uEdHJOgWY+SJouKfK3rMfCfR+0V4+AoybWZMN4rGWCMpXGoxLAqn0JXctrgLLac0A/XW20obBo8ByTZ0HSVtBaIemO4qw5wTlKDGYrrM2xOKgrXkdzupC+fvYchSOzqCXG0cQH0UjSDmm1UeKhvPCrnn2EKC9tSleaKjUbk4IEM1JRbDm2berXZiWYv2UqRQv12BmSUSoUWlQkRUWvW7axTujeOEvgDwJeqmv6+K1JULcpjyy/wnGw7HlHkzLQ83B/mqq+W5CpdZ8DqYM/IzyuKKqZ2vLvjQeGL2g4ZxF36kmm+5fCEOMkvZs3mzJEUS6nZg4cpj7QcNt63RyZJOXJFXvO2HaxaEDrA5Rdc3wVTS/pnuZ9sFogXkYf4QuSWb8pOQdqUNN34YTlNbD5YFUUJ5DX/ThilnGSWoNbcYZTbtQPBSDzecVkZyt1NusrSWPkmgF/RMV8zyHGWdBw+nNd7FeTeSB2MSW78aWq+7LhWNBnuc73azzaRNYHV+5GoXx0o1uxJV7cHbV9NPWlw5IERt5ZwriVnzAp578C//OYqd8Efh0H3moAr9GaVd15n+Sv0snf7QtwfyaLXtsFdwquKkCm/r/Bsz2yXeA+vMzAAAAAElFTkSuQmCC"},function(e,t,n){var i=n(1)(n(298),n(636),null,null);e.exports=i.exports},function(e,t,n){n(675);var i=n(1)(null,n(617),"data-v-6ba933be",null);e.exports=i.exports},function(e,t,n){var i=n(1)(n(299),n(596),null,null);e.exports=i.exports},function(e,t,n){n(682),n(681);var i=n(1)(n(300),n(628),"data-v-98624a8e",null);e.exports=i.exports},function(e,t,n){n(687);var i=n(1)(n(301),n(637),null,null);e.exports=i.exports},function(e,t,n){n(650);var i=n(1)(n(302),n(576),"data-v-07add241",null);e.exports=i.exports},function(e,t,n){n(689);var i=n(1)(null,n(639),null,null);e.exports=i.exports},function(e,t,n){var i=n(1)(null,n(619),null,null);e.exports=i.exports},function(e,t,n){n(683);var i=n(1)(n(303),n(629),null,null);e.exports=i.exports},function(e,t,n){var i=n(1)(n(304),n(641),null,null);e.exports=i.exports},function(e,t,n){n(654);var i=n(1)(n(305),n(587),null,null);e.exports=i.exports},function(e,t,n){var i=n(1)(n(306),n(580),null,null);e.exports=i.exports},function(e,t,n){var i=n(1)(n(307),n(586),null,null);e.exports=i.exports},function(e,t,n){var i=n(1)(n(308),n(581),null,null);e.exports=i.exports},function(e,t,n){var i=n(1)(n(309),n(633),null,null);e.exports=i.exports},function(e,t,n){var i=n(1)(n(310),n(590),null,null);e.exports=i.exports},function(e,t,n){var i=n(1)(n(311),n(577),null,null);e.exports=i.exports},function(e,t,n){n(673);var i=n(1)(n(312),n(615),"data-v-66714b9d",null);e.exports=i.exports},function(e,t,n){n(657);var i=n(1)(n(313),n(591),null,null);e.exports=i.exports},function(e,t,n){var i=n(1)(n(314),n(579),null,null);e.exports=i.exports},function(e,t,n){n(655);var i=n(1)(n(315),n(588),"data-v-254d07b9",null);e.exports=i.exports},function(e,t,n){n(668);var i=n(1)(n(316),n(610),null,null);e.exports=i.exports},function(e,t,n){n(692);var i=n(1)(n(317),n(645),"data-v-eee0a37c",null);e.exports=i.exports},function(e,t,n){var i=n(1)(n(318),n(609),null,null);e.exports=i.exports},function(e,t,n){n(680);var i=n(1)(n(319),n(625),"data-v-7ef147c0",null);e.exports=i.exports},function(e,t,n){n(660);var i=n(1)(n(320),n(594),null,null);e.exports=i.exports},function(e,t,n){var i=n(1)(n(321),n(630),null,null);e.exports=i.exports},function(e,t,n){n(691);var i=n(1)(n(322),n(644),null,null);e.exports=i.exports},function(e,t,n){var i=n(1)(n(323),n(595),null,null);e.exports=i.exports},function(e,t,n){var i=n(1)(n(324),n(602),null,null);e.exports=i.exports},function(e,t,n){var i=n(1)(n(325),n(647),null,null);e.exports=i.exports},function(e,t,n){var i=n(1)(n(326),n(627),null,null);e.exports=i.exports},function(e,t,n){var i=n(1)(n(327),n(640),null,null);e.exports=i.exports},function(e,t,n){n(693);var i=n(1)(n(328),n(646),null,null);e.exports=i.exports},function(e,t,n){n(649);var i=n(1)(n(329),n(575),null,null);e.exports=i.exports},function(e,t,n){var i=n(1)(n(330),n(598),null,null);e.exports=i.exports},function(e,t,n){n(659);var i=n(1)(n(331),n(593),"data-v-2eb1c088",null);e.exports=i.exports},function(e,t,n){n(665);var i=n(1)(n(332),n(605),null,null);e.exports=i.exports},function(e,t,n){n(690);var i=n(1)(n(333),n(643),"data-v-ed9f792e",null);e.exports=i.exports},function(e,t,n){var i=n(1)(n(334),n(574),null,null);e.exports=i.exports},function(e,t,n){n(685);var i=n(1)(n(335),n(632),"data-v-aeee314e",null);e.exports=i.exports},function(e,t,n){var i=n(1)(n(336),n(601),null,null);e.exports=i.exports},function(e,t,n){n(664);var i=n(1)(n(337),n(604),null,null);e.exports=i.exports},function(e,t,n){n(666);var i=n(1)(n(338),n(606),"data-v-4ac0cba8",null);e.exports=i.exports},function(e,t,n){n(667);var i=n(1)(n(339),n(608),null,null);e.exports=i.exports},function(e,t,n){n(652);var i=n(1)(n(340),n(583),null,null);e.exports=i.exports},function(e,t,n){n(679);var i=n(1)(n(341),n(624),null,null);e.exports=i.exports},function(e,t,n){var i=n(1)(n(342),n(626),null,null);e.exports=i.exports},function(e,t,n){var i=n(1)(n(343),n(635),null,null);e.exports=i.exports},function(e,t,n){n(663);var i=n(1)(n(344),n(603),null,null);e.exports=i.exports},function(e,t,n){n(653);var i=n(1)(n(345),n(584),null,null);e.exports=i.exports},function(e,t,n){n(674);var i=n(1)(n(346),n(616),null,null);e.exports=i.exports},function(e,t,n){n(662);var i=n(1)(n(347),n(600),null,null);e.exports=i.exports},function(e,t,n){n(669);var i=n(1)(n(348),n(611),null,null);e.exports=i.exports},function(e,t,n){var i=n(1)(n(349),n(623),null,null);e.exports=i.exports},function(e,t,n){n(684);var i=n(1)(n(350),n(631),"data-v-9e196880",null);e.exports=i.exports},function(e,t,n){var i=n(1)(n(351),n(607),null,null);e.exports=i.exports},function(e,t,n){var i=n(1)(n(352),n(642),null,null);e.exports=i.exports},function(e,t,n){n(671);var i=n(1)(n(353),n(613),null,null);e.exports=i.exports},function(e,t,n){n(678);var i=n(1)(n(354),n(622),null,null);e.exports=i.exports},function(e,t,n){n(672);var i=n(1)(n(355),n(614),null,null);e.exports=i.exports},function(e,t,n){n(688);var i=n(1)(n(356),n(638),null,null);e.exports=i.exports},function(e,t,n){var i=n(1)(n(357),n(620),null,null);e.exports=i.exports},function(e,t,n){var i=n(1)(n(358),n(585),null,null);e.exports=i.exports},function(e,t,n){var i=n(1)(n(359),n(582),null,null);e.exports=i.exports},function(e,t,n){n(677);var i=n(1)(n(360),n(621),null,null);e.exports=i.exports},function(e,t,n){n(656);var i=n(1)(n(361),n(589),null,null);e.exports=i.exports},function(e,t,n){n(658);var i=n(1)(n(362),n(592),null,null);e.exports=i.exports},function(e,t,n){n(676);var i=n(1)(n(363),n(618),null,null);e.exports=i.exports},function(e,t,n){n(651);var i=n(1)(n(364),n(578),null,null);e.exports=i.exports},function(e,t,n){n(670);var i=n(1)(n(365),n(612),null,null);e.exports=i.exports},function(e,t,n){n(686);var i=n(1)(n(366),n(634),null,null);e.exports=i.exports},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{title:e.targetGroupInfoTitle,"before-close":e.closeDialog,"element-loading-text":"请稍等···"},model:{value:e.isVisible,callback:function(t){e.isVisible=t},expression:"isVisible"}},[n("el-form",{ref:"targetGroupInfo",attrs:{model:e.targetGroupInfo,rules:e.rules,"label-width":"130px"}},[n("el-row",[n("el-col",{attrs:{span:23}},[n("el-form-item",{attrs:{prop:"name",label:"节点集名称"}},[n("el-input",{model:{value:e.targetGroupInfo.name,callback:function(t){e.targetGroupInfo.name=t},expression:"targetGroupInfo.name"}})],1)],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:23}},[n("el-form-item",{attrs:{prop:"clusterLevel",label:"节点集属性"}},[n("el-select",{staticStyle:{width:"100%"},model:{value:e.targetGroupInfo.clusterLevel,callback:function(t){e.targetGroupInfo.clusterLevel=t},expression:"targetGroupInfo.clusterLevel"}},e._l(e.attrs,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1)],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",slot:"footer"},[n("el-button",{on:{click:function(t){e.closeDialog()}}},[e._v("取消")]),e._v(" "),n("el-button",{attrs:{type:"confirm"},on:{click:function(t){e.submitInfo()}}},[e._v("保存")])],1)],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:e.conditionInfoTitle,size:"large","before-close":e.closeDialog},model:{value:e.isVisible,callback:function(t){e.isVisible=t},expression:"isVisible"}},[n("el-form",{ref:"conditionInfo",attrs:{model:e.conditionInfo,rules:e.rules,"label-width":"120px"}},[n("el-row",{attrs:{gutter:30}},[n("el-col",{attrs:{span:10}},[n("el-form-item",{attrs:{prop:"name",label:"规则名称"}},[n("el-input",{attrs:{disabled:e.isEditable},model:{value:e.conditionInfo.name,callback:function(t){e.conditionInfo.name=t},expression:"conditionInfo.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"优先级",prop:"priority"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"优先于选中规则"},model:{value:e.conditionInfo.priority,callback:function(t){e.conditionInfo.priority=t},expression:"conditionInfo.priority"}},e._l(e.alternativeConditions,function(e){return n("el-option",{key:e,attrs:{label:e,value:e}})}))],1),e._v(" "),n("el-form-item",{attrs:{label:"Preference",prop:"preference"}},[n("el-select",{attrs:{filterable:"","allow-create":""},model:{value:e.conditionInfo.preference,callback:function(t){e.conditionInfo.preference=t},expression:"conditionInfo.preference"}},[n("el-option",{attrs:{label:"无",value:""}}),e._v(" "),e._l(e.preferenceList,function(e){return n("el-option",{key:e,attrs:{label:e,value:e}})})],2),e._v(" "),n("span",{staticClass:"warning"},[n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"right"}},[n("div",{slot:"content"},[e._v("具体参考Elasticsearch关于Preference相关文档\n                                "),n("br"),e._v("示例：\n                                "),n("br"),e._v("_primary：只选择primary分片查询\n                                "),n("br"),e._v("_primary_first：优先选择primary分片查询\n                                "),n("br"),e._v("_replica：只选择replica分片查询\n                                "),n("br"),e._v("_replica_first：优先选择replica分片查询\n                                "),n("br"),e._v("_only_local：只查询本地节点\n                                "),n("br"),e._v("_local：优先查询本地节点\n                                "),n("br"),e._v("_prefer_nodes:abc,xyz：优先查询节点id为abc和xyz的节点\n                                "),n("br"),e._v("_shards:2,3：只查询第2，3组分片\n                            ")]),e._v(" "),n("i",{staticClass:"fa fa-info-circle"})])],1)],1),e._v(" "),n("el-form-item",{attrs:{label:"是否启用",prop:"enable"}},[n("div",{staticClass:"my-switch"},[n("el-switch",{model:{value:e.conditionInfo.enable,callback:function(t){e.conditionInfo.enable=t},expression:"conditionInfo.enable"}})],1)]),e._v(" "),e.conditionInfo.conditions.length>1?n("el-form-item",{attrs:{prop:"conditionRelation",label:"条件关系"}},[n("div",{staticClass:"my-switch"},[n("el-select",{staticStyle:{width:"100%"},model:{value:e.conditionInfo.conditionRelation,callback:function(t){e.conditionInfo.conditionRelation=t},expression:"conditionInfo.conditionRelation"}},e._l(e.conditionRelations,function(e){return n("el-option",{key:e,attrs:{label:e,value:e}})}))],1)]):e._e()],1),e._v(" "),n("el-col",{attrs:{span:14}},[n("el-form-item",{attrs:{prop:"",label:"","label-width":"0px"}},[n("div",{staticClass:"target-group-transfer"},[n("el-transfer",{ref:"targetGroupTransfer",attrs:{"render-content":e.renderFunc,titles:["所有节点集","应用"],data:e.routingTargetGroups,props:e.defaultProps},on:{change:e.handleChange},model:{value:e.conditionInfo.targetGroupsId,callback:function(t){e.conditionInfo.targetGroupsId=t},expression:"conditionInfo.targetGroupsId"}})],1)])],1)],1)],1),e._v(" "),n("conditions",{ref:"conditions",attrs:{conditions:e.conditionInfo.conditions}}),e._v(" "),n("div",{staticClass:"dialog-footer",slot:"footer"},[n("el-button",{on:{click:function(t){e.closeDialog()}}},[e._v("取消")]),e._v(" "),n("el-button",{attrs:{type:"confirm"},on:{click:function(t){e.submitInfo()}}},[e._v("保存")])],1)],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"panel",class:e.panelType},[n("div",{staticClass:"panel-content-title"},[e._t("title")],2),e._v(" "),n("div",{staticClass:"panel-content-body"},[e._t("content")],2)])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page-content"},[n("div",{staticClass:"my-breadcrumb"},[n("el-breadcrumb",{staticClass:"my-breadcrumb-content",attrs:{separator:"/"}},[n("el-breadcrumb-item",[n("i",{staticClass:"fa fa-home"}),e._v("ES集群管理")])],1)],1),e._v(" "),n("div",{staticClass:"data-table-filter"},[n("div",{staticClass:"pull-left"},[n("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[n("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{type:"text"}}),e._v(" "),n("el-form-item",{attrs:{label:""}},[n("el-input",{attrs:{placeholder:"请搜索域名"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13))return null;e.toPage(t)}},model:{value:e.clusterIdForSearch,callback:function(t){e.clusterIdForSearch=t},expression:"clusterIdForSearch"}})],1),e._v(" "),n("el-form-item",{staticClass:"filter-search"},[n("el-button",{attrs:{type:"primary",icon:"search"},on:{click:e.toPage}},[e._v("查询")])],1)],1)],1),e._v(" "),e.isAllPrivilege?n("div",{staticClass:"pull-right"},[n("el-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.handleAdd}},[e._v("新增ES集群")])],1):e._e()]),e._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.clusterList.list,border:"","element-loading-text":"请稍等···"}},[n("el-table-column",{attrs:{label:"域名","min-width":"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[!t.row.hasPrivilege||t.row.logicalCluster?n("div",[e._v(e._s(t.row.clusterId))]):n("div",{staticClass:"my-a-link"},[n("router-link",{attrs:{tag:"a",to:{path:"cluster_detail",query:{clusterId:t.row.clusterId}}}},[e._v(e._s(t.row.clusterId))])],1)]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"集群类型",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("clusterType")(t.row.logicalCluster)))]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"物理集群"},scopedSlots:e._u([{key:"default",fn:function(t){return[""===t.row.realClusters?n("div",[e._v("-")]):e._l(e.getPhysicalsClusterArr(t.row.realClusters),function(t){return n("div",{key:t.id,staticClass:"my-a-link"},[n("router-link",{attrs:{tag:"a",to:{path:"cluster_detail",query:{clusterId:t.clusterId}}}},[e._v(e._s(t.clusterId))])],1)})]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"描述",prop:"description","show-overflow-tooltip":""}}),e._v(" "),n("el-table-column",{attrs:{label:"HTTP地址",width:"170px"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.httpAddress?n("div",[n("el-popover",{attrs:{trigger:"hover",placement:"left"}},[e._l(e.$array.strToArray(t.row.httpAddress),function(t){return n("div",{key:t},[e._v(e._s(t))])}),e._v(" "),n("div",{slot:"reference"},[e._v("\n                          "+e._s(e.$array.strToArray(t.row.httpAddress)[0])+"\n                          "),e.$array.strToArray(t.row.httpAddress).length>1?n("span",[e._v("...")]):e._e()])],2)],1):n("div",[e._v("-")])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"CLIENT地址",width:"170px"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.clientAddress?n("div",[n("el-popover",{attrs:{trigger:"hover",placement:"right"}},[e._l(e.$array.strToArray(t.row.clientAddress),function(t){return n("div",{key:t},[e._v(e._s(t))])}),e._v(" "),n("div",{slot:"reference"},[e._v("\n                          "+e._s(e.$array.strToArray(t.row.clientAddress)[0])+"\n                          "),e.$array.strToArray(t.row.clientAddress).length>1?n("span",[e._v("...")]):e._e()])],2)],1):n("div",[e._v("-")])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"绑定代理集群"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.accessiblePs?e._l(e.$array.strToArray(t.row.accessiblePs),function(t){return n("div",{key:t},[e._v("\n                    "+e._s(t)+"\n                ")])}):n("div",[e._v("-")])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-dropdown",{attrs:{trigger:"click"}},[n("span",{staticClass:"el-dropdown-link"},[e._v("\n                    操作"),n("i",{staticClass:"el-icon-caret-bottom el-icon--right"})]),e._v(" "),n("el-dropdown-menu",{staticClass:"dropdown-operation",slot:"dropdown"},[t.row.hasPrivilege?n("el-dropdown-item",[n("a",{on:{click:function(n){e.handleEdit(t.row)}}},[n("span",[n("i",{staticClass:"fa fa-pencil-square-o"}),e._v("编辑")])])]):e._e(),e._v(" "),t.row.hasPrivilege&&!t.row.logicalCluster?n("el-dropdown-item",[n("a",{on:{click:function(n){e.handleRouteSetting(t.row)}}},[n("span",[n("i",{staticClass:"fa fa-cog"}),e._v("路由配置")])])]):e._e(),e._v(" "),t.row.hasPrivilege&&!t.row.logicalCluster?n("el-dropdown-item",[n("a",{on:{click:function(n){e.handleManage(t.$index,t.row)}}},[n("span",[n("i",{staticClass:"fa fa-bars"}),e._v("管理")])])]):e._e(),e._v(" "),t.row.hasPrivilege&&!t.row.logicalCluster?n("el-dropdown-item",[n("a",{on:{click:function(n){e.handleRestart(t.row)}}},[n("span",[n("i",{staticClass:"fa fa-undo"}),e._v("重启")])])]):e._e(),e._v(" "),t.row.hasPrivilege?n("el-dropdown-item",[n("a",{on:{click:function(n){e.handleDelete(t.row)}}},[n("span",[n("i",{staticClass:"fa fa-trash"}),e._v("删除")])])]):e._e()],1)],1)]}}])})],1),e._v(" "),0!=e.clusterList.total?n("div",{staticClass:"my-pagination"},[n("el-pagination",{attrs:{layout:"prev, pager, next, jumper",total:e.clusterList.total,"page-size":e.pageSize,"current-page":e.currentPage},on:{"current-change":e.changePage}})],1):e._e(),e._v(" "),e.isClusterInfoVisible?n("div",[n("cluster-info-dialog",{attrs:{"cluster-operation":e.clusterOperation,"cluster-info-title":e.clusterInfoTitle,"cluster-info":e.clusterInfo,"all-physicals":e.allPhysicals,"all-pallas-searchs":e.allPallasSearchs},on:{"close-dialog":e.closeDialog,"operate-close-dialog":e.operateCloseDialog}})],1):e._e()],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"token-index"},[0!==Object.keys(e.tokenClusterInfo).length?n("div",[n("div",[n("el-button",{attrs:{size:"small",type:"success"},on:{click:e.handleUpdate}},[e._v("更新授权")]),e._v(" "),n("el-button",{attrs:{size:"small",type:"danger"},on:{click:e.handleReset}},[e._v("移除授权")])],1),e._v(" "),n("div",{staticClass:"mrg-top-10"},[n("span",{staticClass:"title-span"},[e._v("集群权限:")]),e._v(" "),n("el-radio-group",{attrs:{size:"small"},model:{value:e.tokenClusterInfo.clusterPrivilege,callback:function(t){e.tokenClusterInfo.clusterPrivilege=t},expression:"tokenClusterInfo.clusterPrivilege"}},[n("el-radio-button",{attrs:{label:""}},[e._v("无")]),e._v(" "),n("el-radio-button",{attrs:{label:"ReadOnly"}},[e._v("只读")]),e._v(" "),n("el-radio-button",{attrs:{label:"Write"}},[e._v("修改")])],1)],1)]):n("div",{staticStyle:{height:"62px"}}),e._v(" "),n("div",{staticClass:"mrg-top-10"},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tokenClusterInfo.myIndexPrivilegeArr,border:"",height:e.clusterTreeHeight.height}},[n("el-table-column",{attrs:{prop:"name",label:"索引"}}),e._v(" "),n("el-table-column",{attrs:{prop:"indexPrivilege",label:"权限"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-radio-group",{attrs:{size:"small"},model:{value:t.row.indexPrivilege,callback:function(e){t.row.indexPrivilege=e},expression:"scope.row.indexPrivilege"}},[n("el-radio-button",{attrs:{label:""}},[e._v("无")]),e._v(" "),n("el-radio-button",{attrs:{label:"ReadOnly"}},[e._v("只读")]),e._v(" "),n("el-radio-button",{attrs:{label:"Write"}},[e._v("修改")])],1)]}}])})],1)],1)])])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-form",{ref:"conditionItemForm",attrs:{model:e.conditionItem,rules:e.rules,"label-width":"120px"}},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"判断参数名",prop:"paramName"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"","allow-create":""},model:{value:e.conditionItem.paramName,callback:function(t){e.conditionItem.paramName=t},expression:"conditionItem.paramName"}},e._l(e.paramNames,function(e){return n("el-option",{key:e,attrs:{label:e,value:e}})}))],1)],1),e._v(" "),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"判断运算",prop:"exprOp"}},[n("el-select",{staticStyle:{width:"100%"},model:{value:e.conditionItem.exprOp,callback:function(t){e.conditionItem.exprOp=t},expression:"conditionItem.exprOp"}},e._l(e.exprOps,function(e){return n("el-option",{key:e,attrs:{label:e,value:e}})}))],1)],1),e._v(" "),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"判断值",prop:"paramValue"}},[n("el-input",{attrs:{placeholder:"多个判断值请以 , 分隔"},model:{value:e.conditionItem.paramValue,callback:function(t){e.conditionItem.paramValue=t},expression:"conditionItem.paramValue"}})],1)],1)],1)],1)],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page-content"},[n("div",{staticClass:"my-breadcrumb"},[n("el-breadcrumb",{staticClass:"my-breadcrumb-content",attrs:{separator:"/"}},[n("el-breadcrumb-item",[n("i",{staticClass:"fa fa-home"}),e._v("模板变更")])],1)],1),e._v(" "),n("div",{staticClass:"data-table-filter"},[n("div",{staticClass:"pull-left"},[n("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[n("el-form-item",{attrs:{label:""}},[n("el-select",{attrs:{clearable:""},on:{change:e.toPage},model:{value:e.selectedCluster,callback:function(t){e.selectedCluster=t},expression:"selectedCluster"}},[n("el-option",{attrs:{label:"全部集群",value:""}}),e._v(" "),e._l(e.clusters,function(t){return n("el-option-group",{key:t.label,attrs:{label:t.label}},e._l(t.options,function(e){return n("el-option",{key:e.id,attrs:{label:e.clusterId,value:e.clusterId}})}))})],2)],1),e._v(" "),n("el-form-item",{attrs:{label:""}},[n("el-select",{on:{change:e.toPage},model:{value:e.selectedState,callback:function(t){e.selectedState=t},expression:"selectedState"}},[n("el-option",{attrs:{label:"全部状态",value:""}}),e._v(" "),e._l(e.states,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})],2)],1),e._v(" "),n("el-form-item",{attrs:{label:""}},[n("el-input",{attrs:{placeholder:"请搜索索引或模板"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13))return null;e.toPage(t)}},model:{value:e.conditionForSearch,callback:function(t){e.conditionForSearch=t},expression:"conditionForSearch"}})],1),e._v(" "),n("el-form-item",{staticClass:"filter-search"},[n("el-button",{attrs:{type:"primary",icon:"search"},on:{click:e.toPage}},[e._v("查询")])],1)],1)],1),e._v(" "),e.isAllPrivilege?n("div",{staticClass:"pull-right"},[n("el-button",{attrs:{type:"primary"},on:{click:e.handleApproveManage}},[n("i",{staticClass:"fa fa-check-square-o"}),e._v("模板审批")])],1):e._e()]),e._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.applyList,border:"","element-loading-text":"请稍等···"}},[n("el-table-column",{attrs:{prop:"id",label:"审批ID",width:"60px"}}),e._v(" "),n("el-table-column",{attrs:{prop:"title",label:"标题",width:"80px","show-overflow-tooltip":""}}),e._v(" "),n("el-table-column",{attrs:{label:"索引名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",{staticClass:"my-a-link"},[n("router-link",{attrs:{tag:"a",to:{path:"index_detail",query:{indexId:t.row.indexId,indexName:t.row.indexName}}}},[e._v(e._s(t.row.indexName))])],1)]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"templateName",label:"模板名称"}}),e._v(" "),n("el-table-column",{attrs:{prop:"clusterId",label:"所属集群"}}),e._v(" "),n("el-table-column",{attrs:{prop:"approveState",label:"当前状态",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("translateStat")(t.row.approveState)))]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"applyUser",label:"提交人",width:"80px"}}),e._v(" "),n("el-table-column",{attrs:{label:"提交时间",width:"160px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDate")(t.row.createTime)))]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"审批人",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.approveState||2===t.row.approveState?n("span",[e._v(e._s(t.row.approveUser))]):n("span",[e._v("-")])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"审批时间",width:"160px"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.approveState||2===t.row.approveState?n("span",[e._v(e._s(e._f("formatDate")(t.row.approveTime)))]):n("span",[e._v("-")])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作",width:"70px"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",{directives:[{name:"show",rawName:"v-show",value:0===t.row.approveState,expression:"scope.row.approveState === 0"}]},[n("el-tooltip",{attrs:{content:"查看",placement:"top"}},[n("el-button",{attrs:{type:"text"},on:{click:function(n){e.handleView(t.row)}}},[n("i",{staticClass:"fa fa-eye"})])],1),e._v(" "),n("el-tooltip",{attrs:{content:"取消",placement:"top"}},[n("el-button",{attrs:{type:"text"},on:{click:function(n){e.handleCancel(t.row)}}},[n("i",{staticClass:"fa fa-close"})])],1)],1)]}}])})],1),e._v(" "),0!=e.total?n("div",{staticClass:"my-pagination"},[n("el-pagination",{attrs:{layout:"prev, pager, next, jumper",total:e.total,"page-size":e.pageSize,"current-page":e.currentPage},on:{"current-change":e.changePage}})],1):e._e(),e._v(" "),e.isViewDialogVisible?n("div",[n("json-diff",{attrs:{"json-diff-info":e.jsonDiffInfo},on:{"close-dialog":e.closeViewContentDialog}})],1):e._e()],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("iframe",{staticClass:"cluster_dashboard",attrs:{src:e.clusterUrl,width:"100%",height:"70%",scrolling:"0",frameborder:"0"}})},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"my-tab-content"},[n("div",{staticClass:"data-table-filter"},[n("div",{staticClass:"pull-left"},[n("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[n("el-form-item",{attrs:{label:""}},[n("el-input",{attrs:{placeholder:"请搜索"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13))return null;e.init(t)}},model:{value:e.formSearch.keywords,callback:function(t){e.formSearch.keywords=t},expression:"formSearch.keywords"}})],1),e._v(" "),n("el-form-item",{staticClass:"filter-search"},[n("el-button",{attrs:{type:"primary",icon:"search"},on:{click:e.init}},[e._v("查询")])],1)],1)],1),e._v(" "),e.allPrivilege?n("div",{staticClass:"pull-right"},[n("el-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.handleAdd}},[e._v("新增用户")])],1):e._e()]),e._v(" "),n("div",{staticClass:"content"},[[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.userList,border:"","element-loading-text":"请稍等···"}},[n("el-table-column",{attrs:{label:"登录名",prop:"username"}}),e._v(" "),n("el-table-column",{attrs:{label:"用户名",prop:"realName"}}),e._v(" "),n("el-table-column",{attrs:{label:"角色",prop:"roles"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.roles,function(t){return n("el-tag",{key:t.id,staticStyle:{"margin-right":"3px"}},[e._v(e._s(t.description))])})}}])}),e._v(" "),n("el-table-column",{attrs:{label:"邮箱",prop:"email"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.email||"-"))]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"创建时间",prop:"createTime"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDate")(t.row.createTime)))]}}])}),e._v(" "),e.allPrivilege?n("el-table-column",{attrs:{label:"操作",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-tooltip",{attrs:{content:"编辑",placement:"top"}},[n("el-button",{attrs:{type:"text"},on:{click:function(n){e.handleEdit(t.row)}}},[n("i",{staticClass:"fa fa-edit"})])],1),e._v(" "),t.row.username!==e.loginUser?n("el-tooltip",{attrs:{content:"删除",placement:"top"}},[n("el-button",{attrs:{type:"text"},on:{click:function(n){e.handleDelete(t.row)}}},[n("i",{staticClass:"fa fa-trash"})])],1):e._e()]}}])}):e._e()],1)],e._v(" "),0!=e.total?n("div",{staticClass:"my-pagination"},[n("el-pagination",{attrs:{layout:"prev, pager, next",total:e.total,"page-size":e.pageSize,"current-page":e.currentPage},on:{"current-change":e.changePage}})],1):e._e()],2),e._v(" "),e.isUserInfoVisible?n("div",[n("user-info-dialog",{attrs:{"roles-list":e.rolesList,"user-operation":e.userOperation,"user-info":e.userInfo},on:{"close-dialog":e.closeDialog,"user-info-success":e.userInfoSuccess}})],1):e._e()])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{title:"提交模板","before-close":e.handleClose,"element-loading-text":"请稍等···"},model:{value:e.isEditSaveVisible,callback:function(t){e.isEditSaveVisible=t},expression:"isEditSaveVisible"}},[n("el-form",{ref:"editSaveInfo",attrs:{model:e.editSaveInfo,rules:e.rules,"label-width":"120px"}},[n("div",[n("div",{staticClass:"edit-save-span"},[n("i",{staticClass:"el-icon-warning"}),e._v("\n                确定提交模板 "),n("span",[e._v(e._s(e.templateInfo.templateName))]),e._v(" 吗？\n            ")]),e._v(" "),n("el-row",[n("el-col",{attrs:{span:18}},[n("el-form-item",{attrs:{label:"修改描述",prop:"historyDesc"}},[n("el-input",{model:{value:e.editSaveInfo.historyDesc,callback:function(t){e.editSaveInfo.historyDesc=t},expression:"editSaveInfo.historyDesc"}})],1)],1)],1)],1)]),e._v(" "),n("div",{staticClass:"dialog-footer",slot:"footer"},[n("el-button",{on:{click:function(t){e.handleClose()}}},[e._v("取消")]),e._v(" "),n("el-button",{attrs:{type:"confirm"},on:{click:e.handleSubmit}},[e._v("确定")])],1)],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:"导出模板","before-close":e.closeDialog},model:{value:e.isTemplateExportVisible,callback:function(t){e.isTemplateExportVisible=t},expression:"isTemplateExportVisible"}},[n("div",{staticClass:"export-template"},[n("el-transfer",{attrs:{filterable:"",data:e.exportTemplateList,titles:["可选模板","已选模板"]},model:{value:e.templateSelected,callback:function(t){e.templateSelected=t},expression:"templateSelected"}})],1),e._v(" "),n("div",{staticClass:"dialog-footer",slot:"footer"},[n("el-button",{on:{click:function(t){e.closeDialog()}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"confirm"},on:{click:e.sumbitExportTemplate}},[e._v("确定")])],1)])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{title:e.userInfoTitle,visible:e.isVisible,"before-close":e.closeDialog,"element-loading-text":"请稍等···"},on:{"update:visible":function(t){e.isVisible=t}}},[n("el-form",{ref:"userInfo",attrs:{model:e.userInfo,rules:e.rules,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"登录名",prop:"username"}},[n("el-col",{attrs:{span:22}},[n("el-input",{attrs:{disabled:!e.isEditable},model:{value:e.userInfo.username,callback:function(t){e.userInfo.username=t},expression:"userInfo.username"}})],1)],1),e._v(" "),n("el-form-item",{attrs:{label:"用户名",prop:"realName"}},[n("el-col",{attrs:{span:22}},[n("el-input",{attrs:{disabled:!e.isEditable},model:{value:e.userInfo.realName,callback:function(t){e.userInfo.realName=t},expression:"userInfo.realName"}})],1)],1),e._v(" "),n("el-form-item",{attrs:{label:"密码",prop:"password"}},[n("el-col",{attrs:{span:22}},[n("el-input",{model:{value:e.userInfo.password,callback:function(t){e.userInfo.password=t},expression:"userInfo.password"}})],1)],1),e._v(" "),n("el-form-item",{attrs:{label:"邮箱",prop:"email",rules:[{type:"email",message:"请输入正确的邮箱地址",trigger:"blur,change"}]}},[n("el-col",{attrs:{span:22}},[n("el-input",{model:{value:e.userInfo.email,callback:function(t){e.userInfo.email=t},expression:"userInfo.email"}})],1)],1),e._v(" "),n("el-form-item",{attrs:{label:"角色",prop:"roleNames"}},[n("el-col",{attrs:{span:22}},[n("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",placeholder:"请选择"},model:{value:e.userInfo.roleNames,callback:function(t){e.userInfo.roleNames=t},expression:"userInfo.roleNames"}},e._l(e.rolesList,function(e){return n("el-option",{key:e.id,attrs:{label:e.roleName,value:e.roleName}})}))],1)],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",slot:"footer"},[n("el-button",{on:{click:function(t){e.closeDialog()}}},[e._v("取消")]),e._v(" "),n("el-button",{attrs:{type:"confirm"},on:{click:function(t){e.handleSubmit()}}},[e._v("确定")])],1)],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page-content"},[n("div",{staticClass:"my-breadcrumb"},[n("el-breadcrumb",{staticClass:"my-breadcrumb-content",attrs:{separator:"/"}},[n("el-breadcrumb-item",{attrs:{to:{name:"authority_manage"}}},[n("i",{staticClass:"fa fa-home"}),e._v("模板变更")]),e._v(" "),n("el-breadcrumb-item",[e._v("模板审批")])],1)],1),e._v(" "),n("div",{staticClass:"data-table-filter"},[n("div",{staticClass:"pull-left"},[n("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[n("el-form-item",{attrs:{label:""}},[n("el-select",{on:{change:e.toPage},model:{value:e.selectedState,callback:function(t){e.selectedState=t},expression:"selectedState"}},[n("el-option",{attrs:{label:"全部状态",value:""}}),e._v(" "),e._l(e.states,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})],2)],1),e._v(" "),n("el-form-item",{attrs:{label:""}},[n("el-input",{attrs:{placeholder:"输入索引,模板或提交人"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13))return null;e.toPage(t)}},model:{value:e.conditionForSearch,callback:function(t){e.conditionForSearch=t},expression:"conditionForSearch"}})],1),e._v(" "),n("el-form-item",{staticClass:"filter-search"},[n("el-button",{attrs:{type:"primary",icon:"search"},on:{click:e.toPage}},[e._v("查询")])],1)],1)],1),e._v(" "),n("div",{staticClass:"pull-right"},[n("el-button",{attrs:{type:"primary",icon:"circle-check"},on:{click:e.handleBatchApprove}},[e._v("批量处理")])],1)]),e._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.approveList,border:"","element-loading-text":"请稍等···"},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),n("el-table-column",{attrs:{prop:"id",label:"审批ID",width:"70px"}}),e._v(" "),n("el-table-column",{attrs:{prop:"title",label:"标题",width:"80px","show-overflow-tooltip":""}}),e._v(" "),n("el-table-column",{attrs:{label:"索引名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",{staticClass:"my-a-link"},[n("router-link",{attrs:{tag:"a",to:{path:"index_detail",query:{indexId:t.row.indexId,indexName:t.row.indexName}}}},[e._v(e._s(t.row.indexName))])],1)]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"templateName",label:"模板名称"}}),e._v(" "),n("el-table-column",{attrs:{prop:"clusterId",label:"所属集群"}}),e._v(" "),n("el-table-column",{attrs:{prop:"approveState",label:"当前状态",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("translateStat")(t.row.approveState)))]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"applyUser",label:"提交人",width:"80px"}}),e._v(" "),n("el-table-column",{attrs:{label:"提交时间",width:"160px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDate")(t.row.createTime)))]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"审批人",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.approveState||2===t.row.approveState?n("span",[e._v(e._s(t.row.approveUser))]):n("span",[e._v("-")])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"审批时间",width:"160px"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.approveState||2===t.row.approveState?n("span",[e._v(e._s(e._f("formatDate")(t.row.approveTime)))]):n("span",[e._v("-")])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作",width:"70px"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",{directives:[{name:"show",rawName:"v-show",value:0===t.row.approveState,expression:"scope.row.approveState === 0"}]},[n("el-tooltip",{attrs:{content:"查看",placement:"top"}},[n("el-button",{attrs:{type:"text"},on:{click:function(n){e.handleView(t.row)}}},[n("i",{staticClass:"fa fa-eye"})])],1),e._v(" "),n("el-tooltip",{attrs:{content:"处理",placement:"top"}},[n("el-button",{attrs:{type:"text"},on:{click:function(n){e.handleApprove(t.row)}}},[n("i",{staticClass:"fa fa-arrow-circle-right"})])],1)],1)]}}])})],1),e._v(" "),0!=e.total?n("div",{staticClass:"my-pagination"},[n("el-pagination",{attrs:{layout:"prev, pager, next, jumper",total:e.total,"page-size":e.pageSize,"current-page":e.currentPage},on:{"current-change":e.changePage}})],1):e._e(),e._v(" "),e.isApproveDialogVisible?n("div",[n("approve-dialog",{attrs:{"approve-states":e.approveStates,"approve-info":e.approveInfo},on:{"close-approve-dialog":e.closeApproveDialog,"approve-complete":e.approveComplete}})],1):e._e(),e._v(" "),e.isViewDialogVisible?n("div",[n("json-diff",{attrs:{"json-diff-info":e.jsonDiffInfo},on:{"close-dialog":e.closeViewContentDialog}})],1):e._e()],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{title:"审批处理","before-close":e.closeDialog,"element-loading-text":"请稍等···"},model:{value:e.isVisible,callback:function(t){e.isVisible=t},expression:"isVisible"}},[n("el-form",{ref:"approveInfo",attrs:{model:e.approveInfo,rules:e.rules,"label-width":"100px"}},[n("div",[n("el-row",[n("el-col",{attrs:{span:22}},[n("el-form-item",{attrs:{label:"审批",prop:"state"}},[n("el-select",{staticStyle:{width:"100%"},model:{value:e.approveInfo.state,callback:function(t){e.approveInfo.state=t},expression:"approveInfo.state"}},e._l(e.approveStates,function(e){return n("el-option",{key:e.value,attrs:{label:e.key,value:e.value}})}))],1)],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:22}},[n("el-form-item",{attrs:{label:"描述",prop:"note"}},[n("el-input",{attrs:{type:"textarea"},model:{value:e.approveInfo.note,callback:function(t){e.approveInfo.note=t},expression:"approveInfo.note"}})],1)],1)],1)],1)]),e._v(" "),n("div",{staticClass:"dialog-footer",slot:"footer"},[n("el-button",{on:{click:function(t){e.closeDialog()}}},[e._v("取消")]),e._v(" "),n("el-button",{attrs:{type:"confirm"},on:{click:function(t){e.submitSyncInfo()}}},[e._v("确定")])],1)],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"condition-add"},[n("el-button",{attrs:{size:"mini",icon:"plus"},on:{click:e.addConditionRelate}},[e._v("新增规则条件")]),e._v(" "),n("span",{staticClass:"warning"},[n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"若不增加规则条件，则会默认命中节点集",placement:"right"}},[n("i",{staticClass:"fa fa-info-circle"})])],1)],1),e._v(" "),e._l(e.conditions,function(t,i){return n("el-collapse",{key:i,model:{value:i,callback:function(e){i=e},expression:"index"}},[n("el-collapse-item",{attrs:{name:i}},[n("template",{slot:"title"},[n("span",{staticStyle:{"margin-right":"10px"}},[e._v("条件")]),e._v(" "),n("el-button",{attrs:{type:"danger",size:"mini",icon:"minus"},on:{click:function(n){n.stopPropagation(),e.deleteConditionRelate(t)}}})],1),e._v(" "),n("condition-item",{ref:"conditionItem",refInFor:!0,attrs:{"condition-item":t}})],2)],1)})],2)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page-content"},[n("div",{staticClass:"my-breadcrumb"},[n("el-breadcrumb",{staticClass:"my-breadcrumb-content",attrs:{separator:"/"}},[n("el-breadcrumb-item",[n("i",{staticClass:"fa fa-home"}),e._v("插件管理")])],1)],1),e._v(" "),n("div",{staticClass:"data-table-filter"},[n("div",{staticClass:"pull-left"},[n("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[n("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{type:"text"}}),e._v(" "),n("el-form-item",{attrs:{label:""}},[n("el-input",{attrs:{placeholder:"请搜索插件"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13))return null;e.toPage(t)}},model:{value:e.pluginNameForSearch,callback:function(t){e.pluginNameForSearch=t},expression:"pluginNameForSearch"}})],1),e._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary",icon:"search"},on:{click:e.toPage}},[e._v("查询")])],1),e._v(" "),n("el-form-item",{staticClass:"filter-search"},[n("el-button",{attrs:{type:"primary"},on:{click:e.refreshPage}},[n("i",{staticClass:"fa fa-refresh"}),e._v("刷新")])],1)],1)],1),e._v(" "),n("div",{staticClass:"pull-right"},[n("el-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.handleAdd}},[e._v("新增插件")])],1)]),e._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.pluginRuntimeList,border:"","element-loading-text":"请稍等···"}},[n("el-table-column",{attrs:{prop:"id",label:"升级ID",width:"80px"}}),e._v(" "),n("el-table-column",{attrs:{prop:"clusterId",label:"所属集群"}}),e._v(" "),n("el-table-column",{attrs:{prop:"pluginName",label:"运行插件"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",{staticClass:"my-a-link"},[n("router-link",{attrs:{tag:"a",to:{name:"plugin_upgrade",query:{pluginName:t.row.pluginName}}}},[e._v(e._s(t.row.pluginName))])],1)]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"pluginVersion",label:"插件版本",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(e.getPluginVersion(t.row.nodeStates),function(i){return n("div",{key:i,staticClass:"plugin-version"},[n("el-popover",{attrs:{trigger:"hover",placement:"right"}},[e._l(e.getNodesOfVersion(t.row.nodeStates,i),function(t){return n("div",{key:t},[e._v(e._s(t))])}),e._v(" "),n("el-button",{attrs:{type:"text"},slot:"reference"},[e._v(e._s(i))])],2)],1)})}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"pluginType",label:"插件类型",width:"130px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.pluginTypeMap[t.row.pluginType]))]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"更新时间",width:"190px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDate")(t.row.updateTime)))]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作",width:"70px"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.creatable?n("el-tooltip",{attrs:{content:"升级",placement:"top"}},[n("el-button",{attrs:{type:"text"},on:{click:function(n){e.handleUpgrade(t.row)}}},[n("i",{staticClass:"fa fa-arrow-circle-up"})])],1):e._e(),e._v(" "),e.isAllPrivilege&&t.row.creatable?n("el-tooltip",{attrs:{content:"移除",placement:"top"}},[n("el-button",{attrs:{type:"text"},on:{click:function(n){e.handleRemove(t.row)}}},[n("i",{staticClass:"fa fa-close"})])],1):e._e()]}}])})],1),e._v(" "),0!=e.total?n("div",{staticClass:"my-pagination"},[n("el-pagination",{attrs:{layout:"prev, pager, next, jumper",total:e.total,"page-size":e.pageSize,"current-page":e.currentPage},on:{"current-change":e.changePage}})],1):e._e(),e._v(" "),e.isPluginInfoDialogVisible?n("div",[n("plugin-info-dialog",{attrs:{"plugin-info":e.pluginInfo,"plugin-info-title":e.pluginInfoTitle,"plugin-info-operation":e.pluginInfoOperation},on:{"operate-close-dialog":e.operateCloseDialog,"close-dialog":e.closeDialog}})],1):e._e()],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{title:e.clusterInfoTitle,size:"small","before-close":e.closeDialog,"element-loading-text":"请稍等···"},model:{value:e.isClusterInfoVisible,callback:function(t){e.isClusterInfoVisible=t},expression:"isClusterInfoVisible"}},[n("el-form",{ref:"clusterInfo",attrs:{model:e.clusterInfo,rules:e.rules,"label-width":"140px"}},[n("el-row",[n("el-col",{attrs:{span:22}},[n("el-form-item",{attrs:{prop:"clusterId",label:"域名",required:""}},[n("el-input",{attrs:{disabled:e.isEditable},model:{value:e.clusterInfo.clusterId,callback:function(t){e.clusterInfo.clusterId=t},expression:"clusterInfo.clusterId"}})],1)],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:22}},[n("el-form-item",{attrs:{prop:"logicalCluster",label:"集群类型"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{disabled:e.isEditable},model:{value:e.clusterInfo.logicalCluster,callback:function(t){e.clusterInfo.logicalCluster=t},expression:"clusterInfo.logicalCluster"}},[n("el-option",{attrs:{label:"物理集群",value:!1}}),e._v(" "),n("el-option",{attrs:{label:"逻辑集群",value:!0}})],1)],1)],1)],1),e._v(" "),e.clusterInfo.logicalCluster?n("el-row",[n("el-col",{attrs:{span:22}},[n("el-form-item",{attrs:{label:"物理集群",prop:"realClustersArr",required:""}},[n("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",filterable:""},model:{value:e.clusterInfo.realClustersArr,callback:function(t){e.clusterInfo.realClustersArr=t},expression:"clusterInfo.realClustersArr"}},e._l(e.allPhysicals,function(e){return n("el-option",{key:e.id,attrs:{label:e.clusterId,value:e.id}})}))],1)],1)],1):e._e(),e._v(" "),e.clusterInfo.logicalCluster?e._e():n("el-row",[n("el-col",{attrs:{span:22}},[n("el-form-item",{attrs:{label:"HTTP地址",prop:"httpAddress",required:""}},[n("el-input",{model:{value:e.clusterInfo.httpAddress,callback:function(t){e.clusterInfo.httpAddress=t},expression:"clusterInfo.httpAddress"}})],1)],1)],1),e._v(" "),e.clusterInfo.logicalCluster?e._e():n("el-row",[n("el-col",{attrs:{span:22}},[n("el-form-item",{attrs:{label:"ES client连接地址",prop:"clientAddress",required:""}},[n("el-input",{model:{value:e.clusterInfo.clientAddress,callback:function(t){e.clusterInfo.clientAddress=t},expression:"clusterInfo.clientAddress"}})],1)],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:22}},[n("el-form-item",{attrs:{label:"绑定代理集群",prop:"accessiblePs",required:""}},[n("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",filterable:""},model:{value:e.clusterInfo.accessiblePs,callback:function(t){e.clusterInfo.accessiblePs=t},expression:"clusterInfo.accessiblePs"}},e._l(e.allPallasSearchs,function(e){return n("el-option",{key:e,attrs:{label:e,value:e}})}))],1)],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:22}},[n("el-form-item",{attrs:{label:"描述",prop:"description"}},[n("el-input",{attrs:{type:"textarea"},model:{value:e.clusterInfo.description,callback:function(t){e.clusterInfo.description=t},expression:"clusterInfo.description"}})],1)],1)],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",slot:"footer"},[n("el-button",{on:{click:function(t){e.closeDialog()}}},[e._v("取消")]),e._v(" "),n("el-button",{attrs:{type:"confirm"},on:{click:function(t){e.submitClusterInfo()}}},[e._v("保存")])],1)],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:e.conditionInfoTitle,size:"large","before-close":e.closeDialog},model:{value:e.isVisible,callback:function(t){e.isVisible=t},expression:"isVisible"}},[n("el-form",{ref:"conditionInfo",attrs:{model:e.conditionInfo,rules:e.rules,"label-width":"120px"}},[n("el-row",{attrs:{gutter:30}},[n("el-col",{attrs:{span:10}},[n("el-form-item",{attrs:{prop:"name",label:"规则名称"}},[n("el-input",{attrs:{disabled:e.isEditable},model:{value:e.conditionInfo.name,callback:function(t){e.conditionInfo.name=t},expression:"conditionInfo.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"优先级",prop:"priority"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"优先于选中规则"},model:{value:e.conditionInfo.priority,callback:function(t){e.conditionInfo.priority=t},expression:"conditionInfo.priority"}},e._l(e.alternativeConditions,function(e){return n("el-option",{key:e,attrs:{label:e,value:e}})}))],1),e._v(" "),n("el-form-item",{attrs:{label:"是否启用",prop:"enable"}},[n("div",{staticClass:"my-switch"},[n("el-switch",{model:{value:e.conditionInfo.enable,callback:function(t){e.conditionInfo.enable=t},expression:"conditionInfo.enable"}})],1)]),e._v(" "),e.conditionInfo.conditions.length>1?n("el-form-item",{attrs:{prop:"conditionRelation",label:"条件关系"}},[n("div",{staticClass:"my-switch"},[n("el-select",{staticStyle:{width:"100%"},model:{value:e.conditionInfo.conditionRelation,callback:function(t){e.conditionInfo.conditionRelation=t},expression:"conditionInfo.conditionRelation"}},e._l(e.conditionRelations,function(e){return n("el-option",{key:e,attrs:{label:e,value:e}})}))],1)]):e._e()],1),e._v(" "),n("el-col",{attrs:{span:14}},[n("el-form-item",{attrs:{prop:"",label:"","label-width":"0px"}},[n("div",{staticClass:"target-group-transfer"},[n("el-transfer",{ref:"targetGroupTransfer",attrs:{"render-content":e.renderFunc,titles:["所有节点集","应用"],data:e.routingTargetGroups,props:e.defaultProps},on:{change:e.handleChange},model:{value:e.conditionInfo.targetGroupsId,callback:function(t){e.conditionInfo.targetGroupsId=t},expression:"conditionInfo.targetGroupsId"}})],1)])],1)],1)],1),e._v(" "),n("conditions",{ref:"conditions",attrs:{conditions:e.conditionInfo.conditions}}),e._v(" "),n("div",{staticClass:"dialog-footer",slot:"footer"},[n("el-button",{on:{click:function(t){e.closeDialog()}}},[e._v("取消")]),e._v(" "),n("el-button",{attrs:{type:"confirm"},on:{click:function(t){e.submitInfo()}}},[e._v("保存")])],1)],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page-content"},[n("div",{staticClass:"my-breadcrumb"},[n("el-breadcrumb",{staticClass:"my-breadcrumb-content",attrs:{separator:"/"}},[n("el-breadcrumb-item",{attrs:{to:{name:"plugin_manage"}}},[n("i",{staticClass:"fa fa-home"}),e._v("插件管理")]),e._v(" "),n("el-breadcrumb-item",[e._v(e._s(e.pluginName))])],1)],1),e._v(" "),n("div",{staticClass:"data-table-filter"},[n("div",{staticClass:"pull-left"},[n("el-button",{attrs:{type:"primary"},on:{click:e.refreshPage}},[n("i",{staticClass:"fa fa-refresh"}),e._v("刷新")])],1)]),e._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.pluginUpgradeList,border:"","element-loading-text":"请稍等···"}},[n("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-form",{staticClass:"my-table-expand",attrs:{"label-position":"left",inline:""}},[n("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"路径"}},[n("span",[e._v(e._s(t.row.packagePath)+";")])]),e._v(" "),3!==t.row.state&&4!==t.row.state?n("div",e._l(t.row.nodeStates,function(t){return n("div",{directives:[{name:"show",rawName:"v-show",value:""!==t.nodeIp,expression:"item.nodeIp !== ''"}],key:t.nodeIp},[n("el-form-item",{staticStyle:{width:"40%"},attrs:{label:"IP"}},[n("span",[e._v(e._s(t.nodeIp))])]),e._v(" "),n("el-form-item",{staticStyle:{width:"30%"},attrs:{label:"版本"}},[n("span",[e._v(e._s(t.pluginVersion))])]),e._v(" "),n("el-form-item",{staticStyle:{width:"30%"},attrs:{label:"状态"}},[n("span",[e._v(e._s(e._f("translateStat")(t.state)))])])],1)})):e._e()],1)]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"id",label:"ID",width:"60px"}}),e._v(" "),n("el-table-column",{attrs:{label:"所属集群","min-width":"135px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.isAllPrivilege?n("div",{staticClass:"my-a-link"},[n("router-link",{attrs:{tag:"a",to:{name:"cluster_detail",query:{clusterId:t.row.clusterId}}}},[e._v(e._s(t.row.clusterId))])],1):n("div",[e._v(e._s(t.row.clusterId))])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"note",label:"插件描述",width:"95px","show-overflow-tooltip":""}}),e._v(" "),n("el-table-column",{attrs:{prop:"pluginVersion",label:"插件版本"}}),e._v(" "),n("el-table-column",{attrs:{prop:"pluginType",label:"插件类型",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.pluginTypeMap[t.row.pluginType]))]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"applyUser",label:"申请人"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.applyUser||"-"))]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"approveUser",label:"审批人"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.approveUser||"-"))]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"状态",width:"90px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("translateStat")(t.row.state))+"\n            ")]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"更新时间",width:"160px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDate")(t.row.updateTime)))]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作",width:"130px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.isAllPrivilege?n("div",[1===t.row.state||5===t.row.state?n("el-tooltip",{attrs:{content:"开始下载",placement:"top"}},[n("el-button",{attrs:{type:"text"},on:{click:function(n){e.handlePlugin(t.row,"download","开始下载")}}},[n("i",{staticClass:"fa fa-download"})])],1):e._e(),e._v(" "),5===t.row.state?n("el-tooltip",{attrs:{content:"强制升级",placement:"top"}},[n("el-button",{attrs:{type:"text"},on:{click:function(n){e.handlePlugin(t.row,"upgrade","强制升级")}}},[n("i",{staticClass:"fa fa-arrow-up"})])],1):e._e(),e._v(" "),51===t.row.state?n("el-tooltip",{attrs:{content:"开始升级",placement:"top"}},[n("el-button",{attrs:{type:"text"},on:{click:function(n){e.handlePlugin(t.row,"upgrade","开始升级")}}},[n("i",{staticClass:"fa fa-arrow-circle-up"})])],1):e._e(),e._v(" "),61===t.row.state||5===t.row.state||51===t.row.state||6===t.row.state?n("el-tooltip",{attrs:{content:"标记完成",placement:"top"}},[n("el-button",{attrs:{type:"text"},on:{click:function(n){e.handlePlugin(t.row,"done","标记完成")}}},[n("i",{staticClass:"fa fa-check-circle"})])],1):e._e(),e._v(" "),1===t.row.state?n("el-tooltip",{attrs:{content:"审批不通过",placement:"top"}},[n("el-button",{attrs:{type:"text"},on:{click:function(n){e.handlePlugin(t.row,"deny","审批不通过")}}},[n("i",{staticClass:"fa fa-ban"})])],1):e._e(),e._v(" "),4===t.row.state?n("el-tooltip",{attrs:{content:"回滚",placement:"top"}},[n("el-button",{attrs:{type:"text"},on:{click:function(n){e.handleRollback(t.row)}}},[n("i",{staticClass:"fa fa-undo"})])],1):e._e(),e._v(" "),1===t.row.state?n("el-tooltip",{attrs:{content:"取消",placement:"top"}},[n("el-button",{attrs:{type:"text"},on:{click:function(n){e.handlePlugin(t.row,"recall","取消")}}},[n("i",{staticClass:"fa fa-close"})])],1):e._e(),e._v(" "),5===t.row.state||51===t.row.state||6===t.row.state?n("el-tooltip",{attrs:{content:"终止",placement:"top"}},[n("el-button",{attrs:{type:"text"},on:{click:function(n){e.handlePlugin(t.row,"stop","终止")}}},[n("i",{staticClass:"fa fa-stop-circle"})])],1):e._e()],1):n("div",[1===t.row.state?n("el-tooltip",{attrs:{content:"取消",placement:"top"}},[n("el-button",{attrs:{type:"text"},on:{click:function(n){e.handlePlugin(t.row,"recall","取消")}}},[n("i",{staticClass:"fa fa-close"})])],1):e._e()],1)]}}])})],1),e._v(" "),0!=e.total?n("div",{staticClass:"my-pagination"},[n("el-pagination",{attrs:{layout:"prev, pager, next, jumper",total:e.total,"page-size":e.pageSize,"current-page":e.currentPage},on:{"current-change":e.changePage}})],1):e._e()],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"condition-add"},[n("el-button",{attrs:{size:"mini",icon:"plus"},on:{click:e.addConditionRelate}},[e._v("新增规则条件")]),e._v(" "),n("span",{staticClass:"warning"},[n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"若不增加规则条件，则会默认命中节点集",placement:"right"}},[n("i",{staticClass:"fa fa-info-circle"})])],1)],1),e._v(" "),e._l(e.conditions,function(t,i){return n("el-collapse",{key:i,model:{value:i,callback:function(e){i=e},expression:"index"}},[n("el-collapse-item",{attrs:{name:i}},[n("template",{slot:"title"},[n("span",{staticStyle:{"margin-right":"10px"}},[e._v("条件")]),e._v(" "),n("el-button",{attrs:{type:"danger",size:"mini",icon:"minus"},on:{click:function(n){n.stopPropagation(),e.deleteConditionRelate(t)}}})],1),e._v(" "),n("condition-item",{ref:"conditionItem",refInFor:!0,attrs:{"condition-item":t}})],2)],1)})],2)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"index-info"},[n("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{title:e.crondeleteTitle,size:"large","before-close":e.closeDialog,"element-loading-text":"请稍等···"},model:{value:e.isCronDeleteVisible,callback:function(t){e.isCronDeleteVisible=t},expression:"isCronDeleteVisible"}},[n("el-form",{ref:"crondeleteInfo",attrs:{model:e.crondeleteInfo,rules:e.rules,"label-width":"150px"}},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:10}},[n("el-form-item",{attrs:{prop:"cron",label:"cron表达式"}},[n("el-input",{model:{value:e.crondeleteInfo.cron,callback:function(t){e.crondeleteInfo.cron=t},expression:"crondeleteInfo.cron"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:10}},[n("el-form-item",{attrs:{prop:"scrollSize",label:"每次删除多少"}},[n("el-input-number",{staticStyle:{width:"100%"},model:{value:e.crondeleteInfo.scrollSize,callback:function(t){e.crondeleteInfo.scrollSize=t},expression:"crondeleteInfo.scrollSize"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:10}},[n("el-form-item",{attrs:{label:"版本",prop:"versionId",required:""}},[n("el-select",{staticStyle:{width:"100%"},attrs:{clearable:""},model:{value:e.crondeleteInfo.versionId,callback:function(t){e.crondeleteInfo.versionId=t},expression:"crondeleteInfo.versionId"}},e._l(e.versionIdList,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:20}},[n("el-form-item",{attrs:{label:"delete by query dsl",prop:"dsl",required:""}},[n("el-input",{attrs:{type:"textarea",rows:10},model:{value:e.crondeleteInfo.dsl,callback:function(t){e.crondeleteInfo.dsl=t},expression:"crondeleteInfo.dsl"}})],1)],1)],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",slot:"footer"},[n("el-button",{on:{click:function(t){e.closeDialog()}}},[e._v("取消")]),e._v(" "),n("el-button",{attrs:{type:"confirm"},on:{click:function(t){e.submitUpsert()}}},[e._v("保存")])],1)],1)],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{title:e.dynamicInfoTitle,size:"small","before-close":e.closeDialog,"element-loading-text":"请稍等···"},model:{value:e.isDynamicInfoVisible,callback:function(t){e.isDynamicInfoVisible=t},expression:"isDynamicInfoVisible"}},[n("el-form",{ref:"dynamicInfo",attrs:{model:e.dynamicInfo,rules:e.rules,"label-width":"140px"}},[n("el-row",[n("el-col",{attrs:{span:22}},[n("el-form-item",{attrs:{prop:"indexName",label:"索引",required:""}},[n("el-input",{attrs:{disabled:!0},model:{value:e.dynamicInfo.indexName,callback:function(t){e.dynamicInfo.indexName=t},expression:"dynamicInfo.indexName"}})],1)],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:22}},[n("el-form-item",{attrs:{prop:"filterVersion",label:"版本"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"","allow-create":""},model:{value:e.dynamicInfo.filterVersion,callback:function(t){e.dynamicInfo.filterVersion=t},expression:"dynamicInfo.filterVersion"}},[n("el-option",{attrs:{label:"全部版本",value:""}}),e._v(" "),e._l(e.versionIdList,function(e){return n("el-option",{key:e.value,attrs:{label:e.value,value:e.value}})})],2)],1)],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:22}},[n("el-form-item",{attrs:{label:"事件",prop:"selectedType",required:""}},[n("el-select",{staticStyle:{width:"100%"},model:{value:e.dynamicInfo.selectedType,callback:function(t){e.dynamicInfo.selectedType=t},expression:"dynamicInfo.selectedType"}},[e._l(e.typeList,function(e){return n("el-option",{key:e.value,attrs:{label:e.value,value:e.value}})}),e._v(" "),n("el-option",{attrs:{label:"全部事件",value:"全部事件"}})],2)],1)],1)],1),e._v(" "),n("el-row",["全部事件"==e.dynamicInfo.selectedType?n("el-col",{attrs:{span:22}},[n("el-form-item",{attrs:{label:"操作",prop:"eventName",required:""}},[n("el-select",{staticStyle:{width:"100%"},model:{value:e.dynamicInfo.eventName,callback:function(t){e.dynamicInfo.eventName=t},expression:"dynamicInfo.eventName"}},[n("el-option",{attrs:{label:"全部操作",value:"全部操作"}})],1)],1)],1):"索引事件"==e.dynamicInfo.selectedType?n("el-col",{attrs:{span:22}},[n("el-form-item",{attrs:{label:"操作",prop:"eventName",required:""}},[n("el-select",{staticStyle:{width:"100%"},model:{value:e.dynamicInfo.eventName,callback:function(t){e.dynamicInfo.eventName=t},expression:"dynamicInfo.eventName"}},e._l(e.indexEventList,function(e){return n("el-option",{key:e.value,attrs:{label:e.value,value:e.value}})}))],1)],1):"版本事件"==e.dynamicInfo.selectedType?n("el-col",{attrs:{span:22}},[n("el-form-item",{attrs:{label:"操作",prop:"eventName",required:""}},[n("el-select",{staticStyle:{width:"100%"},model:{value:e.dynamicInfo.eventName,callback:function(t){e.dynamicInfo.eventName=t},expression:"dynamicInfo.eventName"}},e._l(e.versionEventList,function(e){return n("el-option",{key:e.value,attrs:{label:e.value,value:e.value}})}))],1)],1):"同步事件"==e.dynamicInfo.selectedType?n("el-col",{attrs:{span:22}},[n("el-form-item",{attrs:{label:"操作",prop:"eventName",required:""}},[n("el-select",{staticStyle:{width:"100%"},model:{value:e.dynamicInfo.eventName,callback:function(t){e.dynamicInfo.eventName=t},expression:"dynamicInfo.eventName"}},e._l(e.versionSyncEventList,function(e){return n("el-option",{key:e.value,attrs:{label:e.value,value:e.value}})}))],1)],1):"模板事件"==e.dynamicInfo.selectedType?n("el-col",{attrs:{span:22}},[n("el-form-item",{attrs:{label:"操作",prop:"eventName",required:""}},[n("el-select",{staticStyle:{width:"100%"},model:{value:e.dynamicInfo.eventName,callback:function(t){e.dynamicInfo.eventName=t},expression:"dynamicInfo.eventName"}},e._l(e.templateEventList,function(e){return n("el-option",{key:e.value,attrs:{label:e.value,value:e.value}})}))],1)],1):e._e()],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:22}},[n("el-form-item",{attrs:{prop:"timeRange",label:"天数",required:""}},[n("el-input",{attrs:{disabled:!0},model:{value:e.dynamicInfo.timeRange,callback:function(t){e.dynamicInfo.timeRange=t},expression:"dynamicInfo.timeRange"}})],1)],1)],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",slot:"footer"},[n("el-button",{on:{click:function(t){e.closeDialog()}}},[e._v("取消")]),e._v(" "),n("el-button",{attrs:{type:"confirm"},on:{click:function(t){e.deleteDynamicInfo()}}},[e._v("删除")])],1)],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:e.title,"before-close":e.closeDialog},model:{value:e.isVisible,callback:function(t){e.isVisible=t},expression:"isVisible"}},[n("fieldset",{staticClass:"no-border"},[n("div",{staticClass:"view-content"},[n("pre",[e._v(e._s(e.content))])])])])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login-box"},[n("div",{staticClass:"login-header"},[e._v("\n        用户登录\n    ")]),e._v(" "),n("div",{staticClass:"login-body"},[e.loginErrorMsg?n("div",{staticClass:"msg-error"},[n("i",{staticClass:"el-icon-remove"}),e._v(e._s(e.loginErrorMsg))]):e._e(),e._v(" "),n("el-row",[n("el-col",[n("el-input",{attrs:{size:"medium",placeholder:"请输入帐号"},model:{value:e.loginInfo.username,callback:function(t){e.loginInfo.username=t},expression:"loginInfo.username"}})],1)],1),e._v(" "),n("el-row",[n("el-col",[n("el-input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:e.loginInfo.password,callback:function(t){e.loginInfo.password=t},expression:"loginInfo.password"}})],1)],1),e._v(" "),n("el-row",[n("el-col",[n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:function(t){e.login()}}},[e._v("登录")])],1)],1)],1)])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-form",{ref:"conditionItemForm",attrs:{model:e.conditionItem,rules:e.rules,"label-width":"120px"}},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"判断参数名",prop:"paramName"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"","allow-create":""},model:{value:e.conditionItem.paramName,callback:function(t){e.conditionItem.paramName=t},expression:"conditionItem.paramName"}},e._l(e.paramNames,function(e){return n("el-option",{key:e,attrs:{label:e,value:e}})}))],1)],1),e._v(" "),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"判断运算",prop:"exprOp"}},[n("el-select",{staticStyle:{width:"100%"},model:{value:e.conditionItem.exprOp,callback:function(t){e.conditionItem.exprOp=t},expression:"conditionItem.exprOp"}},e._l(e.exprOps,function(e){return n("el-option",{key:e,attrs:{label:e,value:e}})}))],1)],1),e._v(" "),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"判断值",prop:"paramValue"}},[n("el-input",{attrs:{placeholder:"多个判断值请以 , 分隔"},model:{value:e.conditionItem.paramValue,callback:function(t){e.conditionItem.paramValue=t},expression:"conditionItem.paramValue"}})],1)],1)],1)],1)],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.initialized||"Login"===e.initComponent?[n(e.initComponent,{tag:"component",on:{"login-success":e.loginSuccess}})]:[n("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen",value:e.loading,expression:"loading",modifiers:{fullscreen:!0}}],attrs:{"element-loading-text":"Pallas正在初始化应用，请稍等···"}})]],2)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"my-tab-content"},[n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"template_content",attrs:{"element-loading-text":"请稍等···"}},[n("div",{staticClass:"template_tree"},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.isAllPrivilege,expression:"isAllPrivilege"}]},[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.addTemplate}},[e._v("新增模板")]),e._v(" "),n("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.exportTemplate}},[e._v("导出模板")]),e._v(" "),n("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.importTemplate}},[e._v("导入模板")])],1),e._v(" "),n("div",{staticClass:"mrg-top-10"},[n("el-tree",{attrs:{"node-key":"id",data:e.treeData,props:e.defaultProps,"default-expand-all":"","expand-on-click-node":!1,"highlight-current":""},on:{"node-click":e.handleNodeClick}})],1)]),e._v(" "),e.isEditable?e._e():n("div",{staticClass:"template-warning"},[n("i",{staticClass:"el-icon-warning"}),e._v("请选择模板")]),e._v(" "),e._l(e.templateList,function(t){return n("div",{key:t.templateName,staticClass:"template-body"},[e.templateInfo.templateName===t.templateName?n("template-edit",{attrs:{clusters:e.clusters,"index-id":e.indexId,"index-name":e.indexName,"is-all-privilege":e.isAllPrivilege,"template-info":e.templateInfo,"macro-list":e.macroList},on:{"close-delete":e.closeDelete,"close-edit":e.closeEdit}}):e._e()],1)})],2),e._v(" "),e.isTemplateAddVisible?n("div",[n("template-add-dialog",{attrs:{"template-add-info":e.templateAddInfo},on:{"close-dialog":e.closeDialog,"submit-close-dialog":e.submitCloseDialog}})],1):e._e(),e._v(" "),e.isTemplateImportVisible?n("div",[n("template-import-dialog",{attrs:{"index-id":e.indexId,"template-import-title":e.templateImportTitle,"template-import-url":e.templateImportUrl},on:{"close-dialog":e.closeImportDialog,"close-submit-dialog":e.closeSubmitImportDialog}})],1):e._e(),e._v(" "),e.isExprotTemplateVisible?n("div",[n("template-export-dialog",{attrs:{"index-id":e.indexId,"template-list":e.templateList},on:{"close-export-dialog":e.closeExportDialog}})],1):e._e()])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"my-tab-content",attrs:{"element-loading-text":"请稍等···"}},[n("div",{staticClass:"content"},[n("div",{staticClass:"data-table-filter"},[n("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[n("el-form-item",{attrs:{label:"超时时间(毫秒,需>=50ms)"}},[n("el-input-number",{attrs:{placeholder:"超时时间(毫秒)",min:0},model:{value:e.indexInfo.timeout,callback:function(t){e.indexInfo.timeout=t},expression:"indexInfo.timeout"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"重试次数"}},[n("el-input-number",{attrs:{placeholder:"重试次数",min:0},model:{value:e.indexInfo.retry,callback:function(t){e.indexInfo.retry=t},expression:"indexInfo.retry"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"慢查询阈值(毫秒)"}},[n("el-input-number",{attrs:{placeholder:"慢查询阈值(毫秒)",min:0},model:{value:e.indexInfo.slowerThan,callback:function(t){e.indexInfo.slowerThan=t},expression:"indexInfo.slowerThan"}})],1),e._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.handleUpdate}},[n("i",{staticClass:"fa fa-refresh"}),e._v("更新")])],1)],1)],1)])])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"my-tab-content"},[n("el-collapse",{model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[n("el-collapse-item",{attrs:{name:"1"}},[n("template",{slot:"title"},[e._v("\n                采集规则\n            ")]),e._v(" "),n("flow-record-config",{on:{"get-flow-export":e.getFlowExport}})],2),e._v(" "),n("el-collapse-item",{attrs:{title:"采集结果",name:"2"}},[n("template",{slot:"title"},[e._v("\n                采集结果 -- 规则ID："),n("span",{staticStyle:{color:"#32cd32","font-weight":"bold"}},[e._v(e._s(e.flowRecordExportParams.configId))])]),e._v(" "),n("flow-record-export",{attrs:{"flow-record-export-params":e.flowRecordExportParams}})],2)],1)],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"template-test-upload"},[n("el-table",{attrs:{data:e.addDataSource,"show-header":!1}},[n("el-table-column",{scopedSlots:e._u([{key:"default",fn:function(e){return[n("el-input",{model:{value:e.row.paramNameDef,callback:function(t){e.row.paramNameDef=t},expression:"scope.row.paramNameDef"}})]}}])}),e._v(" "),n("el-table-column",{scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-upload",{ref:"upload",attrs:{action:"/pallas/index_template/performance_script/upload.json","auto-upload":!1,data:e.addDataSource[0],"on-remove":e.handleRemove,"on-error":e.handleError,"on-success":e.handleSuccess}},[n("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.handleUpload}},[e._v("选择文件")])],1)]}}])}),e._v(" "),n("el-table-column",{scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(n){e.handleAdd(t.row)}}},[e._v("上传")])]}}])})],1)],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{title:"新建模板","before-close":e.closeDialog,size:"tiny","element-loading-text":"请稍等···"},model:{value:e.isTemplateAddVisible,callback:function(t){e.isTemplateAddVisible=t},expression:"isTemplateAddVisible"}},[n("el-form",{ref:"templateAddInfo",attrs:{model:e.templateAddInfo,rules:e.rules,"label-width":"140px"}},[n("el-row",[n("el-col",{attrs:{span:23}},[n("el-form-item",{attrs:{label:"templateName",prop:"templateName"}},[n("el-input",{model:{value:e.templateAddInfo.templateName,callback:function(t){e.templateAddInfo.templateName=t},expression:"templateAddInfo.templateName"}})],1)],1)],1),e._v(" "),n("el-row",[n("el-col",[n("el-form-item",{attrs:{label:"type",prop:"type"}},[n("el-select",{model:{value:e.templateAddInfo.type,callback:function(t){e.templateAddInfo.type=t},expression:"templateAddInfo.type"}},[n("el-option",{key:"1",attrs:{label:"模板",value:"1"}}),e._v(" "),n("el-option",{key:"0",attrs:{label:"宏",value:"0"}})],1)],1)],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:23}},[n("el-form-item",{attrs:{label:"描述",prop:"description"}},[n("el-input",{attrs:{type:"textarea"},model:{value:e.templateAddInfo.description,callback:function(t){e.templateAddInfo.description=t},expression:"templateAddInfo.description"}})],1)],1)],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",slot:"footer"},[n("el-button",{on:{click:function(t){e.closeDialog()}}},[e._v("取消")]),e._v(" "),n("el-button",{attrs:{type:"confirm"},on:{click:function(t){e.submitInfo()}}},[e._v("确定")])],1)],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"my-tab-content",attrs:{"element-loading-text":"请稍等···"}},[e.privilege?n("div",{staticClass:"content"},[n("div",{staticClass:"data-table-filter"},[n("div",{staticClass:"pull-left"},[n("el-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.handleAdd}},[e._v("创建规则")])],1)])]):e._e(),e._v(" "),n("div",{staticClass:"content"},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.rulesList,stripe:""}},[n("el-table-column",{attrs:{label:"规则名称",prop:"name","header-align":"center"}}),e._v(" "),n("el-table-column",{attrs:{label:"规则关系",prop:"conditionRelation",width:"80px","header-align":"center"}}),e._v(" "),n("el-table-column",{attrs:{label:"判断表达式","header-align":"center"}},[n("el-table-column",{attrs:{label:"判断参数名","min-width":"150","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.conditions,function(t){return n("div",{key:t.paramName,staticClass:"condition-table"},[e._v(e._s(t.paramName))])})}}])}),e._v(" "),n("el-table-column",{attrs:{label:"判断运算","min-width":"70","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.conditions,function(t){return n("div",{key:t.exprOp,staticClass:"condition-table"},[e._v(e._s(t.exprOp))])})}}])}),e._v(" "),n("el-table-column",{attrs:{label:"判断值","min-width":"140","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.conditions,function(t){return n("div",{key:t.paramValue,staticClass:"condition-table"},[e._v(e._s(t.paramValue))])})}}])})],1),e._v(" "),n("el-table-column",{attrs:{label:"Preference","min-width":"70","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-tag",{staticClass:"target-group-item",attrs:{type:""===t.row.preference?"info":"success","close-transition":""}},[n("span",[e._v(e._s(t.row.preference||"无"))])])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"节点集","min-width":"150","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.targetGroups,function(i){return n("div",{key:i.id,staticClass:"route-tag"},[n("el-tag",{staticClass:"target-group-item",attrs:{type:"warning"}},[n("span",[e._v(e._s(e.routingTargetGroupsList[i.id].name))]),e._v(" "),t.row.targetGroups.length>1?n("span",{staticClass:"route-weight"},[e._v(e._s(i.weight))]):e._e()])],1)})}}])}),e._v(" "),n("el-table-column",{attrs:{label:"是否启用","header-align":"center",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-tag",{attrs:{type:t.row.enable?"success":"danger","close-transition":""}},[e._v(e._s(e._f("translateEnable")(t.row.enable)))])]}}])}),e._v(" "),e.privilege?n("el-table-column",{attrs:{label:"操作",width:"80px","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-tooltip",{attrs:{content:"编辑",placement:"top"}},[n("el-button",{attrs:{type:"text"},on:{click:function(n){e.handleEdit(t.row)}}},[n("i",{staticClass:"fa fa-edit"})])],1),e._v(" "),n("el-tooltip",{attrs:{content:"删除",placement:"top"}},[n("el-button",{attrs:{type:"text"},on:{click:function(n){e.handleDelete(t.row,t.$index)}}},[n("i",{staticClass:"fa fa-trash"})])],1)]}}])}):e._e()],1)],1),e._v(" "),n("target-group",{attrs:{privilege:e.privilege,"index-id":e.indexId,"index-name":e.indexName,"rules-list":e.rulesList,"routing-target-groups-list":e.routingTargetGroupsList},on:{"get-routing-list":e.getRoutingList}}),e._v(" "),e.isConditionInfoVisible?n("div",[n("condition-info-dialog",{attrs:{"routing-target-groups":e.routingTargetGroups,conditions:JSON.parse(JSON.stringify(e.conditions)),"condition-info":e.conditionInfo,"condition-info-title":e.conditionInfoTitle,"condition-operation":e.conditionOperation},on:{"add-condition":e.addCondition,"edit-condition":e.editCondition,"close-dialog":e.closeConditionDialog}})],1):e._e()],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"my-tab-content",attrs:{"element-loading-text":"请稍等···"}},[n("div",{staticClass:"content"},[n("div",{staticClass:"index-timeout-retry"},[n("i",{staticClass:"fa fa-exclamation-circle"}),e._v("\n            当前索引级别超时为 "),n("span",[e._v(e._s(e.indexInfo.timeout))]),e._v(" 毫秒，重试为 "),n("span",[e._v(e._s(e.indexInfo.retry))]),e._v(" 次。（若模板超时时间为0毫秒，则以当前索引的超时时间和重试为准。）\n        ")]),e._v(" "),n("div",{staticClass:"data-table-filter"},[n("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[n("el-form-item",{attrs:{label:"超时时间(毫秒,需>=50ms)"}},[n("el-input-number",{attrs:{placeholder:"超时时间(毫秒)",min:0},model:{value:e.templateInfo.timeout,callback:function(t){e.templateInfo.timeout=t},expression:"templateInfo.timeout"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"重试次数"}},[n("el-input-number",{attrs:{placeholder:"重试次数",min:0},model:{value:e.templateInfo.retry,callback:function(t){e.templateInfo.retry=t},expression:"templateInfo.retry"}})],1),e._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.handleUpdate}},[n("i",{staticClass:"fa fa-refresh"}),e._v("更新")])],1)],1)],1)])])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"my-tab-content"},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.isAllPrivilege,expression:"isAllPrivilege"}],staticClass:"content"},[n("el-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.handleAdd}},[e._v("新增版本")])],1),e._v(" "),n("div",{staticClass:"content"},[[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.versionList,border:"","element-loading-text":"请稍等···"}},[n("el-table-column",{attrs:{label:"版本id",prop:"id",width:"150px"}}),e._v(" "),n("el-table-column",{attrs:{label:"所属集群",prop:"realClusterIds"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(e.$array.strToArray(t.row.realClusterIds),function(i){return n("div",{key:i,staticClass:"condition-table"},[n("router-link",{attrs:{tag:"a",to:{name:"cluster_detail",query:{clusterId:e.getClusterName(i)}}}},[e._v(e._s(e.getClusterName(i)))]),e._v(" "),n("el-tooltip",{attrs:{effect:"dark",content:"查看配置信息",placement:"top"}},[n("el-button",{attrs:{type:"text"},on:{click:function(n){e.viewConfigInfo(t.row,i)}}},[n("i",{staticClass:"fa fa-cog"})])],1)],1)})}}])}),e._v(" "),n("el-table-column",{attrs:{label:"数据量",prop:"count",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.count,function(t){return n("div",{key:t,staticClass:"condition-table"},[e._v(e._s(t))])})}}])}),e._v(" "),n("el-table-column",{attrs:{label:"创建时间",prop:"createTime",width:"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDate")(t.row.createTime)))]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"是否启用",prop:"isUsed",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-tag",{attrs:{type:t.row.isUsed?"success":"danger","close-transition":""}},[e._v(e._s(e._f("translateIsUsed")(t.row.isUsed||!1)))])]}}])}),e._v(" "),e.isAllPrivilege?n("el-table-column",{attrs:{label:"操作",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-dropdown",{attrs:{trigger:"click"}},[n("span",{staticClass:"el-dropdown-link"},[e._v("\n                            操作"),n("i",{staticClass:"el-icon-caret-bottom el-icon--right"})]),e._v(" "),n("el-dropdown-menu",{staticClass:"dropdown-operation",slot:"dropdown"},[n("el-dropdown-item",{directives:[{name:"show",rawName:"v-show",value:!t.row.isSync,expression:"!scope.row.isSync"}]},[n("a",{on:{click:function(n){e.createIndex(t.row)}}},[n("span",[n("i",{staticClass:"fa fa-play-circle"}),e._v("创建索引")])])]),e._v(" "),n("el-dropdown-item",{directives:[{name:"show",rawName:"v-show",value:!t.row.isUsed,expression:"!scope.row.isUsed"}]},[n("a",{on:{click:function(n){e.enableVersion(t.row)}}},[n("span",[n("i",{staticClass:"fa fa-hand-o-right"}),e._v("启用版本")])])]),e._v(" "),n("el-dropdown-item",[n("a",{on:{click:function(n){e.triggerDialog(t.row,"view")}}},[n("span",[n("i",{staticClass:"fa fa-eye"}),e._v("配置查看")])])]),e._v(" "),n("el-dropdown-item",{directives:[{name:"show",rawName:"v-show",value:!t.row.isSync,expression:"!scope.row.isSync"}]},[n("a",{on:{click:function(n){e.triggerDialog(t.row,"edit")}}},[n("span",[n("i",{staticClass:"fa fa-pencil-square-o"}),e._v("配置更改")])])]),e._v(" "),n("el-dropdown-item",[n("a",{on:{click:function(n){e.copyVersion(t.row,"copy")}}},[n("span",[n("i",{staticClass:"fa fa-clone"}),e._v("版本复制")])])]),e._v(" "),n("el-dropdown-item",{directives:[{name:"show",rawName:"v-show",value:t.row.isSync,expression:"scope.row.isSync"}]},[n("a",{on:{click:function(n){e.stopSync(t.row)}}},[n("span",[n("i",{staticClass:"fa fa-stop-circle-o"}),e._v("删除索引")])])]),e._v(" "),n("el-dropdown-item",{directives:[{name:"show",rawName:"v-show",value:!t.row.isSync,expression:"!scope.row.isSync"}]},[n("a",{on:{click:function(n){e.handleDelete(t.row)}}},[n("span",[n("i",{staticClass:"fa fa-trash"}),e._v("删除版本")])])])],1)],1)]}}])}):e._e()],1)],e._v(" "),0!=e.versionData.total?n("div",{staticClass:"my-pagination"},[n("el-pagination",{attrs:{layout:"prev, pager, next",total:e.versionData.total,"page-size":e.pageSize,"current-page":e.currentPage},on:{"current-change":e.changePage}})],1):e._e()],2),e._v(" "),e.isVersionInfoVisible?n("div",[n("version-info-dialog",{attrs:{"version-operation":e.versionOperation,"version-info-title":e.versionInfoTitle,"version-info":e.versionInfo,"is-logical":e.isLogical,clusters:e.clusters,"is-meta-data-null":e.isMetaDataNull},on:{"close-dialog":e.closeDialog,"template-operate-success":e.templateOperateSuccess}})],1):e._e(),e._v(" "),e.isViewConfigVisible?n("div",[n("json-content-dialog",{attrs:{content:e.configInfo,title:e.configTitle},on:{"close-dialog":e.closeViewConfigDialog}})],1):e._e()])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"template-content",attrs:{"element-loading-text":"请稍等···"}},[n("el-row",[n("div",{staticClass:"pull-left template-title"},[e._v("\n                当前正在编辑"+e._s(this.templateType)+"："),n("span",{staticClass:"template-name"},[e._v(e._s(e.templateInfo.templateName))]),e._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:e.templateInfo.approving&&1===e.templateInfo.type,expression:"templateInfo.approving && templateInfo.type === 1"}],staticClass:"template-approving"},[e._v("状态："),n("router-link",{attrs:{tag:"a",to:{name:"authority_manage"}}},[e._v("待审核")]),e._v("，不可进行保存，删除等操作")],1),e._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:e.templateInfo.approving&&0===e.templateInfo.type,expression:"templateInfo.approving && templateInfo.type === 0"}],staticClass:"template-approving"},[e._v("引用该宏的模板处于待审核状态，不可进行保存、删除等操作")])]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.isAllPrivilege,expression:"isAllPrivilege"}],staticClass:"pull-right"},[n("el-select",{directives:[{name:"show",rawName:"v-show",value:!e.isMacroVisible&&e.isEditOperate,expression:"!isMacroVisible && isEditOperate"}],staticStyle:{"padding-right":"10px"},attrs:{size:"small",placeholder:"请选择要插入的宏",clearable:""},on:{change:e.insertMacro},model:{value:e.selectedMacro,callback:function(t){e.selectedMacro=t},expression:"selectedMacro"}},e._l(e.macroList,function(e){return n("el-option",{key:e.templateName,attrs:{label:e.templateName,value:e.templateName}})})),e._v(" "),n("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isEditOperate&&!e.templateInfo.approving,expression:"isEditOperate && !templateInfo.approving"}],attrs:{type:"danger",size:"small"},on:{click:e.handleDelete}},[e._v("删除")]),e._v(" "),n("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isEditOperate&&!e.templateInfo.approving,expression:"isEditOperate && !templateInfo.approving"}],attrs:{type:"primary",size:"small"},on:{click:e.handleSave}},[e._v("保存")]),e._v(" "),n("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isEditOperate&&!e.templateInfo.approving&&1===e.templateInfo.type,expression:"isEditOperate && !templateInfo.approving && templateInfo.type === 1"}],attrs:{type:"primary",size:"small"},on:{click:e.handleApprove}},[e._v("提交")]),e._v(" "),n("el-button",{directives:[{name:"show",rawName:"v-show",value:e.templateInfo.hisCount>0&&e.isEditOperate,expression:"templateInfo.hisCount > 0 && isEditOperate"}],attrs:{type:"primary",size:"small"},on:{click:e.handleHistoryVersion}},[e._v(e._s(e.historyVersionBtn))])],1)]),e._v(" "),n("div",{staticClass:"mrg-top-10"},[n("el-row",[n("el-tabs",{on:{"tab-click":e.tabClick},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[n("el-tab-pane",{attrs:{label:"编辑模板",name:"edit"}},[n("div",{class:[e.isShowHistoryVersion?"template-edit-and-version-content":"template-edit-content"]},[n("editor",{ref:"aceEditor1",attrs:{content:e.templateInfo.content,"editor-id":e.eidtorId},on:{"change-content":e.changeEditContent}})],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowHistoryVersion,expression:"isShowHistoryVersion"}],staticClass:"template-history-version-content"},[n("div",{staticStyle:{"padding-left":"10px"}},[n("el-table",{attrs:{data:e.historyVersionList,border:""},on:{"row-click":e.handleVersionDialog}},[n("el-table-column",{attrs:{label:"修改日期",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDate")(t.row.createdTime)))]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"description",label:"描述"}}),e._v(" "),n("el-table-column",{attrs:{prop:"creator",label:"修改者"}})],1)],1)])]),e._v(" "),n("el-tab-pane",{attrs:{label:"sql parser",name:"sql",disabled:e.isMacroVisible||!e.isAllPrivilege}},[n("el-row",{attrs:{gutter:2}},[n("el-col",{attrs:{span:11}},[n("el-input",{staticClass:"result-content",attrs:{rows:e.paneHeight.height/21,type:"textarea",placeholder:"请输入sql"},model:{value:e.sql,callback:function(t){e.sql=t},expression:"sql"}})],1),e._v(" "),n("el-col",{attrs:{span:2}},[n("div",{style:e.sqlParseBtnStyle,attrs:{align:"center"}},[n("el-button",{attrs:{size:"small",title:"结果仅供参考，需进一步加工",type:"primary"},on:{click:e.handleExplain}},[e._v("转 DSL")]),n("br"),e._v(" "),n("el-button",{staticStyle:{"margin-top":"5px","margin-left":"0px"},attrs:{title:"谨慎执行，别跑挂DB了",disabled:!e.isAllPrivilege,size:"small",type:"primary"},on:{click:e.handleExecute}},[e._v("查询DB")])],1)]),e._v(" "),n("el-col",{attrs:{span:11}},[n("div",{style:e.paneHeight},[n("editor",{ref:"aceEditor",attrs:{content:e.explainContent,"editor-id":"explainId"}})],1)])],1)],1),e._v(" "),n("el-tab-pane",{attrs:{label:"调试",name:"debug",disabled:e.isMacroVisible||!e.isAllPrivilege}},[e.clusters.length>1?n("div",{staticClass:"render-cluster"},[n("span",[e._v("指定集群：")]),e._v(" "),n("el-select",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",placeholder:"请选择集群"},model:{value:e.clusterId,callback:function(t){e.clusterId=t},expression:"clusterId"}},e._l(e.clusters,function(e){return n("el-option",{key:e.id,attrs:{label:e.clusterId,value:e.id}})}))],1):e._e(),e._v(" "),n("el-row",[n("fieldset",{staticClass:"no-border"},[n("span",{staticClass:"edit-title"},[e._v("参数：")]),e._v(" "),n("div",{staticStyle:{height:"300px"}},[n("editor",{ref:"aceEditor2",attrs:{content:e.templateInfo.params,"editor-id":e.debugId},on:{"change-content":e.changeDebugContent}})],1)])]),e._v(" "),n("el-row",[n("div",{staticStyle:{padding:"5px 0"},attrs:{align:"center"}},[n("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.handleRender}},[e._v("Render")]),e._v(" "),n("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.handleDebug}},[e._v("运行")])],1)]),e._v(" "),n("el-row",[n("fieldset",{staticClass:"no-border"},[n("span",{staticClass:"edit-title"},[e._v("结果：")]),e._v(" "),n("el-input",{staticClass:"result-content",attrs:{type:"textarea",readonly:"",autosize:{minRows:12}},model:{value:e.resultContent,callback:function(t){e.resultContent=t},expression:"resultContent"}})],1)])],1),e._v(" "),n("el-tab-pane",{attrs:{label:"API",name:"api",disabled:e.isMacroVisible||!e.isAllPrivilege}},[n("el-row",[n("fieldset",{staticClass:"no-border"},[n("div",{staticClass:"api-content"},[e._v("\n                                      "+e._s("Host: "+e.apiContent.http_address)+"\n                                      "),n("br"),n("br"),e._v(" "),n("pre",[e._v(e._s("POST: "+e.apiContent.path))]),e._v(" "),n("pre",[e._v(e._s(e.apiContent.content))])])])])],1),e._v(" "),n("el-tab-pane",{attrs:{label:"性能测试",name:"test",disabled:e.isMacroVisible||!e.isAllPrivilege}},[n("template-test",{attrs:{"index-id":e.indexId,"template-name":e.templateInfo.templateName,"params-info":e.paramsInfo}})],1),e._v(" "),n("el-tab-pane",{attrs:{label:"超时重试",name:"timeoutRetry",disabled:e.isMacroVisible||!e.isAllPrivilege}},[n("service-governance",{attrs:{"index-id":e.indexId,"template-info":e.templateInfo}})],1)],1)],1)],1)],1),e._v(" "),e.isVersionContentVisible?n("div",[n("json-diff",{attrs:{"is-overwrite":!0,"json-diff-info":e.versionDiffInfo},on:{"overwrite-operate":e.overwriteVersion,"close-dialog":e.closeVersionContentDialog}})],1):e._e(),e._v(" "),e.isEditSaveVisible?n("div",[n("template-save-edit-dialog",{attrs:{"index-id":e.indexId,"template-info":e.templateInfo},on:{"close-edit-save-dialog":e.closeEditSaveDialog,"edit-save-success":e.editSaveSuccess}})],1):e._e()])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{title:e.targetGroupInfoTitle,"before-close":e.closeDialog,"element-loading-text":"请稍等···"},model:{value:e.isVisible,callback:function(t){e.isVisible=t},expression:"isVisible"}},[n("el-form",{ref:"targetGroupInfo",attrs:{model:e.targetGroupInfo,rules:e.rules,"label-width":"130px"}},[n("el-row",[n("el-col",{attrs:{span:23}},[n("el-form-item",{attrs:{prop:"name",label:"节点集名称"}},[n("el-input",{model:{value:e.targetGroupInfo.name,callback:function(t){e.targetGroupInfo.name=t},expression:"targetGroupInfo.name"}})],1)],1)],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",slot:"footer"},[n("el-button",{on:{click:function(t){e.closeDialog()}}},[e._v("取消")]),e._v(" "),n("el-button",{attrs:{type:"confirm"},on:{click:function(t){e.submitInfo()}}},[e._v("保存")])],1)],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page-content"},[n("div",{staticClass:"my-breadcrumb"},[n("el-breadcrumb",{staticClass:"my-breadcrumb-content",attrs:{separator:"/"}},[n("el-breadcrumb-item",{attrs:{to:{name:"cluster_manage"}}},[n("i",{staticClass:"fa fa-home"}),e._v("ES集群管理")]),e._v(" "),n("el-breadcrumb-item",[e._v("ES集群路由配置")]),e._v(" "),n("el-breadcrumb-item",[e._v(e._s(e.clusterId))])],1)],1),e._v(" "),e.privilege?n("div",{staticClass:"data-table-filter"},[n("div",{staticClass:"pull-left"},[n("el-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.handleAdd}},[e._v("创建规则")])],1)]):e._e(),e._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.rulesList,stripe:"","element-loading-text":"请稍等···"}},[n("el-table-column",{attrs:{label:"规则名称",prop:"name","header-align":"center"}}),e._v(" "),n("el-table-column",{attrs:{label:"规则关系",prop:"conditionRelation","header-align":"center",width:"80px"}}),e._v(" "),n("el-table-column",{attrs:{label:"判断表达式","header-align":"center"}},[n("el-table-column",{attrs:{label:"判断参数名","min-width":"150","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.conditions,function(t){return n("div",{key:t.paramName,staticClass:"condition-table"},[e._v(e._s(t.paramName))])})}}])}),e._v(" "),n("el-table-column",{attrs:{label:"判断运算","min-width":"70","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.conditions,function(t){return n("div",{key:t.exprOp,staticClass:"condition-table"},[e._v(e._s(t.exprOp))])})}}])}),e._v(" "),n("el-table-column",{attrs:{label:"判断值","min-width":"140","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.conditions,function(t){return n("div",{key:t.paramValue,staticClass:"condition-table"},[e._v(e._s(t.paramValue))])})}}])})],1),e._v(" "),n("el-table-column",{attrs:{label:"节点集","min-width":"150","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.targetGroups,function(i){return n("div",{key:i.id,staticClass:"route-tag"},[n("el-tag",{staticClass:"target-group-item",attrs:{type:"warning"}},[n("span",[e._v(e._s(e.routingTargetGroupsList[i.id].name))]),e._v(" "),t.row.targetGroups.length>1?n("span",{staticClass:"route-weight"},[e._v(e._s(i.weight))]):e._e()])],1)})}}])}),e._v(" "),n("el-table-column",{attrs:{label:"是否启用","header-align":"center",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-tag",{attrs:{type:t.row.enable?"success":"danger","close-transition":""}},[e._v(e._s(e._f("translateEnable")(t.row.enable)))])]}}])}),e._v(" "),e.privilege?n("el-table-column",{attrs:{label:"路由管理",width:"80px","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-tooltip",{attrs:{content:"编辑",placement:"top"}},[n("el-button",{attrs:{type:"text"},on:{click:function(n){e.handleEdit(t.row)}}},[n("i",{staticClass:"fa fa-edit"})])],1),e._v(" "),n("el-tooltip",{attrs:{content:"删除",placement:"top"}},[n("el-button",{attrs:{type:"text"},on:{click:function(n){e.handleDelete(t.row,t.$index)}}},[n("i",{staticClass:"fa fa-trash"})])],1)]}}])}):e._e()],1),e._v(" "),n("target-group",{attrs:{privilege:e.privilege,"cluster-id":e.clusterId,"rules-list":e.rulesList,"routing-target-groups-list":e.routingTargetGroupsList},on:{"get-routing-list":e.getRoutingList}}),e._v(" "),e.isConditionInfoVisible?n("div",[n("condition-info-dialog",{attrs:{"routing-target-groups":e.routingTargetGroups,conditions:JSON.parse(JSON.stringify(e.conditions)),"condition-info":e.conditionInfo,"condition-info-title":e.conditionInfoTitle,"condition-operation":e.conditionOperation},on:{"add-condition":e.addCondition,"edit-condition":e.editCondition,"close-dialog":e.closeConditionDialog}})],1):e._e()],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"schema-info-dialog"},[n("el-dialog",{attrs:{title:e.childTitle,size:"large","show-close":!1,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{open:e.openDialog},model:{value:e.isSchemaChildVisible,callback:function(t){e.isSchemaChildVisible=t},expression:"isSchemaChildVisible"}},[n("div",{staticClass:"schema-content"},[e.isEditable?e._e():n("el-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.handleAdd}},[e._v("新增字段")]),e._v(" "),e.childInfo.length>0?n("span",{staticStyle:{color:"#fff","margin-left":"5px"}},[e._v("Dynamic: "),n("el-switch",{attrs:{disabled:e.isEditable},model:{value:e.initDynamic,callback:function(t){e.initDynamic=t},expression:"initDynamic"}})],1):e._e()],1),e._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.childInfo,border:""}},[n("el-table-column",{attrs:{label:"字段名"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{attrs:{disabled:e.isEditable},model:{value:t.row.fieldName,callback:function(e){t.row.fieldName=e},expression:"scope.row.fieldName"}})]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"ES类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("select",{directives:[{name:"model",rawName:"v-model",value:t.row.fieldType,expression:"scope.row.fieldType"}],attrs:{size:"small",disabled:e.isEditable},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});t.row.fieldType=e.target.multiple?n:n[0]}}},e._l(e.fieldTypes,function(t){return n("option",{key:t.value,domProps:{value:t.value}},[e._v(e._s(t.label))])}))]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"多值/单值"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("select",{directives:[{name:"model",rawName:"v-model",value:t.row.multi,expression:"scope.row.multi"}],attrs:{size:"small",disabled:e.isEditable},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});t.row.multi=e.target.multiple?n:n[0]}}},[n("option",{attrs:{label:"单值"},domProps:{value:!1}},[e._v("单值")]),e._v(" "),n("option",{attrs:{label:"多值"},domProps:{value:!0}},[e._v("多值")])])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"查询关键字"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-checkbox",{attrs:{disabled:e.isEditable},model:{value:t.row.search,callback:function(e){t.row.search=e},expression:"scope.row.search"}},[e._v("是否查询")])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"排序或聚合"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-checkbox",{attrs:{disabled:e.isEditable},model:{value:t.row.docValue,callback:function(e){t.row.docValue=e},expression:"scope.row.docValue"}},[e._v("用于排序或聚合")])]}}])}),e._v(" "),e.isEditable?e._e():n("el-table-column",{attrs:{label:"操作","min-width":"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(n){e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),n("div",{staticClass:"dialog-footer",slot:"footer"},[n("el-button",{on:{click:function(t){e.cancelBtn()}}},[e._v("取消")]),e._v(" "),e.isEditable?e._e():n("el-button",{attrs:{type:"confirm"},on:{click:function(t){e.confirmBtn()}}},[e._v("确定")])],1)],1)],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{title:e.tokenInfoTitle,visible:e.isVisible,"before-close":e.closeDialog,"element-loading-text":"请稍等···"},on:{"update:visible":function(t){e.isVisible=t}}},[n("el-form",{ref:"tokenInfo",attrs:{model:e.tokenInfo,rules:e.rules,"label-width":"80px"}},[n("el-row",[n("el-col",{attrs:{span:16}},[n("el-form-item",{attrs:{label:"token",prop:"clientToken"}},[n("el-input",{model:{value:e.tokenInfo.clientToken,callback:function(t){e.tokenInfo.clientToken=t},expression:"tokenInfo.clientToken"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"",prop:"clientToken","label-width":"10px"}},[n("el-button",{attrs:{size:"small"},on:{click:e.reGenerate}},[e._v("重新生成")]),e._v(" "),n("el-popover",{attrs:{placement:"right",trigger:"hover",content:"Token的使用需在Pallas Rest Client发起Pallas Search查询时传入，重新生成后需点击更新按钮保存"}},[n("i",{staticClass:"fa fa-info-circle",slot:"reference"})])],1)],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:22}},[n("el-form-item",{attrs:{label:"标题",prop:"title"}},[n("el-input",{model:{value:e.tokenInfo.title,callback:function(t){e.tokenInfo.title=t},expression:"tokenInfo.title"}})],1)],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:22}},[n("el-form-item",{attrs:{label:"启用状态",prop:"enabled"}},[n("div",{staticClass:"my-switch"},[n("el-switch",{model:{value:e.tokenInfo.enabled,callback:function(t){e.tokenInfo.enabled=t},expression:"tokenInfo.enabled"}}),e._v(" "),n("el-popover",{attrs:{placement:"right",trigger:"hover",content:"如果禁用，客户端就直连es，不经过pallas search"}},[n("i",{staticClass:"fa fa-info-circle",slot:"reference"})])],1)])],1)],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",slot:"footer"},[n("el-button",{on:{click:function(t){e.closeDialog()}}},[e._v("取消")]),e._v(" "),n("el-button",{attrs:{type:"confirm"},on:{click:function(t){e.submitInfo()}}},[e._v("确定")])],1)],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-form",{ref:"dataSource",attrs:{model:e.dataSource,rules:e.rules,"label-width":"120px"}},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:7}},[n("el-form-item",{attrs:{label:"数据库地址",prop:"ip"}},[n("el-input",{attrs:{placeholder:"请输入ip或域名"},model:{value:e.dataSource.ip,callback:function(t){e.dataSource.ip=t},expression:"dataSource.ip"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:7}},[n("el-form-item",{attrs:{label:"数据库PORT",prop:"port",required:""}},[n("el-input",{model:{value:e.dataSource.port,callback:function(t){e.dataSource.port=t},expression:"dataSource.port"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:7}},[n("el-form-item",{attrs:{label:"数据库表",prop:"tableName"}},[n("el-input",{model:{value:e.dataSource.tableName,callback:function(t){e.dataSource.tableName=t},expression:"dataSource.tableName"}})],1)],1)],1),e._v(" "),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:7}},[n("el-form-item",{attrs:{label:"数据库名",prop:"dbname"}},[n("el-input",{model:{value:e.dataSource.dbname,callback:function(t){e.dataSource.dbname=t},expression:"dataSource.dbname"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:7}},[n("el-form-item",{attrs:{label:"用户名",prop:"username"}},[n("el-input",{model:{value:e.dataSource.username,callback:function(t){e.dataSource.username=t},expression:"dataSource.username"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:7}},[n("el-form-item",{attrs:{label:"密码",prop:"password"}},[n("el-input",{attrs:{type:"password"},model:{value:e.dataSource.password,callback:function(t){e.dataSource.password=t},expression:"dataSource.password"}})],1)],1)],1)],1)],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"index-info"},[n("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{title:e.indexInfoTitle,size:"large","before-close":e.closeDialog,"element-loading-text":"请稍等···"},model:{value:e.isIndexInfoVisible,callback:function(t){e.isIndexInfoVisible=t},expression:"isIndexInfoVisible"}},[n("el-form",{ref:"indexInfo",attrs:{model:e.indexInfo,rules:e.rules,"label-width":"135px"}},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:11}},[n("el-form-item",{attrs:{prop:"indexName",label:"索引名",required:""}},[n("el-input",{attrs:{disabled:e.isEditable},model:{value:e.indexInfo.indexName,callback:function(t){e.indexInfo.indexName=t},expression:"indexInfo.indexName"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:10}},[n("el-form-item",{attrs:{label:"所属集群",prop:"clusterId"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{clearable:""},model:{value:e.indexInfo.clusterId,callback:function(t){e.indexInfo.clusterId=t},expression:"indexInfo.clusterId"}},e._l(e.clusters,function(t){return n("el-option-group",{key:t.label,attrs:{label:t.label}},e._l(t.options,function(e){return n("el-option",{key:e.id,attrs:{label:e.clusterId,value:e.clusterId}})}))}))],1)],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:21}},[n("el-form-item",{attrs:{label:"描述",prop:"description"}},[n("el-input",{attrs:{type:"textarea"},model:{value:e.indexInfo.description,callback:function(t){e.indexInfo.description=t},expression:"indexInfo.description"}})],1)],1)],1)],1),e._v(" "),n("index-data-sources",{ref:"dataSources",attrs:{"data-sources":e.indexInfo.dataSourceList,"index-operation":e.indexOperation,"show-import-object":e.showImportObject,"index-id":e.indexInfo.indexId}}),e._v(" "),n("div",{staticClass:"dialog-footer",slot:"footer"},[n("el-button",{on:{click:function(t){e.closeDialog()}}},[e._v("取消")]),e._v(" "),n("el-button",{attrs:{type:"confirm"},on:{click:function(t){e.submitIndexInfo()}}},[e._v("保存")])],1)],1),e._v(" "),e.showImportObject.show?n("div",[n("datasource-import-dialog",{on:{"ds-import-success":e.dsImportSuccess,"close-ds-import-dialog":e.closeDsImportDialog}})],1):e._e()],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page-content"},[n("div",{staticClass:"my-breadcrumb"},[n("el-breadcrumb",{staticClass:"my-breadcrumb-content",attrs:{separator:"/"}},[n("el-breadcrumb-item",{attrs:{to:{name:"cluster_manage"}}},[n("i",{staticClass:"fa fa-home"}),e._v("ES集群管理")]),e._v(" "),n("el-breadcrumb-item",[e._v("ES集群重启")]),e._v(" "),n("el-breadcrumb-item",[e._v(e._s(e.clusterId))])],1)],1),e._v(" "),n("div",{staticClass:"data-table-filter"},[n("div",{staticClass:"pull-left"},[n("el-button",{on:{click:e.resetClusterSettings}},[n("i",{staticClass:"fa fa-repeat"}),e._v("恢复集群默认设置")])],1),e._v(" "),n("div",{staticClass:"pull-right"},[n("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[n("el-form-item",{staticClass:"filter-search"},[n("el-button",{on:{click:e.init}},[n("i",{staticClass:"fa fa-refresh"}),e._v("刷新集群信息")])],1)],1)],1)]),e._v(" "),n("div",{staticClass:"cluster_restart_setting"},[n("el-row",{attrs:{gutter:6}},e._l(e.clusterSettingsArray,function(t,i){return n("el-col",{key:i,attrs:{span:6}},[n("Panel",{attrs:{type:e.clusterStateTag[e.clusterHealth]}},[n("div",{slot:"title"},[e._v(e._s(t.key))]),e._v(" "),n("div",{slot:"content"},["index.blocks.write"===t.key?n("el-popover",{attrs:{trigger:"hover",placement:"right"}},[""!==t.value?n("div",{staticStyle:{width:"600px"}},[n("el-row",{attrs:{gutter:10}},e._l(e.$array.strToArray(t.value),function(t,i){return n("el-col",{key:i,attrs:{span:8}},[e._v(e._s(t))])}))],1):n("div",[e._v("暂无数据")]),e._v(" "),n("el-button",{attrs:{type:"text"},slot:"reference"},[e._v("查看")])],1):n("div",[e._v(e._s(t.value||"-"))])],1)])],1)}))],1),e._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.nodeRestartList,border:"","element-loading-text":"请稍等···"}},[n("el-table-column",{attrs:{prop:"nodeName",label:"节点名称"}}),e._v(" "),n("el-table-column",{attrs:{prop:"nodeIp",label:"节点IP"}}),e._v(" "),n("el-table-column",{attrs:{prop:"indices",label:"分片分布",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-popover",{attrs:{trigger:"hover",placement:"right",disabled:""===t.row.indices}},[t.row.indices?n("div",{staticStyle:{width:"600px"}},[n("el-row",{attrs:{gutter:10}},e._l(e.$array.strToArray(t.row.indices),function(t,i){return n("el-col",{key:i,attrs:{span:8}},[e._v(e._s(t))])}))],1):n("div",[e._v("暂无分片")]),e._v(" "),n("el-button",{attrs:{type:"text",size:"small"},slot:"reference"},[n("i",{staticClass:"fa fa-file-o"})])],1)]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"nodeState",label:"节点状态",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-tag",{attrs:{type:e.noteStateTag[t.row.nodeState]}},[e._v(e._s(e.noteStateMap[t.row.nodeState]))])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"nodeTime",label:"状态时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDate")(t.row.nodeTime)))]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"lastStartupTime",label:"最近启动时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isNew?n("span",{staticClass:"text-danger"},[e._v("新 ")]):e._e(),e._v(e._s(e._f("formatDate")(t.row.lastStartupTime)))]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"onlyMaster",label:"OnlyMaster"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-tag",{attrs:{type:t.row.onlyMaster?"success":"danger","close-transition":""}},[e._v(e._s(e.onlyMasterMap[t.row.onlyMaster]))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"small",type:"success",disabled:!t.row.healthy||"could_be_restart"!==e.isEnableRestart},on:{click:function(n){e.handleRestart(t.row)}}},[e._v("重启")])]}}])})],1)],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{title:e.templateImportTitle,"before-close":e.closeDialog,"element-loading-text":"请稍等···"},model:{value:e.isTemplateImportVisible,callback:function(t){e.isTemplateImportVisible=t},expression:"isTemplateImportVisible"}},[n("div",{staticStyle:{margin:"20px 15px"}},[n("el-radio",{attrs:{label:"localUpload"},model:{value:e.importWay,callback:function(t){e.importWay=t},expression:"importWay"}},[e._v("本地上传")]),e._v(" "),n("el-radio",{attrs:{label:"otherIndexTemp"},model:{value:e.importWay,callback:function(t){e.importWay=t},expression:"importWay"}},[e._v("导入其他索引模板")])],1),e._v(" "),"localUpload"===e.importWay?n("el-form",{ref:"importInfo",attrs:{model:e.importInfo,rules:e.rules,"label-width":"90px"}},[n("el-row",[n("el-col",{attrs:{span:18}},[n("div",{staticClass:"template-import-upload"},[n("el-upload",{ref:"upload",attrs:{action:e.templateImportUrl,"auto-upload":!1,data:e.importInfo,multiple:!1,"file-list":e.fileList,"on-remove":e.handleRemove,"on-error":e.handleError,"on-success":e.handleSuccess}},[n("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.handleUpload}},[e._v("点击上传")]),e._v(" "),n("div",{staticClass:"el-upload__tip",slot:"tip"},[e._v("请上传zip文件，且不超过10Mb")])],1)],1)])],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:18}},[n("el-form-item",{attrs:{label:"变更描述",prop:"updateDesc"}},[n("el-input",{model:{value:e.importInfo.updateDesc,callback:function(t){e.importInfo.updateDesc=t},expression:"importInfo.updateDesc"}})],1)],1)],1)],1):e._e(),e._v(" "),"otherIndexTemp"===e.importWay?n("div",{staticStyle:{margin:"15px"}},[n("el-select",{staticStyle:{width:"100%","margin-bottom":"10px"},attrs:{filterable:"",placeholder:"请选择索引"},on:{change:e.indexChange},model:{value:e.indexSelected,callback:function(t){e.indexSelected=t},expression:"indexSelected"}},e._l(e.indexAllList,function(t){return n("el-option",{key:t.id,attrs:{label:t.indexName,value:t.id}},[n("span",{staticStyle:{float:"left"}},[e._v(e._s(t.indexName))]),e._v(" "),n("span",{staticStyle:{float:"right",color:"#B8B8B8","font-size":"13px"}},[e._v(e._s(t.clusterName))])])})),e._v(" "),n("el-transfer",{attrs:{filterable:"",data:e.importTemplateList,props:{key:"id",label:"templateName"},titles:["可选模板","已选模板"]},model:{value:e.templateSelected,callback:function(t){e.templateSelected=t},expression:"templateSelected"}})],1):e._e(),e._v(" "),n("div",{staticClass:"dialog-footer",slot:"footer"},[n("el-button",{on:{click:function(t){e.closeDialog()}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"confirm"},on:{click:e.submitImportTemplate}},[e._v("确定")])],1)],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"my-container"},[n("Navbar"),e._v(" "),n("router-view"),e._v(" "),n("Version-footer")],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"token-detail",attrs:{"element-loading-text":"请稍等···"}},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:10}},[n("div",{staticClass:"token-cluster"},[n("div",{staticClass:"token-title"},[e._v("\n                    当前选择Token : "),n("span",{staticClass:"token-name-span"},[e._v(e._s(e.tokenInfo.title))])]),e._v(" "),n("div",{staticClass:"mrg-top-15"},[n("span",{staticClass:"title-span"},[e._v("集群列表"),n("small",{staticStyle:{color:"gray"}},[e._v("(一个token只能绑定一个集群)")])]),e._v(" "),n("el-tree",{staticClass:"token-cluster-tree",style:e.clusterTreeHeight,attrs:{data:e.clusterList,"render-content":e.renderCluster,"highlight-current":"","node-key":"id"},on:{"node-click":e.handleNodeClick}})],1)])]),e._v(" "),n("el-col",{attrs:{span:14}},[n("token-index",{attrs:{"token-cluster-info":e.tokenClusterInfo,"cluster-tree-height":e.clusterTreeHeight},on:{"update-token-cluster":e.updateTokenCluster}})],1)],1)],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",[n("div",{staticClass:"tm-info"},[n("div",{staticClass:"tm-item"},[e._t("title")],2),e._v(" "),e._m(0),e._v(" "),n("time",{staticClass:"tm-datetime"},[e._t("date")],2)]),e._v(" "),n("div",{staticClass:"tm-box"},[e._t("content")],2)])},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tm-icon"},[n("i",{staticClass:"el-icon-time"})])}]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page-content"},[n("div",{staticClass:"my-breadcrumb"},[n("el-breadcrumb",{staticClass:"my-breadcrumb-content",attrs:{separator:"/"}},[n("el-breadcrumb-item",{attrs:{to:{name:"permission_manage"}}},[n("i",{staticClass:"fa fa-home"}),e._v("权限管理")])],1)],1),e._v(" "),n("div",{staticClass:"page-tab"},[n("el-tabs",{on:{"tab-click":e.onTabClick},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[n("el-tab-pane",{attrs:{name:"user_manage"}},[n("span",{slot:"label"},[n("i",{staticClass:"fa fa-user"}),e._v("用户管理")])])],1),e._v(" "),n("router-view")],1)])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{title:e.pluginInfoTitle,visible:e.isVisible,"before-close":e.closeDialog,"element-loading-text":"请稍等···"},on:{"update:visible":function(t){e.isVisible=t}}},[n("el-form",{ref:"pluginInfo",attrs:{model:e.pluginInfo,rules:e.rules,"label-width":"120px"}},[n("div",[n("el-row",[n("el-col",{attrs:{span:22}},[n("el-form-item",{attrs:{label:"插件名称",prop:"pluginName"}},[n("el-input",{attrs:{disabled:e.isEditable},model:{value:e.pluginInfo.pluginName,callback:function(t){e.pluginInfo.pluginName=t},expression:"pluginInfo.pluginName"}})],1)],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:22}},[n("el-form-item",{attrs:{prop:"clusterId",label:"所属集群"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{disabled:e.isEditable},model:{value:e.pluginInfo.clusterId,callback:function(t){e.pluginInfo.clusterId=t},expression:"pluginInfo.clusterId"}},e._l(e.clusters,function(e){return n("el-option",{key:e.clusterId,attrs:{label:e.description,value:e.clusterId}})}))],1)],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:22}},[n("el-form-item",{attrs:{label:"插件版本",prop:"pluginVersion"}},[n("el-input",{model:{value:e.pluginInfo.pluginVersion,callback:function(t){e.pluginInfo.pluginVersion=t},expression:"pluginInfo.pluginVersion"}})],1)],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:22}},[n("el-form-item",{attrs:{label:"插件类型",prop:"pluginType"}},[n("el-select",{staticStyle:{width:"100%"},model:{value:e.pluginInfo.pluginType,callback:function(t){e.pluginInfo.pluginType=t},expression:"pluginInfo.pluginType"}},e._l(e.$option.pluginTypes,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:22}},[n("el-form-item",{attrs:{label:"路径",prop:"packagePath"}},[n("el-input",{attrs:{placeholder:"请上传插件包，获取包路径",disabled:!0},model:{value:e.pluginInfo.packagePath,callback:function(t){e.pluginInfo.packagePath=t},expression:"pluginInfo.packagePath"}})],1)],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:22}},[n("el-form-item",{attrs:{label:"变更描述",prop:"note"}},[n("el-input",{attrs:{type:"textarea"},model:{value:e.pluginInfo.note,callback:function(t){e.pluginInfo.note=t},expression:"pluginInfo.note"}})],1)],1)],1),e._v(" "),n("div",{staticClass:"plugin-upload-warning"},[e._v('对于ES原生插件，需要通过"ES集群管理"->"重启"重启全部节点后才生效')]),e._v(" "),e.enableUpload?n("div",{staticClass:"plugin-upload"},[n("el-upload",{ref:"upload",attrs:{action:"/pallas/plugin/upgrade/fileUpload.json",data:e.uploadData,"auto-upload":!0,multiple:!1,"on-remove":e.handleRemove,"on-error":e.handleError,"on-success":e.handleSuccess}},[n("el-button",{attrs:{size:"small",type:"primary",icon:"upload"},on:{click:e.handleUpload}},[e._v("上传插件zip包")]),e._v(" "),n("div",{staticClass:"el-upload__tip",slot:"tip"},[e._v("请先上传插件zip文件，获取包路径")])],1)],1):n("div",{staticClass:"plugin-upload-warning"},[e._v("*上传插件包前，请先输入插件名称，所属集群以及插件版本")])],1)]),e._v(" "),n("div",{staticClass:"dialog-footer",slot:"footer"},[n("el-button",{on:{click:function(t){e.closeDialog()}}},[e._v("取消")]),e._v(" "),n("el-button",{attrs:{type:"confirm"},on:{click:function(t){e.handleSubmit()}}},[e._v("确定")])],1)],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"data-source-content"},[n("div",{staticClass:"data-source-add"},[n("el-button",{attrs:{size:"mini",icon:"plus"},on:{click:e.addDataSource}},[e._v("新增数据源")]),e._v(" "),n("el-button",{attrs:{size:"mini",type:"warning"},on:{click:e.importDs}},[n("i",{staticClass:"fa fa-arrow-circle-o-down"}),e._v("导入Mysql数据源")]),e._v(" "),n("el-button",{directives:[{name:"show",rawName:"v-show",value:e.dataSources.length>0&&""!=e.dataSources[0].ip&&e.indexId,expression:"dataSources.length > 0 && dataSources[0].ip != '' && indexId "}],attrs:{size:"mini",type:"warning"},on:{click:e.exportDs}},[n("i",{staticClass:"fa fa-arrow-circle-o-up"}),e._v("导出Mysql数据源")])],1),e._v(" "),e._l(e.dataSources,function(t,i){return n("el-collapse",{key:i,model:{value:i,callback:function(e){i=e},expression:"index"}},[n("el-collapse-item",{attrs:{name:i}},[n("template",{slot:"title"},[n("span",{staticStyle:{"margin-right":"10px"}},[e._v("数据源("+e._s(t.dbname)+" - "+e._s(t.tableName)+")")]),e._v(" "),n("el-button",{attrs:{type:"danger",size:"mini",icon:"minus"},on:{click:function(n){n.stopPropagation(),e.deleteDataSource(t)}}}),e._v(" "),n("span",{staticStyle:{color:"red","margin-left":"10px"}},[e._v(e._s(t.errorMessage))])],1),e._v(" "),n("index-data-source-item",{ref:"dataSourceItem",refInFor:!0,attrs:{"index-operation":e.indexOperation,"data-source":t},on:{"db-validate":e.dbValidate}})],2)],1)})],2)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:e.schemaImportTitle,"before-close":e.handleClose},model:{value:e.isSchemaImportVisible,callback:function(t){e.isSchemaImportVisible=t},expression:"isSchemaImportVisible"}},[n("el-form",[n("el-row",[n("el-col",{attrs:{span:18}},[n("el-form-item",[n("el-upload",{ref:"upload",attrs:{action:e.schemaImportUrl,"auto-upload":!1,multiple:!1,"file-list":e.fileList,"on-remove":e.handleRemove,"on-error":e.handleError,"on-success":e.handleSuccess}},[n("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.handleUpload}},[e._v("点击上传")]),e._v(" "),n("div",{staticClass:"el-upload__tip",slot:"tip"},[e._v("请上传json文件，且不超过10Mb")])],1)],1)],1)],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",slot:"footer"},[n("el-button",{on:{click:function(t){e.handleClose()}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"confirm"},on:{click:e.submitImportSchema}},[e._v("确定")])],1)],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"template-test"},[n("div",{staticClass:"template-test-content"},[n("div",{staticClass:"template-test-head"},[e._v("上传数据源")]),e._v(" "),n("div",{staticClass:"template-test-body"},[n("template-test-data-source",{attrs:{"index-id":e.indexId,"template-name":e.templateName,"data-source":e.dataSource}}),e._v(" "),n("template-test-upload",{attrs:{"add-data-source":e.addDataSource,"data-source":e.dataSource},on:{"template-test-upload-success":e.templateTestUploadSuccess}})],1),e._v(" "),e._m(0)]),e._v(" "),n("template-test-params",{attrs:{"index-id":e.indexId,"template-name":e.templateName,"params-info":e.paramsInfo,"data-source":e.dataSource}})],1)},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"template-test-tips"},[n("span",[e._v("注意:若文件包含多列，可以定义多个参数名，参数名之间用分号隔开，例如k1;k2")])])}]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"target-group-item"},[n("div",{staticClass:"target-group-header"},[n("div",{staticClass:"pull-left"},[n("div",[e.editable?n("el-input",{staticStyle:{width:"100px"},attrs:{size:"mini"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}):n("span",{staticClass:"title"},[e._v(e._s(e.name))]),e._v(" "),1===e.targetGroupItemInfo.clusterLevel?n("el-tag",{attrs:{type:"warning"}},[e._v("集群级别")]):e._e(),e._v(" "),2===e.targetGroupItemInfo.clusterLevel?n("el-tag",{attrs:{type:"warning"}},[e._v("分片动态绑定")]):e._e()],1)]),e._v(" "),e.privilege?n("div",{staticClass:"pull-right"},[n("el-button",{directives:[{name:"show",rawName:"v-show",value:e.editable,expression:"editable"}],attrs:{size:"mini",type:"success"},on:{click:function(t){e.handleSave()}}},[e._v("保存")]),e._v(" "),n("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.editable,expression:"!editable"}],attrs:{size:"mini"},on:{click:function(t){e.handleEdit()}}},[e._v("编辑")]),e._v(" "),n("el-button",{directives:[{name:"show",rawName:"v-show",value:e.editable,expression:"editable"}],attrs:{size:"mini"},on:{click:function(t){e.handleCancel()}}},[e._v("取消")]),e._v(" "),n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){e.handleDelete()}}},[e._v("删除")])],1):e._e()]),e._v(" "),n("div",{staticClass:"target-group-content"},[n("el-tree",{ref:"mytree",attrs:{data:e.myTree,"show-checkbox":"","node-key":"name","default-expand-all":e.isDefaultExpand,"default-checked-keys":e.treeCheckedKeys,"render-content":e.renderContent,props:e.defaultProps},on:{"check-change":e.checkChange}})],1)])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.dataSource,border:"","element-loading-text":"请稍等···"}},[n("el-table-column",{attrs:{label:"数据源参数"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"template-test-popper"}},[n("div",{staticClass:"pull-left"},[n("el-input",{model:{value:t.row.editParamNameDef,callback:function(e){t.row.editParamNameDef=e},expression:"scope.row.editParamNameDef"}})],1),e._v(" "),n("div",{staticClass:"popper-button"},[n("el-button",{attrs:{size:"small"},on:{click:function(n){e.handleSave(t.row)}}},[e._v("保存")])],1),e._v(" "),n("div",{slot:"reference"},[e._v("\n                    "+e._s(t.row.paramNameDef)+"\n                ")])])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"fileName",label:"数据源文件"}}),e._v(" "),n("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(n){e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"my-tab-content"},[n("div",{staticClass:"content"},[n("el-button",{attrs:{type:"primary",icon:"plus",disabled:!e.isAllPrivilege},on:{click:e.handleAdd}},[e._v("新增规则")])],1),e._v(" "),n("div",{staticClass:"content"},[[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.flowRecordConfigList,border:"","highlight-current-row":"","element-loading-text":"请稍等···"},on:{"cell-click":e.cellClick}},[n("el-table-column",{attrs:{label:"规则id",prop:"id",width:"70px"}}),e._v(" "),n("el-table-column",{attrs:{label:"目标模板",prop:"template.templateName","min-width":"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[null===t.row.template?n("div",[e._v("全部")]):n("div",[e._v(e._s(t.row.template.templateName))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"采集开始时间",prop:"startTime","min-width":"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDate")(t.row.startTime)))]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"采集结束时间",prop:"endTime","min-width":"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDate")(t.row.endTime)))]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"抽样系数",prop:"sampleRate","min-width":"60"}}),e._v(" "),n("el-table-column",{attrs:{label:"目标采集数",prop:"limit","min-width":"70"}}),e._v(" "),n("el-table-column",{attrs:{label:"最近更新人","min-width":"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.createUser||"-"))]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"最近更新时间",prop:"endTime","min-width":"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDate")(t.row.updateTime)))]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"状态",prop:"isUsed","min-width":"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-tag",{attrs:{type:t.row.isEnable?"success":"danger","close-transition":""}},[e._v(e._s(e._f("translateIsEnable")(t.row.isEnable||!1)))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-dropdown",{attrs:{trigger:"click"}},[n("span",{staticClass:"el-dropdown-link"},[e._v("\n                            操作"),n("i",{staticClass:"el-icon-caret-bottom el-icon--right"})]),e._v(" "),n("el-dropdown-menu",{staticClass:"dropdown-operation",slot:"dropdown"},[e.isAllPrivilege?n("el-dropdown-item",{directives:[{name:"show",rawName:"v-show",value:!t.row.isEnable,expression:"!scope.row.isEnable"}]},[n("a",{on:{click:function(n){e.enableConfig(t.row)}}},[n("span",[n("i",{staticClass:"fa fa-hand-o-right"}),e._v("启用")])])]):e._e(),e._v(" "),e.isAllPrivilege?n("el-dropdown-item",{directives:[{name:"show",rawName:"v-show",value:t.row.isEnable,expression:"scope.row.isEnable"}]},[n("a",{on:{click:function(n){e.disableConfig(t.row)}}},[n("span",[n("i",{staticClass:"fa fa-stop-circle-o"}),e._v("禁用")])])]):e._e(),e._v(" "),e.isAllPrivilege?n("el-dropdown-item",{directives:[{name:"show",rawName:"v-show",value:!t.row.isEnable,expression:"!scope.row.isEnable"}]},[n("a",{on:{click:function(n){e.handleEdit(t.row,"edit")}}},[n("span",[n("i",{staticClass:"fa fa-pencil-square-o"}),e._v("编辑")])])]):e._e(),e._v(" "),e.isAllPrivilege?n("el-dropdown-item",{directives:[{name:"show",rawName:"v-show",value:!t.row.isEnable,expression:"!scope.row.isEnable"}]},[n("a",{on:{click:function(n){e.handleDelete(t.row)}}},[n("span",[n("i",{staticClass:"fa fa-trash"}),e._v("删除")])])]):e._e()],1)],1)]}}])})],1)],e._v(" "),0!=e.total?n("div",{staticClass:"my-pagination"},[n("el-pagination",{attrs:{layout:"prev, pager, next",total:e.total,"page-size":e.pageSize,"current-page":e.currentPage},on:{"current-change":e.changePage}})],1):e._e(),e._v(" "),e.isConfigInfoVisible?n("div",[n("config-info-dialog",{attrs:{"config-operation":e.configOperation,"config-info-title":e.configInfoTitle,"config-info":e.configInfo,templates:e.templates},on:{"close-dialog":e.closeDialog,"operate-close-dialog":e.operateCloseDialog}})],1):e._e()],2)])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{"before-close":e.handleClose},model:{value:e.isVisible,callback:function(t){e.isVisible=t},expression:"isVisible"}},[n("span",{staticClass:"el-dialog__title",slot:"title"},[e._v("模板差异对比( "),n("span",{staticClass:"del"},[e._v("- 删除")]),e._v(" / "),n("span",{staticClass:"ins"},[e._v("+ 增加")]),e._v(" )")]),e._v(" "),n("div",{staticClass:"view-content"},[n("pre",{directives:[{name:"line-diff",rawName:"v-line-diff",value:e.jsonDiffInfo,expression:"jsonDiffInfo"}],staticClass:"text-diff"})]),e._v(" "),n("div",{staticClass:"dialog-footer",slot:"footer"},[n("el-button",{on:{click:function(t){e.handleClose()}}},[e._v("取消")]),e._v(" "),e.isOverwrite?n("el-button",{attrs:{type:"confirm"},on:{click:e.handleOverwrite}},[e._v("覆盖当前版本")]):e._e()],1)])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"footer"},[n("p",[e._v(e._s(e.versionNumber))])])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"my-tab-content"},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.isAllPrivilege,expression:"isAllPrivilege"}],staticClass:"content"},[n("el-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.handleAdd}},[e._v("新增")])],1),e._v(" "),n("div",{staticClass:"content"},[[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.cronDeleteList,border:"","element-loading-text":"请稍等···"}},[n("el-table-column",{attrs:{label:"id",prop:"id",width:"40px"}}),e._v(" "),n("el-table-column",{attrs:{label:"版本id",prop:"versionId",width:"100px"}}),e._v(" "),n("el-table-column",{attrs:{label:"scroll_size",prop:"scrollSize",width:"100px"}}),e._v(" "),n("el-table-column",{attrs:{label:"cron表达式",prop:"cron",width:"140px"}}),e._v(" "),n("el-table-column",{attrs:{label:"更新时间",prop:"updateTime","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDate")(t.row.updateTime)))]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"是否启用",prop:"isUsed",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-tag",{attrs:{type:t.row.isSyn?"success":"danger","close-transition":""}},[e._v(e._s(t.row.isSyn))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作",width:"300px"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-tooltip",{attrs:{content:"dsl",placement:"top"}},[n("el-button",{attrs:{type:"text"},on:{click:function(n){e.getDsl(t.row)}}},[n("i",{staticClass:"fa fa-file-code-o"})])],1),e._v(" "),e.isAllPrivilege?n("el-tooltip",{attrs:{content:"执行查询",placement:"top"}},[n("el-button",{attrs:{type:"text"},on:{click:function(n){e.executeSearchDsl(t.row)}}},[n("i",{staticClass:"fa fa-search"})])],1):e._e(),e._v(" "),e.isAllPrivilege?n("el-tooltip",{directives:[{name:"show",rawName:"v-show",value:t.row.isSyn,expression:"scope.row.isSyn"}],attrs:{content:"停用",placement:"top"}},[n("el-button",{attrs:{type:"text"},on:{click:function(n){e.handleDisableAndDeleteJob(t.row)}}},[n("i",{staticClass:"fa fa-level-down"})])],1):e._e(),e._v(" "),e.isAllPrivilege?n("el-tooltip",{directives:[{name:"show",rawName:"v-show",value:!t.row.isSyn,expression:"!scope.row.isSyn"}],attrs:{content:"启用",placement:"top"}},[n("el-button",{attrs:{type:"text"},on:{click:function(n){e.handleCreateAndEnableJob(t.row)}}},[n("i",{staticClass:"fa fa-level-up"})])],1):e._e(),e._v(" "),e.isAllPrivilege?n("el-tooltip",{directives:[{name:"show",rawName:"v-show",value:t.row.isSyn,expression:"scope.row.isSyn"}],attrs:{content:"立即执行",placement:"top"}},[n("el-button",{attrs:{type:"text"},on:{click:function(n){e.handleRunAtOnce(t.row)}}},[n("i",{staticClass:"fa fa-play"})])],1):e._e(),e._v(" "),e.isAllPrivilege?n("el-tooltip",{directives:[{name:"show",rawName:"v-show",value:!t.row.isSyn,expression:"!scope.row.isSyn"}],attrs:{content:"编辑",placement:"top"}},[n("el-button",{attrs:{type:"text"},on:{click:function(n){e.handleEdit(t.row)}}},[n("i",{staticClass:"fa fa-pencil-square-o"})])],1):e._e(),e._v(" "),e.isAllPrivilege?n("el-tooltip",{directives:[{name:"show",rawName:"v-show",value:!t.row.isSyn,expression:"!scope.row.isSyn"}],attrs:{content:"删除",placement:"top"}},[n("el-button",{attrs:{type:"text"},on:{click:function(n){e.handleDelete(t.row)}}},[n("i",{staticClass:"fa fa-trash"})])],1):e._e()]}}])})],1)]],2),e._v(" "),e.showDsl?n("div",[n("json-content-dialog",{attrs:{title:e.viewInfoTitle,content:e.viewInfo},on:{"close-dialog":e.closeDialog}})],1):e._e(),e._v(" "),e.isCronDeleteVisible?n("div",[n("crondelete-dialog",{attrs:{"index-id":e.indexId,"crondelete-operation":e.crondeleteOperation,"crondelete-title":e.crondeleteTitle,"crondelete-info":e.crondeleteInfo},on:{"close-dialog":e.closeDialog,"operate-close-dialog":e.operateCloseDialog}})],1):e._e()])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"version-info-dialog"},[n("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{size:"large","before-close":e.closeDialog,"element-loading-text":"请稍等···"},model:{value:e.isVersionInfoVisible,callback:function(t){e.isVersionInfoVisible=t},expression:"isVersionInfoVisible"}},[n("span",{slot:"title"},[n("span",[e._v(e._s(e.versionInfoTitle))])]),e._v(" "),n("el-form",{ref:"versionInfo",attrs:{model:e.versionInfo,rules:e.rules,"label-position":"left"}},[n("div",{staticClass:"label-title"},[n("span",{staticClass:"span-title"},[e._v("索引配置")]),e._v(" "),e.isLogical?n("span",{staticStyle:{color:"#C8C8C8"}},[e._v("（所属集群："+e._s(e.clusterArray.join())+"）")]):e._e()]),e._v(" "),n("div",{staticClass:"label-content"},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"分片数量",prop:"shardNum","label-width":"120px"}},[n("el-input",{attrs:{disabled:e.isEditable},model:{value:e.versionInfo.shardNum,callback:function(t){e.versionInfo.shardNum=e._n(t)},expression:"versionInfo.shardNum"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"复制数量",prop:"replicationNum","label-width":"120px"}},[n("el-input",{attrs:{disabled:e.isEditable},model:{value:e.versionInfo.replicationNum,callback:function(t){e.versionInfo.replicationNum=e._n(t)},expression:"versionInfo.replicationNum"}})],1)],1)],1)],1),e._v(" "),n("div",{staticClass:"label-content"},[e.isLogical?n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{label:"所属节点",prop:"nodes","label-width":"120px"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",filterable:"","value-key":"name",placeholder:"请选择机器",disabled:e.isEditable},model:{value:e.versionInfo.nodes,callback:function(t){e.versionInfo.nodes=t},expression:"versionInfo.nodes"}},e._l(e.clusterGroups,function(t){return n("el-option-group",{key:t.clusterId,attrs:{label:t.clusterId}},e._l(t.nodes,function(t){return n("el-option",{key:t.name,attrs:{label:t.name,value:t}},[n("span",{staticStyle:{float:"left"}},[e._v(e._s(t.name))]),e._v(" "),n("el-tooltip",{attrs:{placement:"right"}},[n("div",{slot:"content"},[t.indicis.length>0?n("div",{staticStyle:{width:"600px"}},e._l(t.indicis,function(t){return n("el-col",{key:t,attrs:{span:8}},[e._v(e._s(t))])})):n("div",[e._v("暂无索引")])]),e._v(" "),n("el-tag",{staticStyle:{float:"left","margin-left":"10px"}},[e._v(e._s(t.indicis.length))])],1)],1)}))}))],1)],1)],1):n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"所属集群",prop:"clusterId","label-width":"120px",required:""}},[n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择集群",disabled:e.isEditable},on:{change:e.clusterChange},model:{value:e.versionInfo.clusterId,callback:function(t){e.versionInfo.clusterId=t},expression:"versionInfo.clusterId"}},e._l(e.clusters,function(e){return n("el-option",{key:e.id,attrs:{label:e.clusterId,value:e.id}})}))],1)],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"所属节点",prop:"nodes","label-width":"120px"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",filterable:"",placeholder:"请选择机器",disabled:e.isEditable},model:{value:e.versionInfo.nodes,callback:function(t){e.versionInfo.nodes=t},expression:"versionInfo.nodes"}},e._l(e.clusterNodes,function(t){return n("el-option",{key:t.name,attrs:{label:t.name,value:t.name}},[n("span",{staticStyle:{float:"left"}},[e._v(e._s(t.name))]),e._v(" "),n("el-tooltip",{attrs:{placement:"right"}},[n("div",{slot:"content"},[t.indicis.length>0?n("div",{staticStyle:{width:"600px"}},e._l(t.indicis,function(t){return n("el-col",{key:t,attrs:{span:8}},[e._v(e._s(t))])})):n("div",[e._v("暂无索引")])]),e._v(" "),n("el-tag",{staticStyle:{float:"left","margin-left":"10px"}},[e._v(e._s(t.indicis.length))])],1)],1)}))],1)],1)],1)],1),e._v(" "),n("div",{staticClass:"label-content"},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:e.routingKeyWidth}},[n("el-form-item",{attrs:{label:"Routing Key",prop:"routingKey","label-width":"120px"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",disabled:e.isEditable},model:{value:e.versionInfo.routingKey,callback:function(t){e.versionInfo.routingKey=t},expression:"versionInfo.routingKey"}},e._l(e.versionInfo.schema,function(e){return n("el-option",{key:e.fieldName,attrs:{label:e.fieldName,value:e.fieldName}})}))],1)],1),e._v(" "),n("el-col",{attrs:{span:e.routingKeyWidth}},[n("el-form-item",{attrs:{label:"Id列名",prop:"idField","label-width":"120px"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",disabled:e.isEditable},model:{value:e.versionInfo.idField,callback:function(t){e.versionInfo.idField=t},expression:"versionInfo.idField"}},e._l(e.versionInfo.schema,function(e){return n("el-option",{key:e.fieldName,attrs:{label:e.fieldName,value:e.fieldName}})}))],1)],1),e._v(" "),e.isMetaDataNull?e._e():n("el-col",{attrs:{span:e.routingKeyWidth}},[n("el-form-item",{attrs:{label:"Update Time列名",prop:"updateTimeField","label-width":"150px"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",disabled:e.isEditable},model:{value:e.versionInfo.updateTimeField,callback:function(t){e.versionInfo.updateTimeField=t},expression:"versionInfo.updateTimeField"}},e._l(e.versionInfo.schema,function(e){return n("el-option",{key:e.fieldName,attrs:{label:e.fieldName,value:e.fieldName}})}))],1)],1)],1)],1),e._v(" "),n("div",{staticClass:"label-title"},[n("span",{staticClass:"span-title"},[e._v("慢日志落盘配置（单位ms，-1不限定）")])]),e._v(" "),n("div",{staticClass:"label-content"},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"Index Slow",prop:"indexSlowThreshold","label-width":"120px"}},[n("el-input",{attrs:{disabled:e.isEditable},model:{value:e.versionInfo.indexSlowThreshold,callback:function(t){e.versionInfo.indexSlowThreshold=e._n(t)},expression:"versionInfo.indexSlowThreshold"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"Fetch Slow",prop:"fetchSlowThreshold","label-width":"120px"}},[n("el-input",{attrs:{disabled:e.isEditable},model:{value:e.versionInfo.fetchSlowThreshold,callback:function(t){e.versionInfo.fetchSlowThreshold=e._n(t)},expression:"versionInfo.fetchSlowThreshold"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"Query Slow",prop:"querySlowThreshold","label-width":"120px"}},[n("el-input",{attrs:{disabled:e.isEditable},model:{value:e.versionInfo.querySlowThreshold,callback:function(t){e.versionInfo.querySlowThreshold=e._n(t)},expression:"versionInfo.querySlowThreshold"}})],1)],1)],1)],1),e._v(" "),n("div",{staticClass:"label-title"},[n("span",{staticClass:"span-title"},[e._v("索引其他配置")])]),e._v(" "),n("div",{staticClass:"label-content"},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"refresh（秒）",prop:"refreshInterval","label-width":"120px"}},[n("el-input",{attrs:{disabled:e.isEditable},model:{value:e.versionInfo.refreshInterval,callback:function(t){e.versionInfo.refreshInterval=e._n(t)},expression:"versionInfo.refreshInterval"}})],1)],1),e._v(" "),e.isMetaDataNull?e._e():n("div",[n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"只导局部字段",prop:"filterFields","label-width":"120px"}},[n("div",{staticClass:"my-switch"},[n("el-switch",{attrs:{disabled:e.isEditable},model:{value:e.versionInfo.filterFields,callback:function(t){e.versionInfo.filterFields=t},expression:"versionInfo.filterFields"}})],1)])],1),e._v(" "),e.$option.versionVdpTypes&&e.$option.versionVdpTypes.length>0?n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"同步数据类型",prop:"vdp","label-width":"100px"}},[n("div",{staticClass:"my-switch"},[n("el-radio-group",{attrs:{disabled:e.isEditable,size:"small"},model:{value:e.versionInfo.vdp,callback:function(t){e.versionInfo.vdp=t},expression:"versionInfo.vdp"}},e._l(e.$option.versionVdpTypes,function(t){return n("el-radio-button",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])}))],1)])],1):e._e()],1)],1)],1),e._v(" "),n("div",{staticClass:"label-title"},[n("span",{staticClass:"span-title"},[e._v("mapping配置")]),e._v(" "),e.isMetaDataNull&&0===e.versionInfo.schema.length?n("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(t){e.addField(0)}}},[n("i",{staticClass:"fa fa-plus"}),e._v("新增")]):e._e(),e._v(" "),n("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.isEditable,expression:"!isEditable"}],attrs:{size:"mini",type:"warning"},on:{click:e.importSchema}},[n("i",{staticClass:"fa fa-arrow-circle-o-down"}),e._v("导入schema")]),e._v(" "),n("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isEditable,expression:"isEditable"}],attrs:{size:"mini",type:"warning"},on:{click:e.exportSchema}},[n("i",{staticClass:"fa fa-arrow-circle-o-up"}),e._v("导出schema")])],1),e._v(" "),n("div",[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.versionInfo.schema,border:"","max-height":280}},[n("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"small",type:"success",disabled:e.isEditable},on:{click:function(n){e.addField(t.$index)}}},[n("i",{staticClass:"el-icon-plus"})]),e._v(" "),n("el-button",{attrs:{size:"small",type:"danger",disabled:e.isEditable},on:{click:function(n){e.deleteField(t.row)}}},[n("i",{staticClass:"el-icon-minus"})])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"字段名","min-width":"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.row.isNew,expression:"!scope.row.isNew"}],attrs:{type:"text"},on:{click:function(n){e.viewSchemaChildren(t.row)}}},[0!==t.row.children.length?n("span",{staticClass:"red"},[e._v("*")]):e._e(),e._v(" "),n("span",[e._v(e._s(t.row.fieldName))])]),e._v(" "),n("el-input",{directives:[{name:"show",rawName:"v-show",value:t.row.isNew,expression:"scope.row.isNew"}],staticStyle:{width:"50%"},attrs:{placeholder:"请输入字段名"},model:{value:t.row.fieldName,callback:function(e){t.row.fieldName=e},expression:"scope.row.fieldName"}}),e._v(" "),n("el-button",{directives:[{name:"show",rawName:"v-show",value:t.row.isNew,expression:"scope.row.isNew"}],attrs:{type:"text"},on:{click:function(n){e.viewSchemaChildren(t.row)}}},[n("span",[e._v("子字段")])])]}}])}),e._v(" "),e.isMetaDataNull?e._e():n("el-table-column",{attrs:{label:"DB类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                          "+e._s(t.row.dbFieldType||"N/A")+"\n                        ")]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"ES类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("select",{directives:[{name:"model",rawName:"v-model",value:t.row.fieldType,expression:"scope.row.fieldType"}],attrs:{size:"small",disabled:e.isEditable},on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});t.row.fieldType=e.target.multiple?n:n[0]},function(n){e.fieldTypeChange(t.row)}]}},e._l(e.fieldTypes,function(t){return n("option",{key:t.value,domProps:{value:t.value}},[e._v(e._s(t.label))])}))]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"多值/单值"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("select",{directives:[{name:"model",rawName:"v-model",value:t.row.multi,expression:"scope.row.multi"}],attrs:{size:"small",disabled:e.isEditable},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});t.row.multi=e.target.multiple?n:n[0]}}},[n("option",{attrs:{label:"单值"},domProps:{value:!1}},[e._v("单值")]),e._v(" "),n("option",{attrs:{label:"多值"},domProps:{value:!0}},[e._v("多值")])])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"是否查询关键字","min-width":"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-checkbox",{attrs:{disabled:e.isEditable||"nested"===t.row.fieldType},model:{value:t.row.search,callback:function(e){t.row.search=e},expression:"scope.row.search"}},[e._v("查询关键字")])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"排序或聚合"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-checkbox",{attrs:{disabled:e.isEditable||"nested"===t.row.fieldType||"text"===t.row.fieldType},model:{value:t.row.docValue,callback:function(e){t.row.docValue=e},expression:"scope.row.docValue"}},[e._v("用于排序或聚合")])]}}])})],1)],1)]),e._v(" "),n("div",{staticClass:"dialog-footer",slot:"footer"},[n("el-button",{on:{click:function(t){e.closeDialog()}}},[e._v("取 消")]),e._v(" "),e.isEditable?e._e():n("el-button",{attrs:{type:"confirm"},on:{click:function(t){e.submitVersionInfo()}}},[e._v("确 定")])],1)],1),e._v(" "),n("schema-child-dialog",{attrs:{"is-schema-child-visible":e.isSchemaChildVisible,"schema-child-info":e.schemaChildInfo,"version-operation":e.versionOperation,"schema-parent-field-name":e.schemaParentFieldName},on:{"close-schema-dialog":e.closeSchemaDialog,"add-schema-child":e.addSchemaChild}}),e._v(" "),e.isSchemaImportVisible?n("div",[n("schema-import-dialog",{attrs:{"schema-import-title":e.schemaImportTitle,"schema-import-url":e.schemaImportUrl},on:{"schema-import-success":e.schemaImportSuccess,"close-schema-import-dialog":e.closeSchemaImportDialog}})],1):e._e()],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"target-group-item"},[n("div",{staticClass:"target-group-header"},[n("div",{staticClass:"pull-left"},[n("div",[e.editable?n("el-input",{staticStyle:{width:"100px"},attrs:{size:"mini"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}):n("span",{staticClass:"title"},[e._v(e._s(e.name))]),e._v(" "),0===e.targetGroupItemInfo.clusterLevel?n("el-tag",{attrs:{type:"warning"}},[e._v("普通级别")]):e._e(),e._v(" "),1===e.targetGroupItemInfo.clusterLevel?n("el-tag",{attrs:{type:"warning"}},[e._v("集群级别")]):e._e(),e._v(" "),2===e.targetGroupItemInfo.clusterLevel?n("el-tag",{attrs:{type:"warning"}},[e._v("分片动态绑定")]):e._e(),e._v(" "),3===e.targetGroupItemInfo.clusterLevel?n("el-tag",{attrs:{type:"warning"}},[e._v("集群级别(主分片优先)")]):e._e(),e._v(" "),4===e.targetGroupItemInfo.clusterLevel?n("el-tag",{attrs:{type:"warning"}},[e._v("集群级别(复制分片优先)")]):e._e()],1)]),e._v(" "),e.privilege?n("div",{staticClass:"pull-right"},[n("el-button",{directives:[{name:"show",rawName:"v-show",value:e.editable,expression:"editable"}],attrs:{size:"mini",type:"success"},on:{click:function(t){e.handleSave()}}},[e._v("保存")]),e._v(" "),n("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.editable,expression:"!editable"}],attrs:{size:"mini"},on:{click:function(t){e.handleEdit()}}},[e._v("编辑")]),e._v(" "),n("el-button",{directives:[{name:"show",rawName:"v-show",value:e.editable,expression:"editable"}],attrs:{size:"mini"},on:{click:function(t){e.handleCancel()}}},[e._v("取消")]),e._v(" "),n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){e.handleDelete()}}},[e._v("删除")])],1):e._e()]),e._v(" "),n("div",{staticClass:"target-group-content"},[n("el-tree",{ref:"mytree",attrs:{data:e.myTree,"show-checkbox":"","node-key":"name","default-expand-all":e.isDefaultExpand,"default-checked-keys":e.treeCheckedKeys,"render-content":e.renderContent,props:e.defaultProps},on:{"check-change":e.checkChange}})],1)])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"page-content",attrs:{"element-loading-text":"请稍等···"}},[n("div",{staticClass:"my-breadcrumb"},[n("el-breadcrumb",{staticClass:"my-breadcrumb-content",attrs:{separator:"/"}},[n("el-breadcrumb-item",{attrs:{to:{name:"cluster_manage"}}},[n("i",{staticClass:"fa fa-home"}),e._v("ES集群管理")]),e._v(" "),n("el-breadcrumb-item",[e._v(e._s(e.clusterId))])],1)],1),e._v(" "),n("dashboard-component",{attrs:{"cluster-info":e.clusterInfo}})],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page-content"},[n("div",{staticClass:"my-breadcrumb"},[n("el-breadcrumb",{staticClass:"my-breadcrumb-content",attrs:{separator:"/"}},[n("el-breadcrumb-item",[n("i",{staticClass:"fa fa-home"}),e._v("Token管理")])],1)],1),e._v(" "),n("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{gutter:20,"element-loading-text":"请稍等···"}},[n("el-col",{attrs:{span:6}},[e.isPrivilege?n("div",[n("el-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.handleAdd}},[e._v("新建Token")])],1):e._e(),e._v(" "),n("div",{staticClass:"mrg-top-10"},[n("el-input",{attrs:{placeholder:"输入关键字进行过滤",icon:"search","on-icon-click":e.handleSearch},model:{value:e.tokenForSearch,callback:function(t){e.tokenForSearch=t},expression:"tokenForSearch"}})],1),e._v(" "),n("div",{staticClass:"mrg-top-10 token-table"},[n("el-table",{attrs:{data:e.tokenList,"show-header":!1,"highlight-current-row":"",border:"",height:e.tokenHeight.height},on:{"row-click":e.handleTokenClick}},[n("el-table-column",{attrs:{label:"ID",prop:"id",width:"50px"}}),e._v(" "),n("el-table-column",{attrs:{prop:"title",label:"名称","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",{staticStyle:{"font-size":"16px"}},[e._v(e._s(t.row.title)+"\n                                "),n("el-tag",{attrs:{type:t.row.enabled?"success":"danger"}},[e._v(e._s(e.statusMap[t.row.enabled]))])],1),e._v(" "),n("div",{staticStyle:{color:"gray","font-size":"12px"}},[e._v(e._s(t.row.clientToken))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"编辑",width:"30px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text"},on:{click:function(n){n.stopPropagation(),e.handleEdit(t.row)}}},[n("i",{staticClass:"fa fa-pencil-square-o"})])]}}])})],1)],1)]),e._v(" "),n("el-col",{attrs:{span:18}},[e.isSelectToken?e._e():n("div",{staticClass:"token-warning",style:e.tokenErrorHeight},[n("i",{staticClass:"el-icon-warning"}),e._v("请选择Token")]),e._v(" "),e._l(e.tokenList,function(t){return n("div",{key:t.clientToken,staticClass:"token-body"},[e.tokenSelectInfo.clientToken===t.clientToken?n("token-detail",{attrs:{"token-height":e.tokenHeight,"token-info":e.tokenSelectInfo}}):e._e()],1)})],2)],1),e._v(" "),e.isTokenInfoVisible?n("div",[n("token-info-dialog",{attrs:{"token-info":e.tokenInfo,"token-info-operate":e.tokenInfoOperate,"token-info-title":e.tokenInfoTitle},on:{"token-info-success":e.tokenInfoSuccess,"close-dialog":e.closeTokenInfoDialog}})],1):e._e()],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"template-test-content"},[n("div",{staticClass:"template-test-head"},[e._v("设置请求参数")]),e._v(" "),n("div",{staticClass:"template-test-body"},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.paramsInfo,border:""}},[n("el-table-column",{attrs:{prop:"paramName",label:"请求参数"}}),e._v(" "),n("el-table-column",{attrs:{label:"包含"},scopedSlots:e._u([{key:"default",fn:function(e){return[n("el-checkbox",{model:{value:e.row.include,callback:function(t){e.row.include=t},expression:"scope.row.include"}})]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"请求值类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-select",{attrs:{disabled:!t.row.include,size:"small"},on:{change:function(n){e.valueTypeChange(t.row)}},model:{value:t.row.valueType,callback:function(e){t.row.valueType=e},expression:"scope.row.valueType"}},[n("el-option",{key:"1",attrs:{label:"固定值",value:"1"}},[e._v("固定值")]),e._v(" "),n("el-option",{key:"2",attrs:{label:"数据源",value:"2"}},[e._v("数据源")])],1)]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"数据源参数映射"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{directives:[{name:"show",rawName:"v-show",value:"1"===t.row.valueType,expression:"scope.row.valueType === '1'"}],attrs:{disabled:!t.row.include},model:{value:t.row.value,callback:function(e){t.row.value=e},expression:"scope.row.value"}}),e._v(" "),n("el-select",{directives:[{name:"show",rawName:"v-show",value:"2"===t.row.valueType,expression:"scope.row.valueType === '2'"}],staticStyle:{width:"100%"},attrs:{disabled:!t.row.include},model:{value:t.row.value,callback:function(e){t.row.value=e},expression:"scope.row.value"}},e._l(e.paramValues,function(e){return n("el-option",{key:e,attrs:{label:e,value:e}})}))]}}])})],1)],1)]),e._v(" "),n("div",{staticClass:"template-test-content",attrs:{align:"center"}},[n("el-button",{attrs:{type:"primary"},on:{click:e.handleGen}},[e._v("生成测试脚本")])],1)])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{staticStyle:{width:"100%",height:"100%"},attrs:{id:e.editorId}})},staticRenderFns:[]}},function(e,t,n){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"navbar"},[e._m(0),e._v(" "),n("div",{staticClass:"navbar-content"},[n("el-menu",{staticClass:"el-menu-demo",attrs:{theme:"dark","default-active":e.activeIndex,mode:"horizontal",router:!0}},[e._l(e.serviceList,function(t){return[n("el-menu-item",{key:t.index,attrs:{index:t.index,route:t}},[n("i",{class:t.icon}),e._v(e._s(t.title))])]}),e._v(" "),n("el-submenu",{staticClass:"pull-right",attrs:{index:"3"}},[n("template",{slot:"title"},[n("i",{staticClass:"fa fa-user"}),e._v(e._s(e.loginUser||"null"))]),e._v(" "),n("el-menu-item",{attrs:{index:""}},[n("a",{staticStyle:{display:"block"},attrs:{href:"/pallas/logout"}},[n("i",{staticClass:"fa fa-sign-out"}),e._v("注销")])])],2)],2)],1)])},staticRenderFns:[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"navbar-title"},[i("span",[i("img",{attrs:{src:n(501)}}),e._v("\n            Pallas一站式检索平台\n        ")])])}]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page-content"},[n("div",{staticClass:"my-breadcrumb"},[n("el-breadcrumb",{staticClass:"my-breadcrumb-content",attrs:{separator:"/"}},[n("el-breadcrumb-item",[n("i",{staticClass:"fa fa-home"}),e._v("索引管理")])],1)],1),e._v(" "),n("div",{staticClass:"data-table-filter"},[n("div",{staticClass:"pull-left"},[n("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[n("el-form-item",{attrs:{label:""}},[n("el-select",{attrs:{clearable:""},on:{change:e.toPage},model:{value:e.selectedCluster,callback:function(t){e.selectedCluster=t},expression:"selectedCluster"}},[n("el-option",{attrs:{label:"全部集群",value:""}}),e._v(" "),e._l(e.clusters,function(t){return n("el-option-group",{key:t.label,attrs:{label:t.label}},e._l(t.options,function(e){return n("el-option",{key:e.id,attrs:{label:e.clusterId,value:e.clusterId}})}))})],2)],1),e._v(" "),n("el-form-item",{attrs:{label:""}},[n("el-input",{attrs:{placeholder:"请搜索索引"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13))return null;e.toPage(t)}},model:{value:e.indexNameForSearch,callback:function(t){e.indexNameForSearch=t},expression:"indexNameForSearch"}})],1),e._v(" "),n("el-form-item",{staticClass:"filter-search"},[n("el-button",{attrs:{type:"primary",icon:"search"},on:{click:e.toPage}},[e._v("查询")])],1)],1)],1),e._v(" "),e.isAllPrivilege?n("div",{staticClass:"pull-right"},[n("el-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.handleAdd}},[e._v("新增索引")])],1):e._e()]),e._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.indexList.list,border:"","element-loading-text":"请稍等···"}},[n("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-form",{staticClass:"my-table-expand",attrs:{"label-position":"left",inline:""}},[n("el-form-item",{attrs:{label:"id"}},[n("span",[e._v(e._s(t.row.id))])]),e._v(" "),n("el-form-item",{attrs:{label:"索引名"}},[n("span",[e._v(e._s(t.row.indexName))])]),e._v(" "),n("el-form-item",{attrs:{label:"索引描述"}},[n("span",[e._v(e._s(t.row.description||"null"))])]),e._v(" "),n("el-form-item",{attrs:{label:"所属集群"}},[n("span",[e._v(e._s(t.row.clusterName))])]),e._v(" "),n("el-form-item",{attrs:{label:"集群描述"}},[n("span",[e._v(e._s(t.row.clusterDesc||"null"))])]),e._v(" "),n("el-form-item",{attrs:{label:"创建人"}},[n("span",[e._v(e._s(t.row.createUser||"null"))])]),e._v(" "),n("el-form-item",{attrs:{label:"创建时间"}},[n("span",[e._v(e._s(e._f("formatDate")(t.row.createTime)))])]),e._v(" "),n("el-form-item",{attrs:{label:"更新时间"}},[n("span",[e._v(e._s(e._f("formatDate")(t.row.updateTime)))])]),e._v(" "),n("el-form-item",{attrs:{label:"数据源数量"}},[n("span",[e._v(e._s(t.row.dataSourceList.length))])]),e._v(" "),n("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"数据源"}},e._l(t.row.dataSourceList,function(t){return n("span",{key:t.id,staticClass:"data-source-text"},[e._v(e._s(t.dbname)+" - "+e._s(t.tableName)+";")])}))],1)]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"id",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.hasPrivilege?n("div",{staticClass:"my-a-link"},[n("router-link",{attrs:{tag:"a",to:{path:"index_detail",query:{indexId:t.row.id,indexName:t.row.indexName}}}},[e._v(e._s(t.row.id))])],1):n("div",[e._v(e._s(t.row.id))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"索引名","min-width":"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.hasPrivilege?n("div",{staticClass:"my-a-link"},[n("router-link",{attrs:{tag:"a",to:{path:"index_detail",query:{indexId:t.row.id,indexName:t.row.indexName}}}},[e._v(e._s(t.row.indexName))])],1):n("div",[e._v(e._s(t.row.indexName))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"索引描述","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.description||"-"))]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"所属集群","min-width":"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.hasClusterPrivilege&&t.row.httpAddress?n("div",{staticClass:"my-a-link"},[n("router-link",{attrs:{tag:"a",to:{path:"cluster_detail",query:{clusterId:t.row.clusterName}}}},[e._v(e._s(t.row.clusterName))])],1):n("div",[e._v(e._s(t.row.clusterName))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"数据源",width:"70px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.dataSourceList.length))]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"创建人"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.createUser||"-"))]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"更新时间",prop:"updateTime",width:"160px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDate")(t.row.updateTime)))]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.hasPrivilege?n("el-tooltip",{attrs:{content:"编辑",placement:"top"}},[n("el-button",{attrs:{type:"text"},on:{click:function(n){e.handleEdit(t.row)}}},[n("i",{staticClass:"fa fa-edit"})])],1):e._e(),e._v(" "),t.row.hasPrivilege?n("el-tooltip",{attrs:{content:"管理",placement:"top"}},[n("el-button",{attrs:{type:"text"},on:{click:function(n){e.handleManage(t.$index,t.row)}}},[n("i",{staticClass:"fa fa-bars"})])],1):e._e(),e._v(" "),t.row.hasPrivilege?n("el-tooltip",{attrs:{content:"删除",placement:"top"}},[n("el-button",{attrs:{type:"text"},on:{click:function(n){e.handleDelete(t.row)}}},[n("i",{staticClass:"fa fa-trash"})])],1):e._e()]}}])})],1),e._v(" "),0!=e.indexList.total?n("div",{staticClass:"my-pagination"},[n("el-pagination",{attrs:{layout:"prev, pager, next, jumper",total:e.indexList.total,"page-size":e.pageSize,"current-page":e.currentPage},on:{"current-change":e.changePage}})],1):e._e(),e._v(" "),e.isIndexInfoVisible?n("div",[n("index-info-dialog",{attrs:{"index-operation":e.indexOperation,"index-info-title":e.indexInfoTitle,"index-info":e.indexInfo,clusters:e.clusters},on:{"close-dialog":e.closeDialog,"operate-close-dialog":e.operateCloseDialog}})],1):e._e()],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tm-body"},[n("ol",{staticClass:"tm-items"},[e._t("default")],2)])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"my-tab-content"},[n("div",{staticClass:"content"},[[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.flowRecordList,border:"","element-loading-text":"请稍等···"}},[n("el-table-column",{attrs:{label:"记录id",prop:"id",width:"100px"}}),e._v(" "),n("el-table-column",{attrs:{label:"采集规则ID",prop:"configId",width:"100px"}}),e._v(" "),n("el-table-column",{attrs:{label:"最后更新时间",prop:"updateTime","min-width":"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDate")(t.row.updateTime)))]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"抽样系数",prop:"sampleRate","min-width":"110"}}),e._v(" "),n("el-table-column",{attrs:{label:"目标采集数",prop:"limit","min-width":"110"}}),e._v(" "),n("el-table-column",{attrs:{label:"当前采集数",prop:"total","min-width":"110"}}),e._v(" "),n("el-table-column",{attrs:{label:"采集进度","min-width":"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.percentage)+"%")]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"状态",prop:"state","min-width":"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-tag",{attrs:{type:3!=t.row.state?"success":"danger"}},[e._v(e._s(e.flowRecordStateMap[t.row.state]))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-dropdown",{attrs:{trigger:"click"}},[n("span",{staticClass:"el-dropdown-link"},[e._v("\n                            操作"),n("i",{staticClass:"el-icon-caret-bottom el-icon--right"})]),e._v(" "),n("el-dropdown-menu",{staticClass:"dropdown-operation",slot:"dropdown"},[e.isAllPrivilege?n("el-dropdown-item",{directives:[{name:"show",rawName:"v-show",value:t.row.total>0,expression:"scope.row.total > 0"}]},[n("a",{on:{click:function(n){e.exportFlow(t.row)}}},[n("span",[n("i",{staticClass:"fa fa-file"}),e._v("导出")])])]):e._e(),e._v(" "),e.isAllPrivilege?n("el-dropdown-item",{directives:[{name:"show",rawName:"v-show",value:2!=t.row.state&&3!=t.row.state,expression:"scope.row.state != 2 && scope.row.state != 3"}]},[n("a",{on:{click:function(n){e.stopRecord(t.row)}}},[n("span",[n("i",{staticClass:"fa fa-stop-circle-o"}),e._v("终止")])])]):e._e(),e._v(" "),e.isAllPrivilege?n("el-dropdown-item",{directives:[{name:"show",rawName:"v-show",value:2==t.row.state||3==t.row.state,expression:"scope.row.state == 2 || scope.row.state == 3"}]},[n("a",{on:{click:function(n){e.handleDelete(t.row)}}},[n("span",[n("i",{staticClass:"fa fa-trash"}),e._v("删除")])])]):e._e()],1)],1)]}}])})],1)],e._v(" "),e.total>0?n("div",{staticClass:"my-pagination"},[n("el-pagination",{attrs:{layout:"prev, pager, next",total:e.total,"page-size":e.pageSize},on:{"current-change":e.changePage}})],1):e._e()],2)])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page-content"},[n("div",{staticClass:"my-breadcrumb"},[n("el-breadcrumb",{staticClass:"my-breadcrumb-content",attrs:{separator:"/"}},[n("el-breadcrumb-item",[n("i",{staticClass:"fa fa-home"}),e._v("代理管理")])],1)],1),e._v(" "),n("div",{staticClass:"data-table-filter"},[e.isPrivilege?n("div",{staticClass:"pull-left"},[n("el-button",{attrs:{type:"primary"},on:{click:e.batchUpdateRoute}},[e._v("批量更新路由")])],1):e._e(),e._v(" "),n("div",{staticClass:"pull-right"},[n("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[n("el-form-item",{attrs:{label:""}},[n("el-select",{on:{change:e.toPage},model:{value:e.selectedCluster,callback:function(t){e.selectedCluster=t},expression:"selectedCluster"}},[n("el-option",{attrs:{label:"全部集群",value:""}}),e._v(" "),e._l(e.clusters,function(e){return n("el-option",{key:e,attrs:{label:e,value:e}})})],2)],1),e._v(" "),n("el-form-item",{staticClass:"filter-search"},[n("el-button",{attrs:{type:"primary",icon:"delete"},on:{click:e.handleDeleteExpired}},[e._v("删除离线数据(3天前)")])],1)],1)],1)]),e._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.agentList,border:"","element-loading-text":"请稍等···"},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55",selectable:e.setSelectable}}),e._v(" "),n("el-table-column",{attrs:{label:"ID",prop:"id"}}),e._v(" "),n("el-table-column",{attrs:{label:"IP端口",prop:"ipport"}}),e._v(" "),n("el-table-column",{attrs:{label:"代理集群",prop:"cluster"}}),e._v(" "),n("el-table-column",{attrs:{label:"节点状态",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-tag",{attrs:{type:t.row.healthy?"success":"danger","close-transition":""}},[e._v(e._s(e._f("translateState")(t.row.healthy)))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"当前QPS",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("currentQps")(t.row)))]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"连接数",width:"60px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("currentConns")(t.row)))]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"Req.volume",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("currentReceiveClientThrougph")(t.row)))]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"Res.volume",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("currentReceiveEsThrougph")(t.row)))]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"启用",width:"60px"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-tag",{attrs:{type:t.row.takeTraffic?"success":"danger","close-transition":""}},[e._v(e._s(t.row.takeTraffic?"是":"否"))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"最后上报时间",width:"160px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDate")(t.row.updateTime)))]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-tooltip",{attrs:{content:"节点信息",placement:"top"}},[n("el-button",{attrs:{type:"text"},on:{click:function(n){e.getInfo(t.row)}}},[n("i",{staticClass:"fa fa-envelope"})])],1),e._v(" "),t.row.healthy?n("el-tooltip",{attrs:{content:"更新路由",placement:"top"}},[n("el-button",{attrs:{type:"text"},on:{click:function(n){e.updateRoute(t.row)}}},[n("i",{staticClass:"fa fa-repeat"})])],1):e._e(),e._v(" "),t.row.takeTraffic?n("el-tooltip",{attrs:{content:"停用",placement:"top"}},[n("el-button",{attrs:{type:"text"},on:{click:function(n){e.handleRemoveTraffic(t.row)}}},[n("i",{staticClass:"fa fa-level-down"})])],1):e._e(),e._v(" "),t.row.takeTraffic?e._e():n("el-tooltip",{attrs:{content:"启用",placement:"top"}},[n("el-button",{attrs:{type:"text"},on:{click:function(n){e.handleRecoverTraffic(t.row)}}},[n("i",{staticClass:"fa fa-level-up"})])],1),e._v(" "),t.row.healthy?e._e():n("el-tooltip",{attrs:{content:"删除",placement:"top"}},[n("el-button",{attrs:{type:"text"},on:{click:function(n){e.handleDelete(t.row)}}},[n("i",{staticClass:"fa fa-trash"})])],1)]}}])})],1),e._v(" "),0!=e.total?n("div",{staticClass:"my-pagination"},[n("el-pagination",{attrs:{layout:"prev, pager, next, jumper",total:e.total,"page-size":e.pageSize,"current-page":e.currentPage},on:{"current-change":e.changePage}})],1):e._e(),e._v(" "),e.isAgentInfoVisible?n("div",[n("json-content-dialog",{attrs:{title:e.viewInfoTitle,content:e.viewInfo},on:{"close-dialog":e.closeDialog}})],1):e._e()],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:"导入Mysql数据源","before-close":e.handleClose},model:{value:e.isDsImportVisible,callback:function(t){e.isDsImportVisible=t},expression:"isDsImportVisible"}},[n("el-form",[n("el-row",[n("el-col",{attrs:{span:18}},[n("el-form-item",[n("el-upload",{ref:"upload",attrs:{action:"/pallas/ds/import.json","auto-upload":!1,multiple:!1,"file-list":e.fileList,"on-remove":e.handleRemove,"on-error":e.handleError,"on-success":e.handleSuccess}},[n("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.handleUpload}},[e._v("点击上传")]),e._v(" "),n("div",{staticClass:"el-upload__tip",slot:"tip"},[e._v("请上传文本文件，每行一条数据源，内容以空格分开"),n("br"),e._v("字段分别为：ip port user passwd database table")])],1)],1)],1)],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",slot:"footer"},[n("el-button",{on:{click:function(t){e.handleClose()}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"confirm"},on:{click:e.submitImportDs}},[e._v("确定")])],1)],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"target-group",attrs:{"element-loading-text":"请稍等···"}},[n("div",{staticClass:"data-table-filter"},[e.privilege?n("el-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.handleAdd}},[e._v("添加节点集")]):e._e(),e._v(" "),"{}"!=JSON.stringify(e.routingTargetGroupsList)?n("el-select",{on:{change:e.changeShowTreeInfo},model:{value:e.selectedShowTreeInfo,callback:function(t){e.selectedShowTreeInfo=t},expression:"selectedShowTreeInfo"}},[n("el-option",{attrs:{label:"展示节点名称",value:"name"}}),e._v(" "),n("el-option",{attrs:{label:"展示节点地址",value:"address"}})],1):e._e()],1),e._v(" "),"{}"===JSON.stringify(e.routingTargetGroupsList)?n("div",{staticClass:"target-group-null"},[n("span",[e._v("请添加节点集")])]):n("div",[n("el-row",{attrs:{gutter:20}},e._l(e.routingTargetGroupsList,function(t,i){return n("el-col",{key:t.id,attrs:{span:12}},[n("target-group-item",{attrs:{privilege:e.privilege,"target-group-tree-no-children":JSON.parse(JSON.stringify(e.targetGroupTreeNoChildren)),"target-group-tree":JSON.parse(JSON.stringify(e.targetGroupTree)),targetGroupItemInfo:t,"selected-show-tree-info":e.selectedShowTreeInfo},on:{"save-operation":e.saveOperation,"delete-operation":e.deleteOperation}})],1)}))],1),e._v(" "),e.istargetGroupInfoVisible?n("div",[n("target-group-info-dialog",{attrs:{"target-group-info":e.targetGroupInfo,"target-group-info-title":e.targetGroupInfoTitle},on:{"operation-success":e.operationSuccess,"close-dialog":e.closeTargetGroupDialog}})],1):e._e()])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"my-tab-content",attrs:{"element-loading-text":"请稍等···"}},[n("div",{staticClass:"content"},[n("div",{staticClass:"data-table-filter"},[n("div",{staticClass:"pull-left"},[n("el-button",{attrs:{type:"primary",icon:"delete"},on:{click:e.handleDelete}},[e._v("删除索引动态(3月前)")])],1),e._v(" "),n("div",{staticClass:"pull-right"},[n("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[n("el-form-item",[n("el-select",{on:{change:e.getOperationList},model:{value:e.selectedType,callback:function(t){e.selectedType=t},expression:"selectedType"}},[n("el-option",{attrs:{label:"全部事件",value:""}}),e._v(" "),e._l(e.typeList,function(e){return n("el-option",{key:e.value,attrs:{label:e.value,value:e.value}})})],2)],1),e._v(" "),n("el-form-item",[n("el-select",{attrs:{filterable:"","allow-create":""},on:{change:e.getOperationList},model:{value:e.filterVersion,callback:function(t){e.filterVersion=t},expression:"filterVersion"}},[n("el-option",{attrs:{label:"全部版本",value:""}}),e._v(" "),e._l(e.versionIdList,function(e){return n("el-option",{key:e.value,attrs:{label:e.value,value:e.value}})})],2)],1),e._v(" "),n("el-date-picker",{attrs:{type:"datetimerange",placeholder:"选择时间范围"},on:{change:e.getOperationList},model:{value:e.timeRange,callback:function(t){e.timeRange=t},expression:"timeRange"}}),e._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary",icon:"search"},on:{click:e.getOperationList}},[e._v("查询")])],1)],1)],1)])]),e._v(" "),n("div",{staticClass:"content"},[0===e.operationList.length?n("div",{staticClass:"empty-operation"},[e._v("暂无数据")]):n("Timeline",e._l(e.operationList,function(t){return n("Timeline-item",{key:t.id},[n("div",{staticStyle:{"margin-top":"-8px"},slot:"date"},[e._v("\n                  "+e._s(e._f("formatOnlyDate")(t.operationTime))),n("br"),e._v(e._s(e._f("formatOnlyTime")(t.operationTime))+"\n              ")]),e._v(" "),n("div",{staticStyle:{"margin-top":"-8px"},slot:"title"},[e._v("\n                  "+e._s(t.eventType)),n("br"),e._v(e._s(t.eventName)+"\n              ")]),e._v(" "),n("div",{staticClass:"operation-content",slot:"content"},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:2}},[e._v("操作员：")]),e._v(" "),n("el-col",{attrs:{span:9}},[e._v(e._s(t.operator||"无"))]),e._v(" "),n("el-col",{attrs:{span:2}},[e._v("版本号：")]),e._v(" "),n("el-col",{attrs:{span:9}},[e._v(e._s(t.versionId||"无"))]),e._v(" "),t.isShowIcon?n("div",[n("el-col",{directives:[{name:"show",rawName:"v-show",value:!t.isFold,expression:"!op.isFold"}],attrs:{span:2}},[n("div",{attrs:{align:"right"}},[n("a",{on:{click:function(e){t.isFold=!t.isFold}}},[n("i",{staticClass:"el-icon-arrow-down"})])])]),e._v(" "),n("el-col",{directives:[{name:"show",rawName:"v-show",value:t.isFold,expression:"op.isFold"}],attrs:{span:2}},[n("div",{attrs:{align:"right"}},[n("a",{on:{click:function(e){t.isFold=!t.isFold}}},[n("i",{staticClass:"el-icon-arrow-right"})])])])],1):e._e()],1),e._v(" "),n("div",{class:[t.isFold?"operation-content-fold":"operation-content-unfold"]},[n("el-row",[n("el-col",{attrs:{span:2}},[e._v("操作内容：")]),e._v(" "),n("el-col",{staticStyle:{"word-wrap":"break-word"},attrs:{span:22}},[e._v(e._s(t.eventDetail||"无"))])],1)],1)],1)])})),e._v(" "),0!=e.operationData.total?n("div",{staticClass:"dynamic-pagination",attrs:{align:"right"}},[n("el-pagination",{attrs:{layout:"prev, pager, next",total:e.operationData.total,"page-size":e.pageSize,"current-page":e.currentPage},on:{"current-change":e.changePage}})],1):e._e()],1),e._v(" "),e.isDynamicInfoVisible?n("div",[n("dynamic-info-dialog",{attrs:{"dynamic-operation":e.dynamicOperation,"dynamic-info-title":e.dynamicInfoTitle,"dynamic-info":e.dynamicInfo,typeList:e.typeList,versionIdList:e.versionIdList},on:{"close-dialog":e.closeDialog,"operate-close-dialog":e.operateCloseDialog}})],1):e._e()])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"target-group",attrs:{"element-loading-text":"请稍等···"}},[n("div",{staticClass:"data-table-filter"},[e.privilege?n("el-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.handleAdd}},[e._v("添加节点集")]):e._e(),e._v(" "),"{}"!=JSON.stringify(e.routingTargetGroupsList)?n("el-select",{on:{change:e.changeShowTreeInfo},model:{value:e.selectedShowTreeInfo,callback:function(t){e.selectedShowTreeInfo=t},expression:"selectedShowTreeInfo"}},[n("el-option",{attrs:{label:"展示节点名称",value:"name"}}),e._v(" "),n("el-option",{attrs:{label:"展示节点地址",value:"address"}})],1):e._e()],1),e._v(" "),"{}"===JSON.stringify(e.routingTargetGroupsList)?n("div",{staticClass:"target-group-null"},[n("span",[e._v("请添加节点集")])]):n("div",[n("el-row",{attrs:{gutter:20}},e._l(e.routingTargetGroupsList,function(t,i){return n("el-col",{key:t.id,attrs:{span:12}},[n("target-group-item",{attrs:{privilege:e.privilege,"target-group-tree-no-children":JSON.parse(JSON.stringify(e.targetGroupTreeNoChildren)),"target-group-tree":JSON.parse(JSON.stringify(e.targetGroupTree)),targetGroupItemInfo:t,"selected-show-tree-info":e.selectedShowTreeInfo},on:{"save-operation":e.saveOperation,"delete-operation":e.deleteOperation}})],1)}))],1),e._v(" "),e.istargetGroupInfoVisible?n("div",[n("target-group-info-dialog",{attrs:{"target-group-info":e.targetGroupInfo,"target-group-info-title":e.targetGroupInfoTitle},on:{"operation-success":e.operationSuccess,"close-dialog":e.closeTargetGroupDialog}})],1):e._e()])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page-content"},[n("div",{staticClass:"my-breadcrumb"},[n("el-breadcrumb",{staticClass:"my-breadcrumb-content",attrs:{separator:"/"}},[n("el-breadcrumb-item",{attrs:{to:{name:"index_manage"}}},[n("i",{staticClass:"fa fa-home"}),e._v("索引管理")]),e._v(" "),n("el-breadcrumb-item",[e._v(e._s(e.indexName)+"("+e._s(e.indexId)+")")])],1)],1),e._v(" "),n("div",{staticClass:"page-tab"},[n("el-tabs",{on:{"tab-click":e.onTabClick},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[n("el-tab-pane",{attrs:{name:"version_manage"}},[n("span",{slot:"label"},[n("i",{staticClass:"fa fa-share-alt"}),e._v("版本管理")])]),e._v(" "),n("el-tab-pane",{attrs:{name:"template_manage"}},[n("span",{slot:"label"},[n("i",{staticClass:"fa fa-th-large"}),e._v("模板管理")])]),e._v(" "),n("el-tab-pane",{attrs:{name:"route_manage"}},[n("span",{slot:"label"},[n("i",{staticClass:"fa fa-sitemap"}),e._v("路由管理")])]),e._v(" "),n("el-tab-pane",{attrs:{name:"service_manage"}},[n("span",{slot:"label"},[n("i",{staticClass:"fa fa-server"}),e._v("服务治理")])]),e._v(" "),n("el-tab-pane",{attrs:{name:"dynamic_manage"}},[n("span",{slot:"label"},[n("i",{staticClass:"fa fa-sort-amount-asc"}),e._v("索引动态")])]),e._v(" "),n("el-tab-pane",{attrs:{name:"flow_record"}},[n("span",{slot:"label"},[n("i",{staticClass:"fa fa-camera"}),e._v("流量记录")])])],1),e._v(" "),n("router-view")],1)])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{title:e.configInfoTitle,size:"small","before-close":e.closeDialog,"element-loading-text":"请稍等···"},model:{value:e.isconfigInfoVisible,callback:function(t){e.isconfigInfoVisible=t},expression:"isconfigInfoVisible"}},[n("el-form",{ref:"configInfo",attrs:{model:e.configInfo,rules:e.rules,"label-width":"140px"}},[n("el-row",[n("el-col",{attrs:{span:22}},[n("el-form-item",{attrs:{label:"目标模板",prop:"templateId",required:""}},[n("el-select",{staticStyle:{width:"100%"},model:{value:e.configInfo.templateId,callback:function(t){e.configInfo.templateId=t},expression:"configInfo.templateId"}},e._l(e.templates,function(e){return n("el-option",{key:e.id,attrs:{label:e.templateName,value:e.id}})}))],1)],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:22}},[n("el-form-item",{attrs:{label:"采集开始时间",prop:"startTime",required:""}},[n("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"选择开始时间"},model:{value:e.configInfo.startTime,callback:function(t){e.configInfo.startTime=t},expression:"configInfo.startTime"}})],1)],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:22}},[n("el-form-item",{attrs:{label:"采集结束时间",prop:"endTime",required:""}},[n("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"选择结束时间"},model:{value:e.configInfo.endTime,callback:function(t){e.configInfo.endTime=t},expression:"configInfo.endTime"}})],1)],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:22}},[n("el-form-item",{attrs:{label:"抽样系数",prop:"sampleRate",required:""}},[n("el-input",{attrs:{placeholder:"范围0到1"},model:{value:e.configInfo.sampleRate,callback:function(t){e.configInfo.sampleRate=t},expression:"configInfo.sampleRate"}})],1)],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:22}},[n("el-form-item",{attrs:{label:"采集数量",prop:"limit"}},[n("el-input",{model:{value:e.configInfo.limit,callback:function(t){e.configInfo.limit=t},expression:"configInfo.limit"}})],1)],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:22}},[n("el-form-item",{attrs:{label:"描述",prop:"note"}},[n("el-input",{attrs:{type:"textarea"},model:{value:e.configInfo.note,callback:function(t){e.configInfo.note=t},expression:"configInfo.note"}})],1)],1)],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",slot:"footer"},[n("el-button",{on:{click:function(t){e.closeDialog()}}},[e._v("取消")]),e._v(" "),n("el-button",{attrs:{type:"confirm"},on:{click:function(t){e.submitconfigInfo()}}},[e._v("保存")])],1)],1)},staticRenderFns:[]}},,function(e,t,n){var i=n(431);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n(3)("012d57c2",i,!0)},function(e,t,n){var i=n(432);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n(3)("2495d13d",i,!0)},function(e,t,n){var i=n(433);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n(3)("284eac06",i,!0)},function(e,t,n){var i=n(434);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n(3)("89aafce8",i,!0)},function(e,t,n){var i=n(435);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n(3)("6cb87b85",i,!0)},function(e,t,n){var i=n(436);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n(3)("2c86a19c",i,!0)},function(e,t,n){var i=n(437);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n(3)("30e645b2",i,!0)},function(e,t,n){var i=n(438);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n(3)("3bc08566",i,!0)},function(e,t,n){var i=n(439);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n(3)("6c0c9162",i,!0)},function(e,t,n){var i=n(440);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n(3)("5b248576",i,!0)},function(e,t,n){var i=n(441);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n(3)("24ceb9d6",i,!0)},function(e,t,n){var i=n(442);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n(3)("20e99ef8",i,!0)},function(e,t,n){var i=n(443);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n(3)("257c714e",i,!0)},function(e,t,n){var i=n(444);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n(3)("c00d6d0c",i,!0)},function(e,t,n){var i=n(445);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n(3)("fd5d2c9e",i,!0)},function(e,t,n){var i=n(446);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n(3)("bbb03962",i,!0)},function(e,t,n){var i=n(447);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n(3)("0209d4e3",i,!0)},function(e,t,n){var i=n(448);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n(3)("9311f38e",i,!0)},function(e,t,n){var i=n(449);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n(3)("75c4635f",i,!0)},function(e,t,n){var i=n(450);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n(3)("7c59e9f8",i,!0)},function(e,t,n){var i=n(451);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n(3)("2c1b4a37",i,!0)},function(e,t,n){var i=n(452);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n(3)("287a9230",i,!0)},function(e,t,n){var i=n(453);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n(3)("7a761bf6",i,!0)},function(e,t,n){var i=n(454);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n(3)("5c80bb0f",i,!0)},function(e,t,n){var i=n(455);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n(3)("8f22182a",i,!0)},function(e,t,n){var i=n(456);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n(3)("a6d816c6",i,!0)},function(e,t,n){var i=n(457);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n(3)("5794c64e",i,!0)},function(e,t,n){var i=n(458);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n(3)("055ce804",i,!0)},function(e,t,n){var i=n(459);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n(3)("18570d76",i,!0)},function(e,t,n){var i=n(460);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n(3)("5c4252a2",i,!0)},function(e,t,n){var i=n(461);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n(3)("04178ab1",i,!0)},function(e,t,n){var i=n(462);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n(3)("8f993ede",i,!0)},function(e,t,n){var i=n(463);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n(3)("35a71c35",i,!0)},function(e,t,n){var i=n(464);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n(3)("228e5576",i,!0)},function(e,t,n){var i=n(465);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n(3)("16c60068",i,!0)},function(e,t,n){var i=n(466);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n(3)("1c5e5476",i,!0)},function(e,t,n){var i=n(467);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n(3)("6e451322",i,!0)},function(e,t,n){var i=n(468);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n(3)("095d2af6",i,!0)},function(e,t,n){var i=n(469);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n(3)("4b7e0b24",i,!0)},function(e,t,n){var i=n(470);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n(3)("86c97bba",i,!0)},function(e,t,n){var i=n(471);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n(3)("54a1f284",i,!0)},function(e,t,n){var i=n(472);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n(3)("1de909ae",i,!0)},function(e,t,n){var i=n(473);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n(3)("6a3b2dee",i,!0)},function(e,t,n){var i=n(474);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n(3)("5d65c4b1",i,!0)},function(e,t,n){var i=n(475);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n(3)("54521777",i,!0)},,,,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(7),o=i(a),s=n(72),l=i(s);n(245),n(246),n(43),n(241);var r=n(249),c=i(r),u=n(243),d=i(u),p=n(242),f=i(p),m=n(244),g=i(m);n(248),n(247),o.default.use(l.default),o.default.use(g.default),new o.default({el:"#app",store:d.default,router:f.default,render:function(e){return e(c.default)}})}]),[698]);
//# sourceMappingURL=app.3804192c4912b9ab9ed6.js.map